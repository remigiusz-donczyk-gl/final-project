{"version":3,"sources":["webpack:///./src/main/js/apps/overview/components/EmptyOverview.tsx"],"names":["EmptyOverview","props","branchLike","branchLikes","component","currentUser","hasAnalyses","projectBinding","qualifier","Application","className","variant","warning","hasBranches","length","hasBadBranchConfig","some","branch","showWarning","showTutorial","defaultMessage","id","values","branchName","branchType","state"],"mappings":"6FAAA,mJAyCM,SAAUA,EAAcC,GACpB,IAAAC,EAAiFD,EAAvE,WAAEE,EAAqEF,EAA1D,YAAEG,EAAwDH,EAA/C,UAAEI,EAA6CJ,EAAlC,YAAEK,EAAgCL,EAArB,YAAEM,EAAmBN,EAAL,eAEpF,GAAIG,EAAUI,YAAc,IAAmBC,YAC7C,OACE,uBAAKC,UAAU,qBACb,gBAAC,QAAK,CAACC,QAAQ,WAAW,oBAAU,0CAGnC,IAAK,YAAST,GACnB,OAAO,KAGT,IAQIU,EAREC,EAAcV,EAAYW,OAAS,EACnCC,EACJZ,EAAYW,OAAS,GACG,IAAvBX,EAAYW,QAAgBX,EAAYa,MAAK,SAAAC,GAAU,yBAEpDC,EAAc,YAAahB,IAAeW,EAC1CM,EAAe,YAAajB,KAAgBW,IAAgBP,EA0BlE,OAtBEM,EADE,YAAWP,IAAgBa,GAAeH,EAE1C,gBAAC,mBAAgB,CACfK,eAAgB,oBAAU,6DAC1BC,GAAG,4DACHC,OAAQ,CACNC,WAAY,YAAyBrB,GACrCsB,WAAY,oBAAU,2BAM1B,gBAAC,mBAAgB,CACfJ,eAAgB,oBAAU,2CAC1BC,GAAG,0CACHC,OAAQ,CACNC,WAAY,YAAyBrB,MAO3C,uBAAKQ,UAAU,qBACZ,YAAWL,GACV,gCACGa,GAAe,gBAAC,QAAK,CAACP,QAAQ,WAAWC,GACzCO,GACC,gBAAC,IAAiB,CAChBf,UAAWA,EACXC,YAAaA,EACbE,eAAgBA,KAKtB,gBAAC,QAAK,CAACI,QAAQ,WAAWC,IAUnB,uBAJS,SAACa,GAAiB,MAAC,CACzCpB,YAAa,yBAAeoB,MAGf,CAAyBzB","file":"js/366.1655372229846.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport TutorialSelection from '../../../components/tutorials/TutorialSelection';\nimport { getBranchLikeDisplayName, isBranch, isMainBranch } from '../../../helpers/branch-like';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { getCurrentUser, Store } from '../../../store/rootReducer';\nimport { ProjectAlmBindingResponse } from '../../../types/alm-settings';\nimport { BranchLike } from '../../../types/branch-like';\nimport { ComponentQualifier } from '../../../types/component';\n\nexport interface EmptyOverviewProps {\n  branchLike?: BranchLike;\n  branchLikes: BranchLike[];\n  component: T.Component;\n  currentUser: T.CurrentUser;\n  hasAnalyses?: boolean;\n  projectBinding?: ProjectAlmBindingResponse;\n}\n\nexport function EmptyOverview(props: EmptyOverviewProps) {\n  const { branchLike, branchLikes, component, currentUser, hasAnalyses, projectBinding } = props;\n\n  if (component.qualifier === ComponentQualifier.Application) {\n    return (\n      <div className=\"page page-limited\">\n        <Alert variant=\"warning\">{translate('provisioning.no_analysis.application')}</Alert>\n      </div>\n    );\n  } else if (!isBranch(branchLike)) {\n    return null;\n  }\n\n  const hasBranches = branchLikes.length > 1;\n  const hasBadBranchConfig =\n    branchLikes.length > 2 ||\n    (branchLikes.length === 2 && branchLikes.some(branch => isBranch(branch)));\n\n  const showWarning = isMainBranch(branchLike) && hasBranches;\n  const showTutorial = isMainBranch(branchLike) && !hasBranches && !hasAnalyses;\n\n  let warning;\n  if (isLoggedIn(currentUser) && showWarning && hasBadBranchConfig) {\n    warning = (\n      <FormattedMessage\n        defaultMessage={translate('provisioning.no_analysis_on_main_branch.bad_configuration')}\n        id=\"provisioning.no_analysis_on_main_branch.bad_configuration\"\n        values={{\n          branchName: getBranchLikeDisplayName(branchLike),\n          branchType: translate('branches.main_branch')\n        }}\n      />\n    );\n  } else {\n    warning = (\n      <FormattedMessage\n        defaultMessage={translate('provisioning.no_analysis_on_main_branch')}\n        id=\"provisioning.no_analysis_on_main_branch\"\n        values={{\n          branchName: getBranchLikeDisplayName(branchLike)\n        }}\n      />\n    );\n  }\n\n  return (\n    <div className=\"page page-limited\">\n      {isLoggedIn(currentUser) ? (\n        <>\n          {showWarning && <Alert variant=\"warning\">{warning}</Alert>}\n          {showTutorial && (\n            <TutorialSelection\n              component={component}\n              currentUser={currentUser}\n              projectBinding={projectBinding}\n            />\n          )}\n        </>\n      ) : (\n        <Alert variant=\"warning\">{warning}</Alert>\n      )}\n    </div>\n  );\n}\n\nconst mapStateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(mapStateToProps)(EmptyOverview);\n"],"sourceRoot":""}