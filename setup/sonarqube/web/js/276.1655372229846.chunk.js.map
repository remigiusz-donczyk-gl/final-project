{"version":3,"sources":["webpack:///./src/main/js/components/ui/PageShortcutsTooltip.tsx","webpack:///./src/main/js/apps/coding-rules/components/SimilarRulesFilter.tsx","webpack:///./src/main/js/components/common/FiltersHeader.tsx","webpack:///./src/main/js/apps/coding-rules/styles.css?8cf5","webpack:///./src/main/js/apps/coding-rules/styles.css","webpack:///./src/main/js/apps/issues/sidebar/StandardFacet.tsx","webpack:///./src/main/js/components/facet/MultipleSelectionHint.css?3321","webpack:///./src/main/js/components/facet/MultipleSelectionHint.css","webpack:///./src/main/js/components/common/PageCounter.tsx","webpack:///./src/main/js/components/shared/TypeHelper.tsx","webpack:///./src/main/js/apps/coding-rules/components/RemoveExtendedDescriptionModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsDescription.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsTagsPopup.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsMeta.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationFormModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/BulkChangeModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/BulkChange.tsx","webpack:///./src/main/js/apps/coding-rules/components/Facet.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationSeverityFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/AvailableSinceFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/DefaultSeverityFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/InheritanceFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/LanguageFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/ProfileFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/RepositoryFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/StatusFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TagFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TemplateFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TypeFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/FacetsList.tsx","webpack:///./src/main/js/apps/coding-rules/components/PageActions.tsx","webpack:///./src/main/js/apps/coding-rules/components/CustomRuleFormModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/CustomRuleButton.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsCustomRules.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsIssues.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsParameters.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationButton.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleInheritanceIcon.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsProfiles.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetails.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleListItem.tsx","webpack:///./src/main/js/apps/coding-rules/components/App.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/api/quality-profiles.ts","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./src/main/js/helpers/sanitize.ts","webpack:///./src/main/js/components/tags/TagsList.css?d861","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./src/main/js/components/facet/FacetBox.tsx","webpack:///./src/main/js/components/facet/FacetHeader.tsx","webpack:///./src/main/js/components/facet/FacetItem.tsx","webpack:///./src/main/js/components/facet/FacetItemsList.tsx","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/common/DocumentationTooltip.tsx","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/common/FormattingTips.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./src/main/js/components/facet/ListStyleFacetFooter.tsx","webpack:///./src/main/js/components/facet/ListStyleFacet.tsx","webpack:///./src/main/js/components/tags/TagsSelector.tsx","webpack:///./src/main/js/components/controls/DateInput.tsx","webpack:///./src/main/js/components/controls/DayPicker.css?d7e1","webpack:///./src/main/js/components/controls/DayPicker.css","webpack:///./src/main/js/components/controls/styles.css?5633","webpack:///./src/main/js/components/controls/styles.css","webpack:///./src/main/js/components/facet/MultipleSelectionHint.tsx","webpack:///./src/main/js/components/search-navigator.css?9a2e","webpack:///./src/main/js/components/search-navigator.css","webpack:///./src/main/js/apps/quality-profiles/components/BuiltInQualityProfileBadge.tsx","webpack:///./src/main/js/helpers/security-standard.ts"],"names":["PageShortcutsTooltip","props","className","leftAndRightLabel","leftLabel","upAndDownLabel","metaModifierLabel","overlay","handleLanguageClick","event","preventDefault","currentTarget","blur","rule","lang","onFilterChange","languages","handleTypeClick","types","type","handleSeverityClick","severity","severities","handleTagClick","tag","dataset","tags","render","this","sysTags","allTags","href","onClick","langName","query","length","map","key","title","FiltersHeader","displayReset","onReset","id","api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","mounted","property","state","standards","owaspTop10","sansTop25","cwe","sonarsourceSecurity","loadStandards","then","setState","getValues","item","handleHeaderClick","onToggle","handleOwaspTop10HeaderClick","handleSansTop25HeaderClick","handleSonarSourceSecurityHeaderClick","handleClear","onChange","handleItemClick","prop","itemValue","multiple","items","newValue","includes","handleOwaspTop10ItemClick","OWASP_TOP10","handleSansTop25ItemClick","SANS_TOP25","handleSonarSourceSecurityItemClick","SONARSOURCE","handleCWESearch","Promise","resolve","results","Object","keys","filter","toLowerCase","loadCWESearchResultCount","categories","loadSearchResultCount","renderList","statsProp","valuesProp","renderName","stats","values","renderFacetItemsList","renderTooltip","getStat","category","undefined","active","name","stat","tooltip","value","renderHint","componentDidMount","open","componentDidUpdate","prevProps","componentWillUnmount","renderOwaspTop10List","renderOwaspTop10Hint","renderSansTop25List","renderSansTop25Hint","renderSonarSourceSecurityList","renderSonarSourceSecurityHint","renderSubFacets","fetching","fetchingSonarSourceSecurity","sonarsourceSecurityOpen","fetchingOwaspTop10","owaspTop10Open","fetchingSansTop25","sansTop25Open","facetHeader","fetchingCwe","getFacetItemText","getSearchResultKey","getSearchResultText","onSearch","cweOpen","CWE","renderFacetItem","renderSearchResult","searchPlaceholder","cweStats","onClear","PageCounter","current","label","total","TypeHelper","RemoveExtendedDescriptionModal","onCancel","onSubmit","header","onClose","onCloseClick","onFormSubmit","submitting","disabled","description","descriptionForm","removeDescriptionModal","handleDescriptionChange","handleCancelClick","handleSaveClick","updateDescription","handleRemoveDescriptionClick","handleCancelRemoving","handleConfirmRemoving","text","ruleDetails","markdown_note","handleExtendDescriptionClick","mdNote","renderDescription","htmlNote","dangerouslySetInnerHTML","__html","sanitize","canWrite","renderForm","colSpan","autoFocus","rows","FormattingTips","hasDescription","isExternal","htmlDesc","templateKey","searchResult","q","ps","Math","min","onSelect","setTags","onUnselect","availableTags","TagsSelector","listSize","selectedTags","renderType","renderSeverity","SeverityHelper","renderStatus","status","renderTags","closeOnClick","closeOnClickOutside","onTagsChange","overlayPlacement","BottomLeft","TagsList","allowUpdate","renderCreationDate","date","renderRepository","referencedRepositories","repository","repo","renderTemplate","isTemplate","renderParentTemplate","to","renderRemediation","debtRemFnType","debtRemFnOffset","debtRemFnCoeff","effortToFixDescription","renderExternalBadge","engine","replace","RegExp","renderKey","displayedKey","startsWith","substr","hasTypeData","hideSimilarRulesFilter","SimilarRulesFilter","getParams","activation","params","param","defaultValue","getQualityProfilesWithDepth","profiles","profile","isBuiltIn","actions","edit","language","depth","handleFormSubmit","data","onDone","handleParameterChange","handleProfileChange","handleSeverityChange","renderSeverityOption","profilesWithDepth","isCustomRule","activeInAllProfiles","isUpdateMode","contentLabel","modalHeader","onRequestClose","size","variant","clearable","repeat","optionRenderer","searchable","valueRenderer","placeholder","handleProfileSelect","selectedProfiles","option","getAvailableQualityProfiles","referencedProfiles","processResponse","response","failed","succeeded","sendRequests","looper","method","action","targetKey","finished","renderResult","result","profileKey","Alert","renderProfileSelect","languageName","multi","availableProfiles","htmlFor","modal","getSelectedProfile","closeModal","handleActivateClick","handleActivateInProfileClick","handleDeactivateClick","handleDeactivateInProfileClick","some","Boolean","canChangeProfile","allowActivateOnProfile","allowDeactivateOnProfile","singleSelection","renderItem","defaultRenderName","renderTextName","FacetItem","halfWidth","FacetBox","FacetHeader","disabledHelper","children","FacetItemsList","renderFooter","availableSince","handlePeriodChange","intl","formatDate","DateInput","getLanguageName","languageKey","installedLanguages","find","l","handleSearch","getAllPossibleOptions","paging","pageIndex","pageSize","term","ListStyleFacet","minSearchLength","selected","compareToProfile","activationSeverities","inheritance","handleActiveClick","stopPropagation","handleInactiveClick","getTextValue","getTooltip","base","renderActivation","isCompare","role","tabIndex","DocumentationTooltip","links","repositoryKey","facetProps","referencedLanguages","handleSelect","getTagName","renderTag","fill","gray60","handleChange","changes","template","Array","isArray","String","FacetsList","languageDisabled","hideProfileFacet","inheritanceDisabled","selectedProfile","isInherited","activationSeverityDisabled","onFacetToggle","openFacets","facets","repositories","statuses","StandardFacet","owaspTop10Stats","sansTop25Stats","sonarsourceSecurityStats","PageActions","loading","onReload","selectedIndex","prepareRequest","customRule","templateRule","csv","join","ruleData","markdown_description","custom_key","prevent_reactivation","reactivating","template_key","newRuleDetails","handleNameChange","keyModifiedByUser","handleKeyChange","handleTypeChange","handleStatusChange","renderNameField","required","renderKeyField","renderDescriptionField","renderTypeOption","renderTypeField","renderSeverityField","renderStatusField","renderParameterField","mdDesc","submit","handleClick","handleModalClose","handleDone","fetchRules","f","rules","handleRuleCreate","handleRuleDelete","ruleKey","renderRule","canChange","confirmButtonText","confirmData","isDestructive","modalBody","onConfirm","fetchIssues","resolved","facet","components","projects","project","component","count","renderTotal","path","totalItem","appState","branchesEnabled","renderProject","withAppState","renderParameter","handleButtonClick","handleCloseModal","buttonText","ActivationFormModal","RuleInheritanceIcon","other","red","baseFontColor","height","version","viewBox","width","xmlSpace","xmlnsXlink","d","style","fillRule","handleActivate","handleDeactivate","onDeactivate","handleRevert","reset","onActivate","renderInheritedProfile","parentName","profilePath","inherit","parentActivation","originalParam","p","originalValue","renderParameters","renderActions","canEdit","hasParent","parentKey","activations","qProfile","x","BuiltInQualityProfileBadge","canActivate","InstanceMessage","message","fetchRuleDetails","actives","handleRuleChange","handleTagsChange","oldTags","catch","handleDelete","onDelete","allowCustomRules","hideQualityProfiles","isCustom","isEditable","RuleDetailsMeta","RuleDetailsDescription","handleNameClick","isLeftClickEvent","button","metaKey","altKey","ctrlKey","shiftKey","onOpen","isLoggedIn","canCopy","copy","attachShortcuts","selectPreviousRule","selectNextRule","openSelectedRule","handleBack","detachShortcuts","getOpenRule","location","getFacetsToFetch","getFieldsToFetch","fields","getSearchParameters","s","stopLoading","fetchInitialData","all","fetchFirstRules","makeFetchRequest","rawActives","rawFacets","entries","parseActives","rawFacet","rawValue","val","parseFacets","openRule","usingPermalink","fetchMoreRules","nextPage","fetchFacet","getSelectedIndex","index","findIndex","getRulePath","pathname","router","closeRule","scrollToSelectedRule","smooth","element","document","querySelector","topOffset","bottomOffset","getRuleActivation","closeFacet","handleRuleOpen","handleReset","handleFilterChange","handleFacetToggle","willOpenProperty","newState","handleReload","pickRuleAround","handleRuleActivate","handleRuleDeactivate","newRule","searchQuery","isFiltered","renderBulkButton","currentUser","componentWillReceiveProps","nextProps","prevState","Suggestions","suggestions","defer","ScreenPositionHelper","top","A11ySkipTarget","anchor","weight","maxLength","minLength","loadMore","ready","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","searchQualityProfiles","parameters","getQualityProfile","compareToSonarWay","createQualityProfile","restoreQualityProfile","getProfileProjects","getProfileInheritance","qualityProfile","setDefaultProfile","renameProfile","copyProfile","fromKey","toName","deleteProfile","changeProfileParent","parentProfile","parentQualityProfile","getQualityProfileBackupUrl","encodeURIComponent","getQualityProfileExporterUrl","exporterKey","getImporters","r","getExporters","getProfileChangelog","since","page","compareProfiles","leftKey","rightKey","associateProject","dissociateProject","searchUsers","searchGroups","addUser","removeUser","addGroup","removeGroup","bulkActivateRules","bulkDeactivateRules","activateRule","deactivateRule","sanitizeStringRestricted","html","ALLOWED_TAGS","ALLOWED_ATTR","sanitizeString","USE_PROFILES","getPosition","containerPos","container","getBoundingClientRect","window","pageYOffset","left","pageXOffset","debouncedOnResize","forceUpdate","addEventListener","removeEventListener","ref","renderHelper","helper","renderValueIndicator","showClearButton","renderValue","defaultProps","MultiSelectOption","custom","onHover","renderLabel","onFocus","onMouseOver","checked","onCheck","onSelectChange","handleSelectChange","onSelectItem","onUnselectItem","handleSearchChange","onSearchQuery","validateSearchInput","handleElementHover","activeIdx","getAllElements","indexOf","handleKeyboard","evt","keyCode","selectNextElement","selectPreviousElement","toggleSelect","isNewElement","elem","selectedElements","elements","updateSelectedElements","filterSelected","updateUnselectedElements","unselectedElements","slice","setElementActive","idx","allElements","totalElements","searchInput","focus","allowSelection","allowNewElements","footerNode","activeElement","showNewElement","infiniteList","listClasses","div","inPlace","rel","target","handleShowMoreClick","showMore","handleShowLessClick","showLess","hasMore","allShown","searching","searchResultsCounts","showFullList","onItemClick","stopSearching","search","loadCountsForSearchResults","maxResults","searchMaxResults","searchResults","searchPaging","searchMore","resultsToLoad","hideFullList","maxInitialItems","sortedItems","getSortedItems","limitedList","selectedBelowLimit","mightHaveMoreResults","maxItems","formatFacetStat","renderSearch","renderSearchResults","loadingResults","showList","MultipleSelectionHint","validateTag","DayPicker","input","openCalendar","handleResetClick","closeCalendar","currentMonth","Date","lastHovered","handleDayClick","day","modifiers","handleDayMouseEnter","handleCurrentMonthChange","handleCurrentYearChange","handlePreviousMonthClick","handleNextMonthClick","highlightFrom","highlightTo","minDate","after","maxDate","months","years","getFullYear","selectedDays","lastHoveredOrValue","highlighted","from","weekdaysLong","weekdaysShort","onClickOutside","InputWrapper","inputClassName","innerRef","node","readOnly","iconProps","month","getMonth","year","captionElement","NullComponent","disabledDays","before","firstDayOfWeek","navbarElement","onDayClick","onDayMouseEnter","formattedValue","navigator","userAgent","badge","getStandards","renderCWECategory","record","renderOwaspTop10Category","withPrefix","addPrefix","toUpperCase","renderSansTop25Category","renderSonarSourceSecurityCategory","prefix"],"mappings":"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","file":"js/276.1655372229846.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\nexport interface PageShortcutsTooltipProps {\n  className?: string;\n  leftAndRightLabel?: string;\n  leftLabel?: string;\n  upAndDownLabel?: string;\n  metaModifierLabel?: string;\n}\n\nexport default function PageShortcutsTooltip(props: PageShortcutsTooltipProps) {\n  const { className, leftAndRightLabel, leftLabel, upAndDownLabel, metaModifierLabel } = props;\n  return (\n    <Tooltip\n      overlay={\n        <div className=\"small nowrap\">\n          <div>\n            {upAndDownLabel && (\n              <span>\n                <span className=\"shortcut-button little-spacer-right\">↑</span>\n                <span className=\"shortcut-button spacer-right\">↓</span>\n                {upAndDownLabel}\n              </span>\n            )}\n            {leftAndRightLabel && (\n              <span className={classNames({ 'big-spacer-left': upAndDownLabel })}>\n                <span className=\"shortcut-button little-spacer-right\">←</span>\n                <span className=\"shortcut-button spacer-right\">→</span>\n                {leftAndRightLabel}\n              </span>\n            )}\n            {leftLabel && (\n              <span className={classNames({ 'big-spacer-left': upAndDownLabel })}>\n                <span className=\"shortcut-button spacer-right\">←</span>\n                {leftLabel}\n              </span>\n            )}\n          </div>\n          {metaModifierLabel && (\n            <div className=\"big-spacer-top big-padded-top bordered-top\">\n              <span className=\"shortcut-button little-spacer-right\">alt</span>\n              <span className=\"little-spacer-right\">+</span>\n              <span className=\"shortcut-button little-spacer-right\">↑</span>\n              <span className=\"shortcut-button spacer-right\">↓</span>\n              <span className=\"shortcut-button little-spacer-right\">←</span>\n              <span className=\"shortcut-button spacer-right\">→</span>\n              {metaModifierLabel}\n            </div>\n          )}\n        </div>\n      }>\n      <div\n        aria-label={`\n        ${translate('shortcuts.on_page.intro')}\n        ${\n          upAndDownLabel\n            ? translateWithParameters('shortcuts.on_page.up_down_x', upAndDownLabel)\n            : ''\n        }\n        ${\n          leftAndRightLabel\n            ? translateWithParameters('shortcuts.on_page.left_right_x', leftAndRightLabel)\n            : ''\n        }\n        ${leftLabel ? translateWithParameters('shortcuts.on_page.left_x', leftLabel) : ''}\n        ${\n          metaModifierLabel\n            ? translateWithParameters('shortcuts.on_page.meta_x', metaModifierLabel)\n            : ''\n        }\n      `}\n        className={classNames(\n          className,\n          'page-shortcuts-tooltip note text-center display-inline-block'\n        )}>\n        <div>\n          <span className=\"shortcut-button shortcut-button-tiny\">↑</span>\n        </div>\n        <div>\n          <span className=\"shortcut-button shortcut-button-tiny\">←</span>\n          <span className=\"shortcut-button shortcut-button-tiny\">↓</span>\n          <span className=\"shortcut-button shortcut-button-tiny\">→</span>\n        </div>\n      </div>\n    </Tooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport FilterIcon from 'sonar-ui-common/components/icons/FilterIcon';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { Query } from '../query';\n\ninterface Props {\n  onFilterChange: (changes: Partial<Query>) => void;\n  rule: T.Rule;\n}\n\nexport default class SimilarRulesFilter extends React.PureComponent<Props> {\n  handleLanguageClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.rule.lang) {\n      this.props.onFilterChange({ languages: [this.props.rule.lang] });\n    }\n  };\n\n  handleTypeClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onFilterChange({ types: [this.props.rule.type] });\n  };\n\n  handleSeverityClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.rule.severity) {\n      this.props.onFilterChange({ severities: [this.props.rule.severity] });\n    }\n  };\n\n  handleTagClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { tag } = event.currentTarget.dataset;\n    if (tag) {\n      this.props.onFilterChange({ tags: [tag] });\n    }\n  };\n\n  render() {\n    const { rule } = this.props;\n    const { tags = [], sysTags = [], severity } = rule;\n    const allTags = [...tags, ...sysTags];\n\n    return (\n      <Dropdown\n        className=\"display-inline-block\"\n        overlay={\n          <>\n            <ul className=\"menu\">\n              <li className=\"menu-header\">{translate('coding_rules.filter_similar_rules')}</li>\n              <li>\n                <a\n                  data-test=\"coding-rules__similar-language\"\n                  href=\"#\"\n                  onClick={this.handleLanguageClick}>\n                  {rule.langName}\n                </a>\n              </li>\n\n              <li>\n                <a\n                  className=\"display-flex-center\"\n                  data-test=\"coding-rules__similar-type\"\n                  href=\"#\"\n                  onClick={this.handleTypeClick}>\n                  <IssueTypeIcon query={rule.type} />\n                  <span className=\"little-spacer-left\">{translate('issue.type', rule.type)}</span>\n                </a>\n              </li>\n\n              {severity && (\n                <li>\n                  <a\n                    data-test=\"coding-rules__similar-severity\"\n                    href=\"#\"\n                    onClick={this.handleSeverityClick}>\n                    <SeverityHelper className=\"display-flex-center\" severity={rule.severity} />\n                  </a>\n                </li>\n              )}\n\n              {allTags.length > 0 && <li className=\"divider\" />}\n              {allTags.map(tag => (\n                <li key={tag}>\n                  <a\n                    data-tag={tag}\n                    data-test=\"coding-rules__similar-tag\"\n                    href=\"#\"\n                    onClick={this.handleTagClick}>\n                    <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                    <span className=\"text-middle\">{tag}</span>\n                  </a>\n                </li>\n              ))}\n            </ul>\n          </>\n        }>\n        <a\n          className=\"js-rule-filter link-no-underline spacer-left dropdown-toggle\"\n          href=\"#\"\n          title={translate('coding_rules.filter_similar_rules')}>\n          <FilterIcon className=\"icon-half-transparent\" />\n          <DropdownIcon className=\"icon-half-transparent\" />\n        </a>\n      </Dropdown>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  displayReset: boolean;\n  onReset: () => void;\n}\n\nexport default function FiltersHeader({ displayReset, onReset }: Props) {\n  return (\n    <div className=\"search-navigator-filters-header\">\n      {displayReset && (\n        <div className=\"pull-right\">\n          <Button className=\"button-red\" id=\"coding-rules-clear-all-filters\" onClick={onReset}>\n            {translate('clear_all_filters')}\n          </Button>\n        </div>\n      )}\n\n      <h2 className=\"h3\">{translate('filters')}</h2>\n    </div>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".coding-rules-extended-view .coding-rules-list{display:none}.coding-rules-extended-view .coding-rules-details{display:block}.coding-rules-detail-title{position:relative;display:inline-block;margin:16px 0;font-size:16px;font-weight:400}.coding-rules-detail-quality-profile-parameter{display:block;height:100%;padding-top:0;padding-right:10px}.coding-rules-detail-quality-profile-parameter .key,.coding-rules-detail-quality-profile-parameter .sep,.coding-rules-detail-quality-profile-parameter .value{display:inline;vertical-align:top}.coding-rules-detail-quality-profile-parameter .value{display:inline-block;vertical-align:top;line-height:23px;max-width:300px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Consolas,Ubuntu Mono,Liberation Mono,Menlo,Courier,monospace}.coding-rules-detail-quality-profile-parameter+.coding-rules-detail-quality-profile-parameter{margin-top:0}.coding-rules-detail-properties{display:flex;flex-wrap:wrap;align-items:center;margin-top:8px}.coding-rules-detail-properties+.coding-rules-detail-properties{margin-top:-10px}.coding-rules-detail-property{display:flex;align-items:center;margin-right:16px;margin-bottom:8px;font-size:12px}.coding-rules-detail-tag+.coding-rules-detail-tag{margin-left:10px}.coding-rules-detail-tags-change{cursor:pointer}.coding-rules-detail-tags-change:hover span{text-decoration:underline}.coding-rules-detail-tag-edit{line-height:1}.coding-rules-details-tag-edit-cancel{vertical-align:middle}.coding-rules-detail-description{margin:20px 0}.coding-rules-detail-description-extra{margin-top:-10px}.coding-rules-detail-extend-description-form{margin:10px 0}.coding-rules-detail-parameters{width:100%;margin:10px 0 20px}.coding-rules-detail-parameter-name{width:1px;vertical-align:top;padding:5px 10px 5px 0;font-weight:700}.coding-rules-detail-parameter-description{vertical-align:top;padding:5px}.coding-rules-detail-parameter-value{font-family:Consolas,Ubuntu Mono,Liberation Mono,Menlo,Courier,monospace;word-break:break-all}.coding-rules-detail-list,.coding-rules-detail-quality-profiles{width:100%;line-height:22px}.coding-rules-detail-list td,.coding-rules-detail-quality-profiles td{border-top:1px solid #e6e6e6}.coding-rules-detail-list tr:first-child td,.coding-rules-detail-quality-profiles tr:first-child td{border-top:none}.coding-rules-detail-list-name,.coding-rules-detail-quality-profile-name{vertical-align:top;width:1px;padding:8px 5px 8px 0;font-weight:600;white-space:nowrap}.coding-rules-detail-list-severity,.coding-rules-detail-quality-profile-severity{vertical-align:top;width:1px;padding:8px 5px;white-space:nowrap}.coding-rules-detail-quality-profile-severity i{margin-top:2px}.coding-rules-detail-list-parameters,.coding-rules-detail-quality-profile-parameters{vertical-align:top;padding:8px 5px}.coding-rules-detail-list-actions,.coding-rules-detail-quality-profile-actions{vertical-align:top;width:1px;padding:8px 0 8px 5px;text-align:right;white-space:nowrap}.coding-rules-detail-quality-profile-inheritance{font-size:12px;font-weight:400}.coding-rules-detail-quality-profiles-activation{margin-top:-3px;margin-left:10px}.coding-rules-most-violated-projects td{border-top-color:transparent}.coding-rules-most-violated-projects tr:first-child+tr td{border-top-color:#e6e6e6}.coding-rules-most-violated-projects .coding-rules-detail-list-name{font-weight:400}.coding-rule{padding:8px 10px 8px 8px;border:1px solid transparent;background-color:#fff}.coding-rule.selected{border-color:#4b9fd5!important}.coding-rule+.coding-rule{border-top-color:#e6e6e6}.coding-rule.selected+.coding-rule{border-top-color:transparent}.coding-rule-table{width:100%}.coding-rule-table td{vertical-align:top}.coding-rule-table+.coding-rule-table{margin-top:5px}.coding-rule-table-meta-cell{width:1px;white-space:nowrap}@media (max-width:1320px){.coding-rule-table .tags-list span{max-width:100px}}.coding-rule-title{line-height:20px;font-size:13px}.coding-rule-meta{padding:2px 2px 2px 30px;font-size:12px}.coding-rule-activation{width:40px;line-height:19.5px}.coding-rule-activation-actions{padding-left:20px}.coding-rule-section-separator{height:0;margin:10px 0;border-top:1px solid #e6e6e6}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omit, sortBy, without } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { highlightTerm } from 'sonar-ui-common/helpers/search';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport MultipleSelectionHint from '../../../components/facet/MultipleSelectionHint';\nimport {\n  getStandards,\n  renderCWECategory,\n  renderOwaspTop10Category,\n  renderSansTop25Category,\n  renderSonarSourceSecurityCategory\n} from '../../../helpers/security-standard';\nimport { Facet } from '../../../types/issues';\nimport { SecurityStandard, Standards, StandardType } from '../../../types/security';\nimport { formatFacetStat, Query, STANDARDS } from '../utils';\n\ninterface Props {\n  cwe: string[];\n  cweOpen: boolean;\n  cweStats: T.Dict<number> | undefined;\n  fetchingCwe: boolean;\n  fetchingOwaspTop10: boolean;\n  fetchingSansTop25: boolean;\n  fetchingSonarSourceSecurity: boolean;\n  loadSearchResultCount?: (property: string, changes: Partial<Query>) => Promise<Facet>;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  owaspTop10: string[];\n  owaspTop10Open: boolean;\n  owaspTop10Stats: T.Dict<number> | undefined;\n  query: Partial<Query>;\n  sansTop25: string[];\n  sansTop25Open: boolean;\n  sansTop25Stats: T.Dict<number> | undefined;\n  sonarsourceSecurity: string[];\n  sonarsourceSecurityOpen: boolean;\n  sonarsourceSecurityStats: T.Dict<number> | undefined;\n}\n\ninterface State {\n  standards: Standards;\n}\n\ntype StatsProp = 'owaspTop10Stats' | 'cweStats' | 'sansTop25Stats' | 'sonarsourceSecurityStats';\ntype ValuesProp = StandardType;\n\nexport default class StandardFacet extends React.PureComponent<Props, State> {\n  mounted = false;\n  property = STANDARDS;\n  state: State = {\n    standards: { owaspTop10: {}, sansTop25: {}, cwe: {}, sonarsourceSecurity: {} }\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n\n    // load standards.json only if the facet is open, or there is a selected value\n    if (\n      this.props.open ||\n      this.props.owaspTop10.length > 0 ||\n      this.props.cwe.length > 0 ||\n      this.props.sansTop25.length > 0 ||\n      this.props.sonarsourceSecurity.length > 0\n    ) {\n      this.loadStandards();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.open && this.props.open) {\n      this.loadStandards();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadStandards = () => {\n    getStandards().then(\n      ({ owaspTop10, sansTop25, cwe, sonarsourceSecurity }: Standards) => {\n        if (this.mounted) {\n          this.setState({ standards: { owaspTop10, sansTop25, cwe, sonarsourceSecurity } });\n        }\n      },\n      () => {}\n    );\n  };\n\n  getValues = () => {\n    return [\n      ...this.props.sonarsourceSecurity.map(item =>\n        renderSonarSourceSecurityCategory(this.state.standards, item, true)\n      ),\n      ...this.props.owaspTop10.map(item =>\n        renderOwaspTop10Category(this.state.standards, item, true)\n      ),\n      ...this.props.sansTop25.map(item =>\n        renderSansTop25Category(this.state.standards, item, true)\n      ),\n      ...this.props.cwe.map(item => renderCWECategory(this.state.standards, item))\n    ];\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleOwaspTop10HeaderClick = () => {\n    this.props.onToggle('owaspTop10');\n  };\n\n  handleSansTop25HeaderClick = () => {\n    this.props.onToggle('sansTop25');\n  };\n\n  handleSonarSourceSecurityHeaderClick = () => {\n    this.props.onToggle('sonarsourceSecurity');\n  };\n\n  handleClear = () => {\n    this.props.onChange({\n      [this.property]: [],\n      owaspTop10: [],\n      sansTop25: [],\n      cwe: [],\n      sonarsourceSecurity: []\n    });\n  };\n\n  handleItemClick = (prop: ValuesProp, itemValue: string, multiple: boolean) => {\n    const items = this.props[prop];\n    if (multiple) {\n      const newValue = sortBy(\n        items.includes(itemValue) ? without(items, itemValue) : [...items, itemValue]\n      );\n      this.props.onChange({ [prop]: newValue });\n    } else {\n      this.props.onChange({\n        [prop]: items.includes(itemValue) && items.length < 2 ? [] : [itemValue]\n      });\n    }\n  };\n\n  handleOwaspTop10ItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick(SecurityStandard.OWASP_TOP10, itemValue, multiple);\n  };\n\n  handleSansTop25ItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick(SecurityStandard.SANS_TOP25, itemValue, multiple);\n  };\n\n  handleSonarSourceSecurityItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick(SecurityStandard.SONARSOURCE, itemValue, multiple);\n  };\n\n  handleCWESearch = (query: string) => {\n    return Promise.resolve({\n      results: Object.keys(this.state.standards.cwe).filter(cwe =>\n        renderCWECategory(this.state.standards, cwe)\n          .toLowerCase()\n          .includes(query.toLowerCase())\n      )\n    });\n  };\n\n  loadCWESearchResultCount = (categories: string[]) => {\n    const { loadSearchResultCount } = this.props;\n    return loadSearchResultCount\n      ? loadSearchResultCount('cwe', { cwe: categories })\n      : Promise.resolve({});\n  };\n\n  renderList = (\n    statsProp: StatsProp,\n    valuesProp: ValuesProp,\n    renderName: (standards: Standards, category: string) => string,\n    onClick: (x: string, multiple?: boolean) => void\n  ) => {\n    const stats = this.props[statsProp];\n    const values = this.props[valuesProp];\n    if (!stats) {\n      return null;\n    }\n    const categories = sortBy(Object.keys(stats), key => -stats[key]);\n    return this.renderFacetItemsList(stats, values, categories, renderName, renderName, onClick);\n  };\n\n  // eslint-disable-next-line max-params\n  renderFacetItemsList = (\n    stats: any,\n    values: string[],\n    categories: string[],\n    renderName: (standards: Standards, category: string) => React.ReactNode,\n    renderTooltip: (standards: Standards, category: string) => string,\n    onClick: (x: string, multiple?: boolean) => void\n  ) => {\n    if (!categories.length) {\n      return (\n        <div className=\"search-navigator-facet-empty little-spacer-top\">\n          {translate('no_results')}\n        </div>\n      );\n    }\n\n    const getStat = (category: string) => {\n      return stats ? stats[category] : undefined;\n    };\n\n    return (\n      <FacetItemsList>\n        {categories.map(category => (\n          <FacetItem\n            active={values.includes(category)}\n            key={category}\n            name={renderName(this.state.standards, category)}\n            onClick={onClick}\n            stat={formatFacetStat(getStat(category))}\n            tooltip={renderTooltip(this.state.standards, category)}\n            value={category}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  };\n\n  renderHint = (statsProp: StatsProp, valuesProp: ValuesProp) => {\n    const stats = this.props[statsProp] || {};\n    const values = this.props[valuesProp];\n    return <MultipleSelectionHint options={Object.keys(stats).length} values={values.length} />;\n  };\n\n  renderOwaspTop10List() {\n    return this.renderList(\n      'owaspTop10Stats',\n      SecurityStandard.OWASP_TOP10,\n      renderOwaspTop10Category,\n      this.handleOwaspTop10ItemClick\n    );\n  }\n\n  renderOwaspTop10Hint() {\n    return this.renderHint('owaspTop10Stats', SecurityStandard.OWASP_TOP10);\n  }\n\n  renderSansTop25List() {\n    return this.renderList(\n      'sansTop25Stats',\n      SecurityStandard.SANS_TOP25,\n      renderSansTop25Category,\n      this.handleSansTop25ItemClick\n    );\n  }\n\n  renderSansTop25Hint() {\n    return this.renderHint('sansTop25Stats', SecurityStandard.SANS_TOP25);\n  }\n\n  renderSonarSourceSecurityList() {\n    return this.renderList(\n      'sonarsourceSecurityStats',\n      SecurityStandard.SONARSOURCE,\n      renderSonarSourceSecurityCategory,\n      this.handleSonarSourceSecurityItemClick\n    );\n  }\n\n  renderSonarSourceSecurityHint() {\n    return this.renderHint('sonarsourceSecurityStats', SecurityStandard.SONARSOURCE);\n  }\n\n  renderSubFacets() {\n    return (\n      <>\n        <FacetBox className=\"is-inner\" property={SecurityStandard.SONARSOURCE}>\n          <FacetHeader\n            fetching={this.props.fetchingSonarSourceSecurity}\n            name={translate('issues.facet.sonarsourceSecurity')}\n            onClick={this.handleSonarSourceSecurityHeaderClick}\n            open={this.props.sonarsourceSecurityOpen}\n            values={this.props.sonarsourceSecurity.map(item =>\n              renderSonarSourceSecurityCategory(this.state.standards, item)\n            )}\n          />\n          {this.props.sonarsourceSecurityOpen && (\n            <>\n              {this.renderSonarSourceSecurityList()}\n              {this.renderSonarSourceSecurityHint()}\n            </>\n          )}\n        </FacetBox>\n        <FacetBox className=\"is-inner\" property={SecurityStandard.OWASP_TOP10}>\n          <FacetHeader\n            fetching={this.props.fetchingOwaspTop10}\n            name={translate('issues.facet.owaspTop10')}\n            onClick={this.handleOwaspTop10HeaderClick}\n            open={this.props.owaspTop10Open}\n            values={this.props.owaspTop10.map(item =>\n              renderOwaspTop10Category(this.state.standards, item)\n            )}\n          />\n          {this.props.owaspTop10Open && (\n            <>\n              {this.renderOwaspTop10List()}\n              {this.renderOwaspTop10Hint()}\n            </>\n          )}\n        </FacetBox>\n        <FacetBox className=\"is-inner\" property={SecurityStandard.SANS_TOP25}>\n          <FacetHeader\n            fetching={this.props.fetchingSansTop25}\n            name={translate('issues.facet.sansTop25')}\n            onClick={this.handleSansTop25HeaderClick}\n            open={this.props.sansTop25Open}\n            values={this.props.sansTop25.map(item =>\n              renderSansTop25Category(this.state.standards, item)\n            )}\n          />\n          {this.props.sansTop25Open && (\n            <>\n              {this.renderSansTop25List()}\n              {this.renderSansTop25Hint()}\n            </>\n          )}\n        </FacetBox>\n        <ListStyleFacet<string>\n          className=\"is-inner\"\n          facetHeader={translate('issues.facet.cwe')}\n          fetching={this.props.fetchingCwe}\n          getFacetItemText={item => renderCWECategory(this.state.standards, item)}\n          getSearchResultKey={item => item}\n          getSearchResultText={item => renderCWECategory(this.state.standards, item)}\n          loadSearchResultCount={this.loadCWESearchResultCount}\n          onChange={this.props.onChange}\n          onSearch={this.handleCWESearch}\n          onToggle={this.props.onToggle}\n          open={this.props.cweOpen}\n          property={SecurityStandard.CWE}\n          query={omit(this.props.query, 'cwe')}\n          renderFacetItem={item => renderCWECategory(this.state.standards, item)}\n          renderSearchResult={(item, query) =>\n            highlightTerm(renderCWECategory(this.state.standards, item), query)\n          }\n          searchPlaceholder={translate('search.search_for_cwe')}\n          stats={this.props.cweStats}\n          values={this.props.cwe}\n        />\n      </>\n    );\n  }\n\n  render() {\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && this.renderSubFacets()}\n      </FacetBox>\n    );\n  }\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./MultipleSelectionHint.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".multiple-selection-hint{margin-top:8px;margin-bottom:8px;text-align:center}.multiple-selection-hint-inner{display:inline-block;height:24px;line-height:24px;border-radius:24px;background-color:#e6e6e6;text-align:center;padding:0 8px;font-size:12px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\nexport interface PageCounterProps {\n  className?: string;\n  current?: number;\n  label: string;\n  total: number;\n}\n\nexport default function PageCounter({ className, current, label, total }: PageCounterProps) {\n  return (\n    <div className={classNames('display-inline-block', className)}>\n      <strong className=\"little-spacer-right\">\n        {current !== undefined && formatMeasure(current + 1, 'INT') + ' / '}\n        <span className=\"it__page-counter-total\">{formatMeasure(total, 'INT')}</span>\n      </strong>\n      {label}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  type: T.IssueType | T.RuleType;\n}\n\nexport default function TypeHelper(props: Props) {\n  return (\n    <span className={props.className}>\n      <IssueTypeIcon className=\"little-spacer-right\" query={props.type} />\n      {translate('issue.type', props.type)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onCancel: () => void;\n  onSubmit: () => void;\n}\n\nexport default function RemoveExtendedDescriptionModal({ onCancel, onSubmit }: Props) {\n  const header = translate('coding_rules.remove_extended_description');\n  return (\n    <SimpleModal header={header} onClose={onCancel} onSubmit={onSubmit}>\n      {({ onCloseClick, onFormSubmit, submitting }) => (\n        <form onSubmit={onFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {translate('coding_rules.remove_extended_description.confirm')}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton className=\"button-red\" disabled={submitting}>\n              {translate('remove')}\n            </SubmitButton>\n            <ResetButtonLink onClick={onCloseClick}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      )}\n    </SimpleModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { updateRule } from '../../../api/rules';\nimport FormattingTips from '../../../components/common/FormattingTips';\nimport { sanitizeString } from '../../../helpers/sanitize';\nimport RemoveExtendedDescriptionModal from './RemoveExtendedDescriptionModal';\n\ninterface Props {\n  canWrite: boolean | undefined;\n  onChange: (newRuleDetails: T.RuleDetails) => void;\n  ruleDetails: T.RuleDetails;\n}\n\ninterface State {\n  description: string;\n  descriptionForm: boolean;\n  removeDescriptionModal: boolean;\n  submitting: boolean;\n}\n\nexport default class RuleDetailsDescription extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    description: '',\n    descriptionForm: false,\n    submitting: false,\n    removeDescriptionModal: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDescriptionChange = (event: React.SyntheticEvent<HTMLTextAreaElement>) =>\n    this.setState({ description: event.currentTarget.value });\n\n  handleCancelClick = () => {\n    this.setState({ descriptionForm: false });\n  };\n\n  handleSaveClick = () => {\n    this.updateDescription(this.state.description);\n  };\n\n  handleRemoveDescriptionClick = () => {\n    this.setState({ removeDescriptionModal: true });\n  };\n\n  handleCancelRemoving = () => this.setState({ removeDescriptionModal: false });\n\n  handleConfirmRemoving = () => {\n    this.setState({ removeDescriptionModal: false });\n    this.updateDescription('');\n  };\n\n  updateDescription = (text: string) => {\n    this.setState({ submitting: true });\n\n    updateRule({\n      key: this.props.ruleDetails.key,\n      markdown_note: text\n    }).then(\n      ruleDetails => {\n        this.props.onChange(ruleDetails);\n        if (this.mounted) {\n          this.setState({ submitting: false, descriptionForm: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  handleExtendDescriptionClick = () => {\n    this.setState({\n      // set description` to the current `mdNote` each time the form is open\n      description: this.props.ruleDetails.mdNote || '',\n      descriptionForm: true\n    });\n  };\n\n  renderDescription = () => (\n    <div id=\"coding-rules-detail-description-extra\">\n      {this.props.ruleDetails.htmlNote !== undefined && (\n        <div\n          className=\"rule-desc spacer-bottom markdown\"\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: sanitizeString(this.props.ruleDetails.htmlNote) }}\n        />\n      )}\n      {this.props.canWrite && (\n        <Button\n          id=\"coding-rules-detail-extend-description\"\n          onClick={this.handleExtendDescriptionClick}>\n          {translate('coding_rules.extend_description')}\n        </Button>\n      )}\n    </div>\n  );\n\n  renderForm = () => (\n    <div className=\"coding-rules-detail-extend-description-form\">\n      <table className=\"width-100\">\n        <tbody>\n          <tr>\n            <td colSpan={2}>\n              <textarea\n                autoFocus={true}\n                className=\"width-100 little-spacer-bottom\"\n                id=\"coding-rules-detail-extend-description-text\"\n                onChange={this.handleDescriptionChange}\n                rows={4}\n                value={this.state.description}\n              />\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <Button\n                disabled={this.state.submitting}\n                id=\"coding-rules-detail-extend-description-submit\"\n                onClick={this.handleSaveClick}>\n                {translate('save')}\n              </Button>\n              {this.props.ruleDetails.mdNote !== undefined && (\n                <>\n                  <Button\n                    className=\"button-red spacer-left\"\n                    disabled={this.state.submitting}\n                    id=\"coding-rules-detail-extend-description-remove\"\n                    onClick={this.handleRemoveDescriptionClick}>\n                    {translate('remove')}\n                  </Button>\n                  {this.state.removeDescriptionModal && (\n                    <RemoveExtendedDescriptionModal\n                      onCancel={this.handleCancelRemoving}\n                      onSubmit={this.handleConfirmRemoving}\n                    />\n                  )}\n                </>\n              )}\n              <ResetButtonLink\n                className=\"spacer-left\"\n                disabled={this.state.submitting}\n                id=\"coding-rules-detail-extend-description-cancel\"\n                onClick={this.handleCancelClick}>\n                {translate('cancel')}\n              </ResetButtonLink>\n              {this.state.submitting && <i className=\"spinner spacer-left\" />}\n            </td>\n            <td className=\"text-right\">\n              <FormattingTips />\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n\n  render() {\n    const { ruleDetails } = this.props;\n    const hasDescription = !ruleDetails.isExternal || ruleDetails.type !== 'UNKNOWN';\n\n    return (\n      <div className=\"js-rule-description\">\n        {hasDescription && ruleDetails.htmlDesc !== undefined ? (\n          <div\n            className=\"coding-rules-detail-description rule-desc markdown\"\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{ __html: sanitizeString(ruleDetails.htmlDesc) }}\n          />\n        ) : (\n          <div className=\"coding-rules-detail-description rule-desc markdown\">\n            {translateWithParameters('issue.external_issue_description', ruleDetails.name)}\n          </div>\n        )}\n\n        {!ruleDetails.templateKey && (\n          <div className=\"coding-rules-detail-description coding-rules-detail-description-extra\">\n            {!this.state.descriptionForm && this.renderDescription()}\n            {this.state.descriptionForm && this.props.canWrite && this.renderForm()}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, uniq, without } from 'lodash';\nimport * as React from 'react';\nimport { getRuleTags } from '../../../api/rules';\nimport TagsSelector from '../../../components/tags/TagsSelector';\n\nexport interface Props {\n  setTags: (tags: string[]) => void;\n  sysTags: string[];\n  tags: string[];\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class RuleDetailsTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return getRuleTags({\n      q: query,\n      ps: Math.min(this.props.tags.length + LIST_SIZE, 100)\n    }).then(\n      tags => {\n        if (this.mounted) {\n          // systems tags can not be unset, don't display them in the results\n          this.setState({ searchResult: without(tags, ...this.props.sysTags) });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags(uniq([...this.props.tags, tag]));\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.tags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.tags);\n    return (\n      <TagsSelector\n        listSize={LIST_SIZE}\n        onSearch={this.onSearch}\n        onSelect={this.onSelect}\n        onUnselect={this.onUnselect}\n        selectedTags={this.props.tags}\n        tags={availableTags}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport DateFormatter from 'sonar-ui-common/components/intl/DateFormatter';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport TagsList from '../../../components/tags/TagsList';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport { Query } from '../query';\nimport RuleDetailsTagsPopup from './RuleDetailsTagsPopup';\nimport SimilarRulesFilter from './SimilarRulesFilter';\n\ninterface Props {\n  canWrite: boolean | undefined;\n  hideSimilarRulesFilter?: boolean;\n  onFilterChange: (changes: Partial<Query>) => void;\n  onTagsChange: (tags: string[]) => void;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  ruleDetails: T.RuleDetails;\n}\n\nconst EXTERNAL_RULE_REPO_PREFIX = 'external_';\n\nexport default class RuleDetailsMeta extends React.PureComponent<Props> {\n  renderType = () => {\n    const { ruleDetails } = this.props;\n    return (\n      <Tooltip overlay={translate('coding_rules.type.tooltip', ruleDetails.type)}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"type\">\n          <IssueTypeIcon className=\"little-spacer-right\" query={ruleDetails.type} />\n          {translate('issue.type', ruleDetails.type)}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderSeverity = () => (\n    <Tooltip overlay={translate('default_severity')}>\n      <li className=\"coding-rules-detail-property\" data-meta=\"severity\">\n        <SeverityHelper\n          className=\"display-inline-flex-center\"\n          severity={this.props.ruleDetails.severity}\n        />\n      </li>\n    </Tooltip>\n  );\n\n  renderStatus = () => {\n    const { ruleDetails } = this.props;\n    if (ruleDetails.status === 'READY') {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('status')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"status\">\n          <span className=\"badge badge-error\">{translate('rules.status', ruleDetails.status)}</span>\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderTags = () => {\n    const { canWrite, ruleDetails } = this.props;\n    const { sysTags = [], tags = [] } = ruleDetails;\n    const allTags = [...sysTags, ...tags];\n\n    return (\n      <li className=\"coding-rules-detail-property\" data-meta=\"tags\">\n        {this.props.canWrite ? (\n          <Dropdown\n            closeOnClick={false}\n            closeOnClickOutside={true}\n            overlay={\n              <RuleDetailsTagsPopup\n                setTags={this.props.onTagsChange}\n                sysTags={sysTags}\n                tags={tags}\n              />\n            }\n            overlayPlacement={PopupPlacement.BottomLeft}>\n            <ButtonLink>\n              <TagsList\n                allowUpdate={canWrite}\n                tags={allTags.length > 0 ? allTags : [translate('coding_rules.no_tags')]}\n              />\n            </ButtonLink>\n          </Dropdown>\n        ) : (\n          <TagsList\n            allowUpdate={canWrite}\n            className=\"display-flex-center\"\n            tags={allTags.length > 0 ? allTags : [translate('coding_rules.no_tags')]}\n          />\n        )}\n      </li>\n    );\n  };\n\n  renderCreationDate = () => (\n    <li className=\"coding-rules-detail-property\" data-meta=\"available-since\">\n      <span className=\"little-spacer-right\">{translate('coding_rules.available_since')}</span>\n      <DateFormatter date={this.props.ruleDetails.createdAt} />\n    </li>\n  );\n\n  renderRepository = () => {\n    const { referencedRepositories, ruleDetails } = this.props;\n    const repository = referencedRepositories[ruleDetails.repo];\n    if (!repository) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.repository_language')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"repository\">\n          {repository.name} ({ruleDetails.langName})\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderTemplate = () => {\n    if (!this.props.ruleDetails.isTemplate) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.rule_template.title')}>\n        <li className=\"coding-rules-detail-property\">{translate('coding_rules.rule_template')}</li>\n      </Tooltip>\n    );\n  };\n\n  renderParentTemplate = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.templateKey) {\n      return null;\n    }\n    return (\n      <li className=\"coding-rules-detail-property\">\n        {translate('coding_rules.custom_rule')}\n        {' ('}\n        <Link to={getRuleUrl(ruleDetails.templateKey)}>\n          {translate('coding_rules.show_template')}\n        </Link>\n        {')'}\n        <HelpTooltip\n          className=\"little-spacer-left\"\n          overlay={translate('coding_rules.custom_rule.help')}\n        />\n      </li>\n    );\n  };\n\n  renderRemediation = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.debtRemFnType) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.remediation_function')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"remediation-function\">\n          {translate('coding_rules.remediation_function', ruleDetails.debtRemFnType)}\n          {':'}\n          {ruleDetails.debtRemFnOffset !== undefined && ` ${ruleDetails.debtRemFnOffset}`}\n          {ruleDetails.debtRemFnCoeff !== undefined && ` +${ruleDetails.debtRemFnCoeff}`}\n          {ruleDetails.effortToFixDescription !== undefined &&\n            ` ${ruleDetails.effortToFixDescription}`}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderExternalBadge = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.repo) {\n      return null;\n    }\n    const engine = ruleDetails.repo.replace(new RegExp(`^${EXTERNAL_RULE_REPO_PREFIX}`), '');\n    if (!engine) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translateWithParameters('coding_rules.external_rule.engine', engine)}>\n        <li className=\"coding-rules-detail-property\">\n          <div className=\"badge spacer-left text-text-top\">{engine}</div>\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderKey() {\n    const EXTERNAL_PREFIX = 'external_';\n    const { ruleDetails } = this.props;\n    const displayedKey = ruleDetails.key.startsWith(EXTERNAL_PREFIX)\n      ? ruleDetails.key.substr(EXTERNAL_PREFIX.length)\n      : ruleDetails.key;\n    return <span className=\"note text-middle\">{displayedKey}</span>;\n  }\n\n  render() {\n    const { ruleDetails } = this.props;\n    const hasTypeData = !ruleDetails.isExternal || ruleDetails.type !== 'UNKNOWN';\n    return (\n      <div className=\"js-rule-meta\">\n        <header className=\"page-header\">\n          <div className=\"pull-right\">\n            {this.renderKey()}\n            {!ruleDetails.isExternal && (\n              <Link\n                className=\"coding-rules-detail-permalink link-no-underline spacer-left text-middle\"\n                title={translate('permalink')}\n                to={getRuleUrl(ruleDetails.key)}>\n                <LinkIcon />\n              </Link>\n            )}\n            {!this.props.hideSimilarRulesFilter && (\n              <SimilarRulesFilter onFilterChange={this.props.onFilterChange} rule={ruleDetails} />\n            )}\n          </div>\n          <h3 className=\"page-title coding-rules-detail-header\">\n            <big>{ruleDetails.name}</big>\n          </h3>\n        </header>\n\n        {hasTypeData && (\n          <ul className=\"coding-rules-detail-properties\">\n            {this.renderType()}\n            {this.renderSeverity()}\n            {!ruleDetails.isExternal && this.renderStatus()}\n            {this.renderTags()}\n            {!ruleDetails.isExternal && this.renderCreationDate()}\n            {this.renderRepository()}\n            {!ruleDetails.isExternal && (\n              <>\n                {this.renderTemplate()}\n                {this.renderParentTemplate()}\n                {this.renderRemediation()}\n              </>\n            )}\n            {ruleDetails.isExternal && this.renderExternalBadge()}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { activateRule, Profile } from '../../../api/quality-profiles';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport { sanitizeString } from '../../../helpers/sanitize';\nimport { sortProfiles } from '../../quality-profiles/utils';\n\ninterface Props {\n  activation?: T.RuleActivation;\n  modalHeader: string;\n  onClose: () => void;\n  onDone: (severity: string) => Promise<void>;\n  profiles: Profile[];\n  rule: T.Rule | T.RuleDetails;\n}\n\ninterface State {\n  params: T.Dict<string>;\n  profile: string;\n  severity: string;\n  submitting: boolean;\n}\n\nexport default class ActivationFormModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const profilesWithDepth = this.getQualityProfilesWithDepth(props);\n    this.state = {\n      params: this.getParams(props),\n      profile: profilesWithDepth.length > 0 ? profilesWithDepth[0].key : '',\n      severity: props.activation ? props.activation.severity : props.rule.severity,\n      submitting: false\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getParams = ({ activation, rule } = this.props) => {\n    const params: T.Dict<string> = {};\n    if (rule && rule.params) {\n      for (const param of rule.params) {\n        params[param.key] = param.defaultValue || '';\n      }\n      if (activation && activation.params) {\n        for (const param of activation.params) {\n          params[param.key] = param.value;\n        }\n      }\n    }\n    return params;\n  };\n\n  // Choose QP which a user can administrate, which are the same language and which are not built-in\n  getQualityProfilesWithDepth = ({ profiles } = this.props) => {\n    return sortProfiles(\n      profiles.filter(\n        profile =>\n          !profile.isBuiltIn &&\n          profile.actions &&\n          profile.actions.edit &&\n          profile.language === this.props.rule.lang\n      )\n    ).map(profile => ({\n      ...profile,\n      // Decrease depth by 1, so the top level starts at 0\n      depth: profile.depth - 1\n    }));\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    const data = {\n      key: this.state.profile,\n      params: this.state.params,\n      rule: this.props.rule.key,\n      severity: this.state.severity\n    };\n    activateRule(data)\n      .then(() => this.props.onDone(data.severity))\n      .then(\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n            this.props.onClose();\n          }\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n          }\n        }\n      );\n  };\n\n  handleParameterChange = (event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState((state: State) => ({ params: { ...state.params, [name]: value } }));\n  };\n\n  handleProfileChange = ({ value }: { value: string }) => {\n    this.setState({ profile: value });\n  };\n\n  handleSeverityChange = ({ value }: { value: string }) => {\n    this.setState({ severity: value });\n  };\n\n  renderSeverityOption = ({ value }: { value: string }) => {\n    return <SeverityHelper severity={value} />;\n  };\n\n  render() {\n    const { activation, rule } = this.props;\n    const { profile, severity, submitting } = this.state;\n    const { params = [] } = rule;\n    const profilesWithDepth = this.getQualityProfilesWithDepth();\n    const isCustomRule = !!(rule as T.RuleDetails).templateKey;\n    const activeInAllProfiles = profilesWithDepth.length <= 0;\n    const isUpdateMode = !!activation;\n\n    return (\n      <Modal contentLabel={this.props.modalHeader} onRequestClose={this.props.onClose} size=\"small\">\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{this.props.modalHeader}</h2>\n          </div>\n\n          <div className={classNames('modal-body', { 'modal-container': params.length > 0 })}>\n            {!isUpdateMode && activeInAllProfiles && (\n              <Alert variant=\"info\">{translate('coding_rules.active_in_all_profiles')}</Alert>\n            )}\n\n            <div className=\"modal-field\">\n              <label>{translate('coding_rules.quality_profile')}</label>\n              <Select\n                className=\"js-profile\"\n                clearable={false}\n                disabled={submitting || profilesWithDepth.length === 1}\n                onChange={this.handleProfileChange}\n                options={profilesWithDepth.map(profile => ({\n                  label: '   '.repeat(profile.depth) + profile.name,\n                  value: profile.key\n                }))}\n                value={profile}\n              />\n            </div>\n            <div className=\"modal-field\">\n              <label>{translate('severity')}</label>\n              <Select\n                className=\"js-severity\"\n                clearable={false}\n                disabled={submitting}\n                onChange={this.handleSeverityChange}\n                optionRenderer={this.renderSeverityOption}\n                options={SEVERITIES.map(severity => ({\n                  label: translate('severity', severity),\n                  value: severity\n                }))}\n                searchable={false}\n                value={severity}\n                valueRenderer={this.renderSeverityOption}\n              />\n            </div>\n            {isCustomRule ? (\n              <div className=\"modal-field\">\n                <p className=\"note\">{translate('coding_rules.custom_rule.activation_notice')}</p>\n              </div>\n            ) : (\n              params.map(param => (\n                <div className=\"modal-field\" key={param.key}>\n                  <label title={param.key}>{param.key}</label>\n                  {param.type === 'TEXT' ? (\n                    <textarea\n                      disabled={submitting}\n                      name={param.key}\n                      onChange={this.handleParameterChange}\n                      placeholder={param.defaultValue}\n                      rows={3}\n                      value={this.state.params[param.key] || ''}\n                    />\n                  ) : (\n                    <input\n                      disabled={submitting}\n                      name={param.key}\n                      onChange={this.handleParameterChange}\n                      placeholder={param.defaultValue}\n                      type=\"text\"\n                      value={this.state.params[param.key] || ''}\n                    />\n                  )}\n                  {param.htmlDesc !== undefined && (\n                    <div\n                      className=\"note\"\n                      // eslint-disable-next-line react/no-danger\n                      dangerouslySetInnerHTML={{ __html: sanitizeString(param.htmlDesc) }}\n                    />\n                  )}\n                </div>\n              ))\n            )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitting || activeInAllProfiles}>\n              {isUpdateMode ? translate('save') : translate('coding_rules.activate')}\n            </SubmitButton>\n            <ResetButtonLink disabled={submitting} onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { bulkActivateRules, bulkDeactivateRules, Profile } from '../../../api/quality-profiles';\nimport { Query, serializeQuery } from '../query';\n\ninterface Props {\n  action: string;\n  languages: T.Languages;\n  onClose: () => void;\n  profile?: Profile;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  total: number;\n}\n\ninterface ActivationResult {\n  failed: number;\n  profile: string;\n  succeeded: number;\n}\n\ninterface State {\n  finished: boolean;\n  results: ActivationResult[];\n  selectedProfiles: any[];\n  submitting: boolean;\n}\n\nexport default class BulkChangeModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    // if there is only one possible option for profile, select it immediately\n    const selectedProfiles = [];\n    const availableProfiles = this.getAvailableQualityProfiles(props);\n    if (availableProfiles.length === 1) {\n      selectedProfiles.push(availableProfiles[0].key);\n    }\n\n    this.state = { finished: false, results: [], selectedProfiles, submitting: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleProfileSelect = (options: { value: string }[]) => {\n    const selectedProfiles = options.map(option => option.value);\n    this.setState({ selectedProfiles });\n  };\n\n  getAvailableQualityProfiles = ({ query, referencedProfiles } = this.props) => {\n    let profiles = Object.values(referencedProfiles);\n    if (query.languages.length > 0) {\n      profiles = profiles.filter(profile => query.languages.includes(profile.language));\n    }\n    return profiles\n      .filter(profile => profile.actions && profile.actions.edit)\n      .filter(profile => !profile.isBuiltIn);\n  };\n\n  processResponse = (profile: string, response: any) => {\n    if (this.mounted) {\n      const result: ActivationResult = {\n        failed: response.failed || 0,\n        profile,\n        succeeded: response.succeeded || 0\n      };\n      this.setState(state => ({ results: [...state.results, result] }));\n    }\n  };\n\n  sendRequests = () => {\n    let looper = Promise.resolve();\n\n    // serialize the query, but delete the `profile`\n    const data = serializeQuery(this.props.query);\n    delete data.profile;\n\n    const method = this.props.action === 'activate' ? bulkActivateRules : bulkDeactivateRules;\n\n    // if a profile is selected in the facet, pick it\n    // otherwise take all profiles selected in the dropdown\n    const profiles: string[] = this.props.profile\n      ? [this.props.profile.key]\n      : this.state.selectedProfiles;\n\n    for (const profile of profiles) {\n      looper = looper\n        .then(() =>\n          method({\n            ...data,\n            targetKey: profile\n          })\n        )\n        .then(response => this.processResponse(profile, response));\n    }\n    return looper;\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    this.sendRequests().then(\n      () => {\n        if (this.mounted) {\n          this.setState({ finished: true, submitting: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  renderResult = (result: ActivationResult) => {\n    const { profile: profileKey } = result;\n    const profile = this.props.referencedProfiles[profileKey];\n    if (!profile) {\n      return null;\n    }\n    const { languages } = this.props;\n    const language = languages[profile.language]\n      ? languages[profile.language].name\n      : profile.language;\n    return (\n      <Alert key={result.profile} variant={result.failed === 0 ? 'success' : 'warning'}>\n        {result.failed\n          ? translateWithParameters(\n              'coding_rules.bulk_change.warning',\n              profile.name,\n              language,\n              result.succeeded,\n              result.failed\n            )\n          : translateWithParameters(\n              'coding_rules.bulk_change.success',\n              profile.name,\n              language,\n              result.succeeded\n            )}\n      </Alert>\n    );\n  };\n\n  renderProfileSelect = () => {\n    const profiles = this.getAvailableQualityProfiles();\n    const options = profiles.map(profile => ({\n      label: `${profile.name} - ${profile.languageName}`,\n      value: profile.key\n    }));\n    return (\n      <Select\n        multi={true}\n        onChange={this.handleProfileSelect}\n        options={options}\n        value={this.state.selectedProfiles}\n      />\n    );\n  };\n\n  render() {\n    const { action, profile, total } = this.props;\n    const header =\n      action === 'activate'\n        ? `${translate('coding_rules.activate_in_quality_profile')} (${formatMeasure(\n            total,\n            'INT'\n          )} ${translate('coding_rules._rules')})`\n        : `${translate('coding_rules.deactivate_in_quality_profile')} (${formatMeasure(\n            total,\n            'INT'\n          )} ${translate('coding_rules._rules')})`;\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose} size=\"small\">\n        <form onSubmit={this.handleFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {this.state.results.map(this.renderResult)}\n\n            {!this.state.finished && !this.state.submitting && (\n              <div className=\"modal-field\">\n                <h3>\n                  <label htmlFor=\"coding-rules-bulk-change-profile\">\n                    {action === 'activate'\n                      ? translate('coding_rules.activate_in')\n                      : translate('coding_rules.deactivate_in')}\n                  </label>\n                </h3>\n                {profile ? (\n                  <span>\n                    {profile.name}\n                    {' — '}\n                    {translate('are_you_sure')}\n                  </span>\n                ) : (\n                  this.renderProfileSelect()\n                )}\n              </div>\n            )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {this.state.submitting && <i className=\"spinner spacer-right\" />}\n            {!this.state.finished && (\n              <SubmitButton disabled={this.state.submitting} id=\"coding-rules-submit-bulk-change\">\n                {translate('apply')}\n              </SubmitButton>\n            )}\n            <ResetButtonLink onClick={this.props.onClose}>\n              {this.state.finished ? translate('close') : translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Profile } from '../../../api/quality-profiles';\nimport { Query } from '../query';\nimport BulkChangeModal from './BulkChangeModal';\n\ninterface Props {\n  languages: T.Languages;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  total: number;\n}\n\ninterface State {\n  action?: string;\n  modal: boolean;\n  profile?: Profile;\n}\n\nexport default class BulkChange extends React.PureComponent<Props, State> {\n  state: State = { modal: false };\n\n  getSelectedProfile = () => {\n    const { profile } = this.props.query;\n    return (profile && this.props.referencedProfiles[profile]) || undefined;\n  };\n\n  closeModal = () => this.setState({ action: undefined, modal: false, profile: undefined });\n\n  handleActivateClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'activate', modal: true, profile: undefined });\n  };\n\n  handleActivateInProfileClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'activate', modal: true, profile: this.getSelectedProfile() });\n  };\n\n  handleDeactivateClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'deactivate', modal: true, profile: undefined });\n  };\n\n  handleDeactivateInProfileClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'deactivate', modal: true, profile: this.getSelectedProfile() });\n  };\n\n  render() {\n    // show \"Bulk Change\" button only if user is admin of at least one QP\n    const canBulkChange = Object.values(this.props.referencedProfiles).some(profile =>\n      Boolean(profile.actions && profile.actions.edit)\n    );\n    if (!canBulkChange) {\n      return (\n        <Tooltip overlay={translate('coding_rules.can_not_bulk_change')}>\n          <Button className=\"js-bulk-change\" disabled={true}>\n            {translate('bulk_change')}\n          </Button>\n        </Tooltip>\n      );\n    }\n\n    const { activation } = this.props.query;\n    const profile = this.getSelectedProfile();\n    const canChangeProfile = Boolean(\n      profile && !profile.isBuiltIn && profile.actions && profile.actions.edit\n    );\n    const allowActivateOnProfile = canChangeProfile && activation === false;\n    const allowDeactivateOnProfile = canChangeProfile && activation === true;\n\n    return (\n      <>\n        <Dropdown\n          overlayPlacement={PopupPlacement.BottomLeft}\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a href=\"#\" onClick={this.handleActivateClick}>\n                  {translate('coding_rules.activate_in')}…\n                </a>\n              </li>\n              {allowActivateOnProfile && profile && (\n                <li>\n                  <a href=\"#\" onClick={this.handleActivateInProfileClick}>\n                    {translate('coding_rules.activate_in')} <strong>{profile.name}</strong>\n                  </a>\n                </li>\n              )}\n              <li>\n                <a href=\"#\" onClick={this.handleDeactivateClick}>\n                  {translate('coding_rules.deactivate_in')}…\n                </a>\n              </li>\n              {allowDeactivateOnProfile && profile && (\n                <li>\n                  <a href=\"#\" onClick={this.handleDeactivateInProfileClick}>\n                    {translate('coding_rules.deactivate_in')} <strong>{profile.name}</strong>\n                  </a>\n                </li>\n              )}\n            </ul>\n          }>\n          <Button className=\"js-bulk-change\">{translate('bulk_change')}</Button>\n        </Dropdown>\n        {this.state.modal && this.state.action && (\n          <BulkChangeModal\n            action={this.state.action}\n            languages={this.props.languages}\n            onClose={this.closeModal}\n            profile={this.state.profile}\n            query={this.props.query}\n            referencedProfiles={this.props.referencedProfiles}\n            total={this.props.total}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { orderBy, sortBy, without } from 'lodash';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { FacetKey } from '../query';\n\nexport interface BasicProps {\n  onChange: (changes: T.Dict<string | string[] | undefined>) => void;\n  onToggle: (facet: FacetKey) => void;\n  open: boolean;\n  stats?: T.Dict<number>;\n  values: string[];\n}\n\ninterface Props extends BasicProps {\n  children?: React.ReactNode;\n  disabled?: boolean;\n  disabledHelper?: string;\n  halfWidth?: boolean;\n  options?: string[];\n  property: FacetKey;\n  renderFooter?: () => React.ReactNode;\n  renderName?: (value: string) => React.ReactNode;\n  renderTextName?: (value: string) => string;\n  singleSelection?: boolean;\n}\n\nexport default class Facet extends React.PureComponent<Props> {\n  handleItemClick = (itemValue: string, multiple: boolean) => {\n    const { values } = this.props;\n    let newValue;\n    if (this.props.singleSelection) {\n      const value = values.length ? values[0] : undefined;\n      newValue = itemValue === value ? undefined : itemValue;\n    } else if (multiple) {\n      newValue = orderBy(\n        values.includes(itemValue) ? without(values, itemValue) : [...values, itemValue]\n      );\n    } else {\n      newValue = values.includes(itemValue) && values.length < 2 ? [] : [itemValue];\n    }\n    this.props.onChange({ [this.props.property]: newValue });\n  };\n\n  handleHeaderClick = () => this.props.onToggle(this.props.property);\n\n  handleClear = () => this.props.onChange({ [this.props.property]: [] });\n\n  getStat = (value: string) => this.props.stats && this.props.stats[value];\n\n  renderItem = (value: string) => {\n    const active = this.props.values.includes(value);\n    const stat = this.getStat(value);\n    const { renderName = defaultRenderName, renderTextName = defaultRenderName } = this.props;\n\n    return (\n      <FacetItem\n        active={active}\n        halfWidth={this.props.halfWidth}\n        key={value}\n        name={renderName(value)}\n        onClick={this.handleItemClick}\n        stat={stat && formatMeasure(stat, 'SHORT_INT')}\n        tooltip={renderTextName(value)}\n        value={value}\n      />\n    );\n  };\n\n  render() {\n    const { disabled, renderTextName = defaultRenderName, stats } = this.props;\n    const values = this.props.values.map(renderTextName);\n    const items =\n      this.props.options ||\n      (stats &&\n        sortBy(\n          Object.keys(stats),\n          key => -stats[key],\n          key => renderTextName(key).toLowerCase()\n        ));\n\n    return (\n      <FacetBox\n        className={classNames({ 'search-navigator-facet-box-forbidden': disabled })}\n        property={this.props.property}>\n        <FacetHeader\n          name={\n            <Tooltip overlay={disabled ? this.props.disabledHelper : undefined}>\n              <span>{translate('coding_rules.facet', this.props.property)}</span>\n            </Tooltip>\n          }\n          onClear={this.handleClear}\n          onClick={disabled ? undefined : this.handleHeaderClick}\n          open={this.props.open && !disabled}\n          values={values}>\n          {this.props.children}\n        </FacetHeader>\n\n        {this.props.open && items !== undefined && (\n          <FacetItemsList>{items.map(this.renderItem)}</FacetItemsList>\n        )}\n\n        {this.props.open && this.props.renderFooter !== undefined && this.props.renderFooter()}\n      </FacetBox>\n    );\n  }\n}\n\nfunction defaultRenderName(value: string) {\n  return value;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends BasicProps {\n  disabled: boolean;\n}\n\nexport default class ActivationSeverityFacet extends React.PureComponent<Props> {\n  renderName = (severity: string) => <SeverityHelper severity={severity} />;\n\n  renderTextName = (severity: string) => translate('severity', severity);\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.active_severity.inactive')}\n        halfWidth={true}\n        options={SEVERITIES}\n        property=\"activationSeverities\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport { longFormatterOption } from 'sonar-ui-common/components/intl/DateFormatter';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport DateInput from '../../../components/controls/DateInput';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport { Query } from '../query';\n\ninterface Props {\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: keyof Query) => void;\n  open: boolean;\n  value?: Date;\n}\n\nclass AvailableSinceFacet extends React.PureComponent<Props & InjectedIntlProps> {\n  handleHeaderClick = () => {\n    this.props.onToggle('availableSince');\n  };\n\n  handleClear = () => {\n    this.props.onChange({ availableSince: undefined });\n  };\n\n  handlePeriodChange = (date: Date | undefined) => {\n    this.props.onChange({ availableSince: date });\n  };\n\n  getValues = () =>\n    this.props.value\n      ? [this.props.intl.formatDate(this.props.value, longFormatterOption)]\n      : undefined;\n\n  render() {\n    return (\n      <FacetBox property=\"availableSince\">\n        <FacetHeader\n          name={translate('coding_rules.facet.available_since')}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && (\n          <DateInput\n            name=\"available-since\"\n            onChange={this.handlePeriodChange}\n            placeholder={translate('date')}\n            value={this.props.value}\n          />\n        )}\n      </FacetBox>\n    );\n  }\n}\n\nexport default injectIntl(AvailableSinceFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class DefaultSeverityFacet extends React.PureComponent<BasicProps> {\n  renderName = (severity: string) => <SeverityHelper severity={severity} />;\n\n  renderTextName = (severity: string) => translate('severity', severity);\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        halfWidth={true}\n        options={SEVERITIES}\n        property=\"severities\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends T.Omit<BasicProps, 'values'> {\n  disabled: boolean;\n  value: T.RuleInheritance | undefined;\n}\n\nexport default class InheritanceFacet extends React.PureComponent<Props> {\n  renderName = (value: T.RuleInheritance) =>\n    translate('coding_rules.filters.inheritance', value.toLowerCase());\n\n  render() {\n    const { value, ...props } = this.props;\n\n    return (\n      <Facet\n        {...props}\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.inheritance.inactive')}\n        options={['NONE', 'INHERITED', 'OVERRIDES']}\n        property=\"inheritance\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n        singleSelection={true}\n        values={value ? [value] : []}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { highlightTerm } from 'sonar-ui-common/helpers/search';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport { getLanguages, Store } from '../../../store/rootReducer';\nimport { BasicProps } from './Facet';\n\ninterface InstalledLanguage {\n  key: string;\n  name: string;\n}\n\ninterface Props extends BasicProps {\n  disabled?: boolean;\n  installedLanguages: InstalledLanguage[];\n}\n\nclass LanguageFacet extends React.PureComponent<Props> {\n  getLanguageName = (languageKey: string) => {\n    const language = this.props.installedLanguages.find(l => l.key === languageKey);\n    return language ? language.name : languageKey;\n  };\n\n  handleSearch = (query: string) => {\n    const options = this.getAllPossibleOptions();\n    const results = options.filter(language =>\n      language.name.toLowerCase().includes(query.toLowerCase())\n    );\n    const paging = { pageIndex: 1, pageSize: results.length, total: results.length };\n    return Promise.resolve({ paging, results });\n  };\n\n  getAllPossibleOptions = () => {\n    const { installedLanguages, stats = {} } = this.props;\n\n    // add any language that presents in the facet, but might not be installed\n    // for such language we don't know their display name, so let's just use their key\n    // and make sure we reference each language only once\n    return uniqBy(\n      [...installedLanguages, ...Object.keys(stats).map(key => ({ key, name: key }))],\n      language => language.key\n    );\n  };\n\n  renderSearchResult = ({ name }: InstalledLanguage, term: string) => {\n    return highlightTerm(name, term);\n  };\n\n  render() {\n    return (\n      <ListStyleFacet<InstalledLanguage>\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.language.inactive')}\n        facetHeader={translate('coding_rules.facet.languages')}\n        fetching={false}\n        getFacetItemText={this.getLanguageName}\n        getSearchResultKey={language => language.key}\n        getSearchResultText={language => language.name}\n        minSearchLength={1}\n        onChange={this.props.onChange}\n        onSearch={this.handleSearch}\n        onToggle={this.props.onToggle}\n        open={this.props.open}\n        property=\"languages\"\n        renderFacetItem={this.getLanguageName}\n        renderSearchResult={this.renderSearchResult}\n        searchPlaceholder={translate('search.search_for_languages')}\n        stats={this.props.stats}\n        values={this.props.values}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({\n  installedLanguages: Object.values(getLanguages(state))\n});\n\nexport default connect(mapStateToProps)(LanguageFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Profile } from '../../../api/quality-profiles';\nimport DocumentationTooltip from '../../../components/common/DocumentationTooltip';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { FacetKey, Query } from '../query';\n\ninterface Props {\n  activation: boolean | undefined;\n  compareToProfile: string | undefined;\n  languages: string[];\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (facet: FacetKey) => void;\n  open: boolean;\n  referencedProfiles: T.Dict<Profile>;\n  value: string | undefined;\n}\n\nexport default class ProfileFacet extends React.PureComponent<Props> {\n  handleItemClick = (selected: string) => {\n    const newValue = this.props.value === selected ? '' : selected;\n    this.props.onChange({\n      activation: this.props.activation === undefined ? true : this.props.activation,\n      compareToProfile: undefined,\n      profile: newValue\n    });\n  };\n\n  handleHeaderClick = () => this.props.onToggle('profile');\n\n  handleClear = () =>\n    this.props.onChange({\n      activation: undefined,\n      activationSeverities: [],\n      compareToProfile: undefined,\n      inheritance: undefined,\n      profile: undefined\n    });\n\n  handleActiveClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.stopPropagation(event);\n    this.props.onChange({ activation: true, compareToProfile: undefined });\n  };\n\n  handleInactiveClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.stopPropagation(event);\n    this.props.onChange({ activation: false, compareToProfile: undefined });\n  };\n\n  stopPropagation = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n  };\n\n  getTextValue = () => {\n    const { referencedProfiles, value } = this.props;\n    if (value) {\n      const profile = referencedProfiles[value];\n      const name = (profile && `${profile.name} ${profile.languageName}`) || value;\n      return [name];\n    } else {\n      return [];\n    }\n  };\n\n  getTooltip = (profile: Profile) => {\n    const base = `${profile.name} ${profile.languageName}`;\n    return profile.isBuiltIn ? `${base} (${translate('quality_profiles.built_in')})` : base;\n  };\n\n  renderName = (profile: Profile) => (\n    <>\n      {profile.name}\n      <span className=\"note little-spacer-left\">\n        {profile.languageName}\n        {profile.isBuiltIn && ` (${translate('quality_profiles.built_in')})`}\n      </span>\n    </>\n  );\n\n  renderActivation = (profile: Profile) => {\n    const isCompare = profile.key === this.props.compareToProfile;\n    const activation = isCompare ? true : this.props.activation;\n    return (\n      <>\n        <span\n          aria-checked={activation}\n          className={classNames('js-active', 'facet-toggle', 'facet-toggle-green', {\n            'facet-toggle-active': activation\n          })}\n          onClick={isCompare ? this.stopPropagation : this.handleActiveClick}\n          role=\"radio\"\n          tabIndex={-1}>\n          active\n        </span>\n        <span\n          aria-checked={!activation}\n          className={classNames('js-inactive', 'facet-toggle', 'facet-toggle-red', {\n            'facet-toggle-active': !activation\n          })}\n          onClick={isCompare ? this.stopPropagation : this.handleInactiveClick}\n          role=\"radio\"\n          tabIndex={-1}>\n          inactive\n        </span>\n      </>\n    );\n  };\n\n  renderItem = (profile: Profile) => {\n    const active = [this.props.value, this.props.compareToProfile].includes(profile.key);\n\n    return (\n      <FacetItem\n        active={active}\n        className={this.props.compareToProfile === profile.key ? 'compare' : undefined}\n        key={profile.key}\n        name={this.renderName(profile)}\n        onClick={this.handleItemClick}\n        stat={this.renderActivation(profile)}\n        tooltip={this.getTooltip(profile)}\n        value={profile.key}\n      />\n    );\n  };\n\n  render() {\n    const { languages, referencedProfiles } = this.props;\n    let profiles = Object.values(referencedProfiles);\n    if (languages.length > 0) {\n      profiles = profiles.filter(profile => languages.includes(profile.language));\n    }\n    profiles = sortBy(\n      profiles,\n      profile => profile.name.toLowerCase(),\n      profile => profile.languageName\n    );\n\n    return (\n      <FacetBox property=\"profile\">\n        <FacetHeader\n          name={translate('coding_rules.facet.qprofile')}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getTextValue()}>\n          <DocumentationTooltip\n            className=\"spacer-left\"\n            content={translate('coding_rules.facet.qprofile.help')}\n            links={[\n              {\n                href: '/documentation/instance-administration/quality-profiles/',\n                label: translate('coding_rules.facet.qprofile.link')\n              }\n            ]}\n          />\n        </FacetHeader>\n\n        {this.props.open && <FacetItemsList>{profiles.map(this.renderItem)}</FacetItemsList>}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { getLanguages, Store } from '../../../store/rootReducer';\nimport Facet, { BasicProps } from './Facet';\n\ninterface StateProps {\n  referencedLanguages: T.Dict<{ key: string; name: string }>;\n}\n\ninterface Props extends BasicProps, StateProps {\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n}\n\nclass RepositoryFacet extends React.PureComponent<Props> {\n  getLanguageName = (languageKey: string) => {\n    const { referencedLanguages } = this.props;\n    const language = referencedLanguages[languageKey];\n    return (language && language.name) || languageKey;\n  };\n\n  renderName = (repositoryKey: string) => {\n    const { referencedRepositories } = this.props;\n    const repository = referencedRepositories[repositoryKey];\n    return repository ? (\n      <>\n        {repository.name}\n        <span className=\"note little-spacer-left\">{this.getLanguageName(repository.language)}</span>\n      </>\n    ) : (\n      repositoryKey\n    );\n  };\n\n  renderTextName = (repositoryKey: string) => {\n    const { referencedRepositories } = this.props;\n    const repository = referencedRepositories[repositoryKey];\n    return (repository && repository.name) || repositoryKey;\n  };\n\n  render() {\n    const { referencedLanguages, referencedRepositories, ...facetProps } = this.props;\n    return (\n      <Facet\n        {...facetProps}\n        property=\"repositories\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  referencedLanguages: getLanguages(state)\n});\n\nexport default connect(mapStateToProps)(RepositoryFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { RULE_STATUSES } from '../../../helpers/constants';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class StatusFacet extends React.PureComponent<BasicProps> {\n  renderName = (status: string) => translate('rules.status', status.toLowerCase());\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        options={RULE_STATUSES}\n        property=\"statuses\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\nimport * as React from 'react';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { highlightTerm } from 'sonar-ui-common/helpers/search';\nimport { getRuleTags } from '../../../api/rules';\nimport { colors } from '../../../app/theme';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport { BasicProps } from './Facet';\n\nexport default class TagFacet extends React.PureComponent<BasicProps> {\n  handleSearch = (query: string) => {\n    return getRuleTags({ ps: 50, q: query }).then(tags => ({\n      paging: { pageIndex: 1, pageSize: tags.length, total: tags.length },\n      results: tags\n    }));\n  };\n\n  handleSelect = (option: { value: string }) => {\n    this.props.onChange({ tags: uniq([...this.props.values, option.value]) });\n  };\n\n  getTagName = (tag: string) => {\n    return tag;\n  };\n\n  renderTag = (tag: string) => (\n    <>\n      <TagsIcon className=\"little-spacer-right\" fill={colors.gray60} />\n      {tag}\n    </>\n  );\n\n  renderSearchResult = (tag: string, term: string) => (\n    <>\n      <TagsIcon className=\"little-spacer-right\" fill={colors.gray60} />\n      {highlightTerm(tag, term)}\n    </>\n  );\n\n  render() {\n    return (\n      <ListStyleFacet<string>\n        facetHeader={translate('coding_rules.facet.tags')}\n        fetching={false}\n        getFacetItemText={this.getTagName}\n        getSearchResultKey={tag => tag}\n        getSearchResultText={tag => tag}\n        onChange={this.props.onChange}\n        onSearch={this.handleSearch}\n        onToggle={this.props.onToggle}\n        open={this.props.open}\n        property=\"tags\"\n        renderFacetItem={this.renderTag}\n        renderSearchResult={this.renderSearchResult}\n        searchPlaceholder={translate('search.search_for_tags')}\n        stats={this.props.stats}\n        values={this.props.values}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends T.Omit<BasicProps, 'onChange' | 'values'> {\n  onChange: (changes: { template: boolean | undefined }) => void;\n  value: boolean | undefined;\n}\n\nexport default class TemplateFacet extends React.PureComponent<Props> {\n  handleChange = (changes: { template: string | any[] }) => {\n    const template =\n      // empty array is returned when a user cleared the facet\n      // otherwise `\"true\"`, `\"false\"` or `undefined` can be returned\n      Array.isArray(changes.template) || changes.template === undefined\n        ? undefined\n        : changes.template === 'true';\n    this.props.onChange({ ...changes, template });\n  };\n\n  renderName = (template: string) =>\n    template === 'true'\n      ? translate('coding_rules.filters.template.is_template')\n      : translate('coding_rules.filters.template.is_not_template');\n\n  render() {\n    const { onChange, value, ...props } = this.props;\n\n    return (\n      <Facet\n        {...props}\n        onChange={this.handleChange}\n        options={['true', 'false']}\n        property=\"template\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n        singleSelection={true}\n        values={value !== undefined ? [String(value)] : []}>\n        <HelpTooltip\n          className=\"spacer-left\"\n          overlay={\n            <div className=\"big-padded-top big-padded-bottom\">\n              {translate('coding_rules.rule_template.help')}\n            </div>\n          }\n        />\n      </Facet>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class TypeFacet extends React.PureComponent<BasicProps> {\n  renderName = (type: string) => (\n    <>\n      <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n      {translate('issue.type', type)}\n    </>\n  );\n\n  renderTextName = (type: string) => translate('issue.type', type);\n\n  render() {\n    const options = ['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'];\n\n    return (\n      <Facet\n        {...this.props}\n        options={options}\n        property=\"types\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Profile } from '../../../api/quality-profiles';\nimport StandardFacet from '../../issues/sidebar/StandardFacet';\nimport { Facets, OpenFacets, Query } from '../query';\nimport ActivationSeverityFacet from './ActivationSeverityFacet';\nimport AvailableSinceFacet from './AvailableSinceFacet';\nimport DefaultSeverityFacet from './DefaultSeverityFacet';\nimport InheritanceFacet from './InheritanceFacet';\nimport LanguageFacet from './LanguageFacet';\nimport ProfileFacet from './ProfileFacet';\nimport RepositoryFacet from './RepositoryFacet';\nimport StatusFacet from './StatusFacet';\nimport TagFacet from './TagFacet';\nimport TemplateFacet from './TemplateFacet';\nimport TypeFacet from './TypeFacet';\n\nexport interface FacetsListProps {\n  facets?: Facets;\n  hideProfileFacet?: boolean;\n  onFacetToggle: (facet: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  openFacets: OpenFacets;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  selectedProfile?: Profile;\n}\n\nexport default function FacetsList(props: FacetsListProps) {\n  const languageDisabled = !props.hideProfileFacet && props.query.profile !== undefined;\n\n  const inheritanceDisabled =\n    props.query.compareToProfile !== undefined ||\n    props.selectedProfile === undefined ||\n    !props.selectedProfile.isInherited;\n\n  const activationSeverityDisabled =\n    props.query.compareToProfile !== undefined ||\n    props.selectedProfile === undefined ||\n    !props.query.activation;\n  return (\n    <>\n      <LanguageFacet\n        disabled={languageDisabled}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.languages}\n        stats={props.facets && props.facets.languages}\n        values={props.query.languages}\n      />\n      <TypeFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.types}\n        stats={props.facets && props.facets.types}\n        values={props.query.types}\n      />\n      <TagFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.tags}\n        stats={props.facets && props.facets.tags}\n        values={props.query.tags}\n      />\n      <RepositoryFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.repositories}\n        referencedRepositories={props.referencedRepositories}\n        stats={props.facets && props.facets.repositories}\n        values={props.query.repositories}\n      />\n      <DefaultSeverityFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.severities}\n        stats={props.facets && props.facets.severities}\n        values={props.query.severities}\n      />\n      <StatusFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.statuses}\n        stats={props.facets && props.facets.statuses}\n        values={props.query.statuses}\n      />\n      <StandardFacet\n        cwe={props.query.cwe}\n        cweOpen={!!props.openFacets.cwe}\n        cweStats={props.facets && props.facets.cwe}\n        fetchingCwe={false}\n        fetchingOwaspTop10={false}\n        fetchingSansTop25={false}\n        fetchingSonarSourceSecurity={false}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.standards}\n        owaspTop10={props.query.owaspTop10}\n        owaspTop10Open={!!props.openFacets.owaspTop10}\n        owaspTop10Stats={props.facets && props.facets.owaspTop10}\n        query={props.query}\n        sansTop25={props.query.sansTop25}\n        sansTop25Open={!!props.openFacets.sansTop25}\n        sansTop25Stats={props.facets && props.facets.sansTop25}\n        sonarsourceSecurity={props.query.sonarsourceSecurity}\n        sonarsourceSecurityOpen={!!props.openFacets.sonarsourceSecurity}\n        sonarsourceSecurityStats={props.facets && props.facets.sonarsourceSecurity}\n      />\n      <AvailableSinceFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.availableSince}\n        value={props.query.availableSince}\n      />\n      <TemplateFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.template}\n        value={props.query.template}\n      />\n      {!props.hideProfileFacet && (\n        <>\n          <ProfileFacet\n            activation={props.query.activation}\n            compareToProfile={props.query.compareToProfile}\n            languages={props.query.languages}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.profile}\n            referencedProfiles={props.referencedProfiles}\n            value={props.query.profile}\n          />\n          <InheritanceFacet\n            disabled={inheritanceDisabled}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.inheritance}\n            value={props.query.inheritance}\n          />\n          <ActivationSeverityFacet\n            disabled={activationSeverityDisabled}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.activationSeverities}\n            stats={props.facets && props.facets.activationSeverities}\n            values={props.query.activationSeverities}\n          />\n        </>\n      )}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ReloadButton from 'sonar-ui-common/components/controls/ReloadButton';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport PageCounter from '../../../components/common/PageCounter';\nimport PageShortcutsTooltip from '../../../components/ui/PageShortcutsTooltip';\n\nexport interface PageActionsProps {\n  loading: boolean;\n  onReload: () => void;\n  paging?: T.Paging;\n  selectedIndex?: number;\n}\n\nexport default function PageActions(props: PageActionsProps) {\n  return (\n    <div className=\"display-flex-center\">\n      <PageShortcutsTooltip\n        className=\"big-spacer-right\"\n        leftAndRightLabel={translate('issues.to_navigate')}\n        upAndDownLabel={translate('coding_rules.to_select_rules')}\n      />\n\n      <DeferredSpinner loading={props.loading}>\n        <ReloadButton onClick={props.onReload} />\n      </DeferredSpinner>\n\n      {props.paging && (\n        <PageCounter\n          className=\"spacer-left\"\n          current={props.selectedIndex}\n          label={translate('coding_rules._rules')}\n          total={props.paging.total}\n        />\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport MandatoryFieldMarker from 'sonar-ui-common/components/ui/MandatoryFieldMarker';\nimport MandatoryFieldsExplanation from 'sonar-ui-common/components/ui/MandatoryFieldsExplanation';\nimport { csvEscape } from 'sonar-ui-common/helpers/csv';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { latinize } from 'sonar-ui-common/helpers/strings';\nimport { createRule, updateRule } from '../../../api/rules';\nimport FormattingTips from '../../../components/common/FormattingTips';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport TypeHelper from '../../../components/shared/TypeHelper';\nimport { RULE_STATUSES, RULE_TYPES, SEVERITIES } from '../../../helpers/constants';\nimport { sanitizeString } from '../../../helpers/sanitize';\n\ninterface Props {\n  customRule?: T.RuleDetails;\n  onClose: () => void;\n  onDone: (newRuleDetails: T.RuleDetails) => void;\n  templateRule: T.RuleDetails;\n}\n\ninterface State {\n  description: string;\n  key: string;\n  keyModifiedByUser: boolean;\n  name: string;\n  params: T.Dict<string>;\n  reactivating: boolean;\n  severity: string;\n  status: string;\n  submitting: boolean;\n  type: string;\n}\n\nexport default class CustomRuleFormModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const params: T.Dict<string> = {};\n    if (props.customRule && props.customRule.params) {\n      for (const param of props.customRule.params) {\n        params[param.key] = param.defaultValue || '';\n      }\n    }\n    this.state = {\n      description: (props.customRule && props.customRule.mdDesc) || '',\n      key: '',\n      keyModifiedByUser: false,\n      name: (props.customRule && props.customRule.name) || '',\n      params,\n      reactivating: false,\n      severity: (props.customRule && props.customRule.severity) || props.templateRule.severity,\n      status: (props.customRule && props.customRule.status) || props.templateRule.status,\n      submitting: false,\n      type: (props.customRule && props.customRule.type) || props.templateRule.type\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  prepareRequest = () => {\n    const { customRule, templateRule } = this.props;\n    const params = Object.keys(this.state.params)\n      .map(key => `${key}=${csvEscape(this.state.params[key])}`)\n      .join(';');\n    const ruleData = {\n      markdown_description: this.state.description,\n      name: this.state.name,\n      params,\n      severity: this.state.severity,\n      status: this.state.status\n    };\n    return customRule\n      ? updateRule({ ...ruleData, key: customRule.key })\n      : createRule({\n          ...ruleData,\n          custom_key: this.state.key,\n          prevent_reactivation: !this.state.reactivating,\n          template_key: templateRule.key,\n          type: this.state.type\n        });\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    this.prepareRequest().then(\n      newRuleDetails => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n          this.props.onDone(newRuleDetails);\n        }\n      },\n      (response: Response) => {\n        if (this.mounted) {\n          this.setState({ reactivating: response.status === 409, submitting: false });\n        }\n      }\n    );\n  };\n\n  handleNameChange = (event: React.SyntheticEvent<HTMLInputElement>) => {\n    const { value: name } = event.currentTarget;\n    this.setState(state => ({\n      name,\n      key: state.keyModifiedByUser ? state.key : latinize(name).replace(/[^A-Za-z0-9]/g, '_')\n    }));\n  };\n\n  handleKeyChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ key: event.currentTarget.value, keyModifiedByUser: true });\n\n  handleDescriptionChange = (event: React.SyntheticEvent<HTMLTextAreaElement>) =>\n    this.setState({ description: event.currentTarget.value });\n\n  handleTypeChange = ({ value }: { value: string }) => this.setState({ type: value });\n\n  handleSeverityChange = ({ value }: { value: string }) => this.setState({ severity: value });\n\n  handleStatusChange = ({ value }: { value: string }) => this.setState({ status: value });\n\n  handleParameterChange = (event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState((state: State) => ({ params: { ...state.params, [name]: value } }));\n  };\n\n  renderNameField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-name\">\n        {translate('name')} <MandatoryFieldMarker />\n      </label>\n      <input\n        autoFocus={true}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-creation-name\"\n        onChange={this.handleNameChange}\n        required={true}\n        type=\"text\"\n        value={this.state.name}\n      />\n    </div>\n  );\n\n  renderKeyField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-key\">\n        {translate('key')} {!this.props.customRule && <MandatoryFieldMarker />}\n      </label>\n\n      {this.props.customRule ? (\n        <span className=\"coding-rules-detail-custom-rule-key\" title={this.props.customRule.key}>\n          {this.props.customRule.key}\n        </span>\n      ) : (\n        <input\n          disabled={this.state.submitting}\n          id=\"coding-rules-custom-rule-creation-key\"\n          onChange={this.handleKeyChange}\n          required={true}\n          type=\"text\"\n          value={this.state.key}\n        />\n      )}\n    </div>\n  );\n\n  renderDescriptionField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-html-description\">\n        {translate('description')}\n        <MandatoryFieldMarker />\n      </label>\n      <textarea\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-creation-html-description\"\n        onChange={this.handleDescriptionChange}\n        required={true}\n        rows={5}\n        value={this.state.description}\n      />\n      <FormattingTips className=\"modal-field-descriptor text-right\" />\n    </div>\n  );\n\n  renderTypeOption = ({ value }: { value: T.RuleType }) => {\n    return <TypeHelper type={value} />;\n  };\n\n  renderTypeField = () => (\n    <div className=\"modal-field flex-1 spacer-right\">\n      <label htmlFor=\"coding-rules-custom-rule-type\">{translate('type')}</label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-type\"\n        onChange={this.handleTypeChange}\n        optionRenderer={this.renderTypeOption}\n        options={RULE_TYPES.map(type => ({\n          label: translate('issue.type', type),\n          value: type\n        }))}\n        searchable={false}\n        value={this.state.type}\n        valueRenderer={this.renderTypeOption}\n      />\n    </div>\n  );\n\n  renderSeverityOption = ({ value }: { value: string }) => <SeverityHelper severity={value} />;\n\n  renderSeverityField = () => (\n    <div className=\"modal-field flex-1 spacer-right\">\n      <label htmlFor=\"coding-rules-custom-rule-severity\">{translate('severity')}</label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-severity\"\n        onChange={this.handleSeverityChange}\n        optionRenderer={this.renderSeverityOption}\n        options={SEVERITIES.map(severity => ({\n          label: translate('severity', severity),\n          value: severity\n        }))}\n        searchable={false}\n        value={this.state.severity}\n        valueRenderer={this.renderSeverityOption}\n      />\n    </div>\n  );\n\n  renderStatusField = () => (\n    <div className=\"modal-field flex-1\">\n      <label htmlFor=\"coding-rules-custom-rule-status\">\n        {translate('coding_rules.filters.status')}\n      </label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-status\"\n        onChange={this.handleStatusChange}\n        options={RULE_STATUSES.map(status => ({\n          label: translate('rules.status', status),\n          value: status\n        }))}\n        searchable={false}\n        value={this.state.status}\n      />\n    </div>\n  );\n\n  renderParameterField = (param: T.RuleParameter) => (\n    <div className=\"modal-field\" key={param.key}>\n      <label className=\"capitalize\" htmlFor={param.key}>\n        {param.key}\n      </label>\n\n      {param.type === 'TEXT' ? (\n        <textarea\n          disabled={this.state.submitting}\n          id={param.key}\n          name={param.key}\n          onChange={this.handleParameterChange}\n          placeholder={param.defaultValue}\n          rows={3}\n          value={this.state.params[param.key] || ''}\n        />\n      ) : (\n        <input\n          disabled={this.state.submitting}\n          id={param.key}\n          name={param.key}\n          onChange={this.handleParameterChange}\n          placeholder={param.defaultValue}\n          type=\"text\"\n          value={this.state.params[param.key] || ''}\n        />\n      )}\n      {param.htmlDesc !== undefined && (\n        <div\n          className=\"modal-field-description\"\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: sanitizeString(param.htmlDesc) }}\n        />\n      )}\n    </div>\n  );\n\n  render() {\n    const { customRule, templateRule } = this.props;\n    const { reactivating, submitting } = this.state;\n    const { params = [] } = templateRule;\n    const header = customRule\n      ? translate('coding_rules.update_custom_rule')\n      : translate('coding_rules.create_custom_rule');\n    let submit = this.props.customRule ? translate('save') : translate('create');\n    if (this.state.reactivating) {\n      submit = translate('coding_rules.reactivate');\n    }\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{header}</h2>\n          </div>\n\n          <div className=\"modal-body modal-container\">\n            {reactivating && (\n              <Alert variant=\"warning\">{translate('coding_rules.reactivate.help')}</Alert>\n            )}\n\n            <MandatoryFieldsExplanation className=\"spacer-bottom\" />\n\n            {this.renderNameField()}\n            {this.renderKeyField()}\n            <div className=\"display-flex-space-between\">\n              {/* do not allow to change the type of existing rule */}\n              {!customRule && this.renderTypeField()}\n              {this.renderSeverityField()}\n              {this.renderStatusField()}\n            </div>\n            {this.renderDescriptionField()}\n            {params.map(this.renderParameterField)}\n          </div>\n\n          <div className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={this.state.submitting}>{submit}</SubmitButton>\n            <ResetButtonLink\n              disabled={submitting}\n              id=\"coding-rules-custom-rule-creation-cancel\"\n              onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </div>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CustomRuleFormModal from './CustomRuleFormModal';\n\ninterface Props {\n  children: (props: { onClick: () => void }) => React.ReactNode;\n  customRule?: T.RuleDetails;\n  onDone: (newRuleDetails: T.RuleDetails) => void;\n  templateRule: T.RuleDetails;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class CustomRuleButton extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleModalClose = () => {\n    if (this.mounted) {\n      this.setState({ modal: false });\n    }\n  };\n\n  handleDone = (newRuleDetails: T.RuleDetails) => {\n    this.handleModalClose();\n    this.props.onDone(newRuleDetails);\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.children({ onClick: this.handleClick })}\n        {this.state.modal && (\n          <CustomRuleFormModal\n            customRule={this.props.customRule}\n            onClose={this.handleModalClose}\n            onDone={this.handleDone}\n            templateRule={this.props.templateRule}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { deleteRule, searchRules } from '../../../api/rules';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport CustomRuleButton from './CustomRuleButton';\n\ninterface Props {\n  canChange?: boolean;\n  ruleDetails: T.RuleDetails;\n}\n\ninterface State {\n  loading: boolean;\n  rules?: T.Rule[];\n}\n\nexport default class RuleDetailsCustomRules extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchRules();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleDetails.key !== this.props.ruleDetails.key) {\n      this.fetchRules();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRules = () => {\n    this.setState({ loading: true });\n    searchRules({\n      f: 'name,severity,params',\n      template_key: this.props.ruleDetails.key\n    }).then(\n      ({ rules }) => {\n        if (this.mounted) {\n          this.setState({ rules, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleRuleCreate = (newRuleDetails: T.RuleDetails) => {\n    if (this.mounted) {\n      this.setState(({ rules = [] }: State) => ({\n        rules: [...rules, newRuleDetails]\n      }));\n    }\n  };\n\n  handleRuleDelete = (ruleKey: string) => {\n    return deleteRule({ key: ruleKey }).then(() => {\n      if (this.mounted) {\n        this.setState(({ rules = [] }) => ({\n          rules: rules.filter(rule => rule.key !== ruleKey)\n        }));\n      }\n    });\n  };\n\n  renderRule = (rule: T.Rule) => (\n    <tr data-rule={rule.key} key={rule.key}>\n      <td className=\"coding-rules-detail-list-name\">\n        <Link to={getRuleUrl(rule.key)}>{rule.name}</Link>\n      </td>\n\n      <td className=\"coding-rules-detail-list-severity\">\n        <SeverityHelper className=\"display-flex-center\" severity={rule.severity} />\n      </td>\n\n      <td className=\"coding-rules-detail-list-parameters\">\n        {rule.params &&\n          rule.params\n            .filter(param => param.defaultValue)\n            .map(param => (\n              <div className=\"coding-rules-detail-list-parameter\" key={param.key}>\n                <span className=\"key\">{param.key}</span>\n                <span className=\"sep\">:&nbsp;</span>\n                <span className=\"value\" title={param.defaultValue}>\n                  {param.defaultValue}\n                </span>\n              </div>\n            ))}\n      </td>\n\n      {this.props.canChange && (\n        <td className=\"coding-rules-detail-list-actions\">\n          <ConfirmButton\n            confirmButtonText={translate('delete')}\n            confirmData={rule.key}\n            isDestructive={true}\n            modalBody={translateWithParameters('coding_rules.delete.custom.confirm', rule.name)}\n            modalHeader={translate('coding_rules.delete_rule')}\n            onConfirm={this.handleRuleDelete}>\n            {({ onClick }) => (\n              <Button className=\"button-red js-delete-custom-rule\" onClick={onClick}>\n                {translate('delete')}\n              </Button>\n            )}\n          </ConfirmButton>\n        </td>\n      )}\n    </tr>\n  );\n\n  render() {\n    const { loading, rules = [] } = this.state;\n\n    return (\n      <div className=\"js-rule-custom-rules coding-rule-section\">\n        <div className=\"coding-rules-detail-custom-rules-section\">\n          <div className=\"coding-rule-section-separator\" />\n\n          <h3 className=\"coding-rules-detail-title\">{translate('coding_rules.custom_rules')}</h3>\n\n          {this.props.canChange && (\n            <CustomRuleButton onDone={this.handleRuleCreate} templateRule={this.props.ruleDetails}>\n              {({ onClick }) => (\n                <Button className=\"js-create-custom-rule spacer-left\" onClick={onClick}>\n                  {translate('coding_rules.create')}\n                </Button>\n              )}\n            </CustomRuleButton>\n          )}\n\n          <DeferredSpinner className=\"spacer-left\" loading={loading}>\n            {rules.length > 0 && (\n              <table className=\"coding-rules-detail-list\" id=\"coding-rules-detail-custom-rules\">\n                <tbody>{sortBy(rules, rule => rule.name).map(this.renderRule)}</tbody>\n              </table>\n            )}\n          </DeferredSpinner>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getFacet } from '../../../api/issues';\nimport { withAppState } from '../../../components/hoc/withAppState';\nimport { getIssuesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  appState: Pick<T.AppState, 'branchesEnabled'>;\n  ruleDetails: Pick<T.RuleDetails, 'key' | 'type'>;\n}\n\ninterface Project {\n  count: number;\n  key: string;\n  name: string;\n}\n\ninterface State {\n  loading: boolean;\n  projects?: Project[];\n  total?: number;\n}\n\nexport class RuleDetailsIssues extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchIssues();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleDetails !== this.props.ruleDetails) {\n      this.fetchIssues();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchIssues = () => {\n    const {\n      ruleDetails: { key }\n    } = this.props;\n\n    this.setState({ loading: true });\n    getFacet(\n      {\n        resolved: 'false',\n        rules: key\n      },\n      'projects'\n    ).then(\n      ({ facet, response }) => {\n        if (this.mounted) {\n          const { components = [], paging } = response;\n          const projects = [];\n          for (const item of facet) {\n            const project = components.find(component => component.key === item.val);\n            if (project) {\n              projects.push({ count: item.count, key: project.key, name: project.name });\n            }\n          }\n          this.setState({ projects, loading: false, total: paging.total });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderTotal = () => {\n    const {\n      ruleDetails: { key }\n    } = this.props;\n\n    const { total } = this.state;\n    if (total === undefined) {\n      return null;\n    }\n    const path = getIssuesUrl({ resolved: 'false', rules: key });\n\n    const totalItem = (\n      <span className=\"little-spacer-left\">\n        {'('}\n        <Link to={path}>{total}</Link>\n        {')'}\n      </span>\n    );\n\n    if (!this.props.appState.branchesEnabled) {\n      return totalItem;\n    }\n\n    return (\n      <Tooltip overlay={translate('coding_rules.issues.only_main_branches')}>{totalItem}</Tooltip>\n    );\n  };\n\n  renderProject = (project: Project) => {\n    const {\n      ruleDetails: { key }\n    } = this.props;\n\n    const path = getIssuesUrl({ resolved: 'false', rules: key, projects: project.key });\n    return (\n      <tr key={project.key}>\n        <td className=\"coding-rules-detail-list-name\">{project.name}</td>\n        <td className=\"coding-rules-detail-list-parameters\">\n          <Link to={path}>{formatMeasure(project.count, 'INT')}</Link>\n        </td>\n      </tr>\n    );\n  };\n\n  render() {\n    const { loading, projects = [] } = this.state;\n\n    return (\n      <div className=\"js-rule-issues coding-rule-section\">\n        <div className=\"coding-rule-section-separator\" />\n\n        <DeferredSpinner loading={loading}>\n          <h3 className=\"coding-rules-detail-title\">\n            {translate('coding_rules.issues')}\n            {this.renderTotal()}\n          </h3>\n\n          {projects.length > 0 && (\n            <table className=\"coding-rules-detail-list coding-rules-most-violated-projects\">\n              <tbody>\n                <tr>\n                  <td className=\"coding-rules-detail-list-name\" colSpan={2}>\n                    {translate('coding_rules.most_violating_projects')}\n                  </td>\n                </tr>\n                {projects.map(this.renderProject)}\n              </tbody>\n            </table>\n          )}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n\nexport default withAppState(RuleDetailsIssues);\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { sanitizeString } from '../../../helpers/sanitize';\n\ninterface Props {\n  params: T.RuleParameter[];\n}\n\nexport default class RuleDetailsParameters extends React.PureComponent<Props> {\n  renderParameter = (param: T.RuleParameter) => (\n    <tr className=\"coding-rules-detail-parameter\" key={param.key}>\n      <td className=\"coding-rules-detail-parameter-name\">{param.key}</td>\n      <td className=\"coding-rules-detail-parameter-description\">\n        {param.htmlDesc !== undefined && (\n          <p\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{ __html: sanitizeString(param.htmlDesc) }}\n          />\n        )}\n        {param.defaultValue !== undefined && (\n          <div className=\"note spacer-top\">\n            {translate('coding_rules.parameters.default_value')}\n            <br />\n            <span className=\"coding-rules-detail-parameter-value\">{param.defaultValue}</span>\n          </div>\n        )}\n      </td>\n    </tr>\n  );\n\n  render() {\n    return (\n      <div className=\"js-rule-parameters\">\n        <h3 className=\"coding-rules-detail-title\">{translate('coding_rules.parameters')}</h3>\n        <table className=\"coding-rules-detail-parameters\">\n          <tbody>{this.props.params.map(this.renderParameter)}</tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { Profile as BaseProfile } from '../../../api/quality-profiles';\nimport ActivationFormModal from './ActivationFormModal';\n\ninterface Props {\n  activation?: T.RuleActivation;\n  buttonText: string;\n  className?: string;\n  modalHeader: string;\n  onDone: (severity: string) => Promise<void>;\n  profiles: BaseProfile[];\n  rule: T.Rule | T.RuleDetails;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ActivationButton extends React.PureComponent<Props, State> {\n  state: State = { modal: false };\n\n  handleButtonClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleCloseModal = () => {\n    this.setState({ modal: false });\n  };\n\n  render() {\n    return (\n      <>\n        <Button\n          className={this.props.className}\n          id=\"coding-rules-quality-profile-activate\"\n          onClick={this.handleButtonClick}>\n          {this.props.buttonText}\n        </Button>\n\n        {this.state.modal && (\n          <ActivationFormModal\n            activation={this.props.activation}\n            modalHeader={this.props.modalHeader}\n            onClose={this.handleCloseModal}\n            onDone={this.props.onDone}\n            profiles={this.props.profiles}\n            rule={this.props.rule}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../../app/theme';\n\ninterface Props {\n  className?: string;\n  inheritance: T.RuleInheritance;\n}\n\nexport default function RuleInheritanceIcon({ className, inheritance, ...other }: Props) {\n  const fill = inheritance === 'OVERRIDES' ? colors.red : colors.baseFontColor;\n\n  return (\n    <svg\n      className={className}\n      height={16}\n      version=\"1.1\"\n      viewBox=\"0 0 16 16\"\n      width={16}\n      xmlSpace=\"preserve\"\n      xmlnsXlink=\"https://www.w3.org/1999/xlink\"\n      {...other}>\n      <path\n        d=\"M6.25 12.5a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm0-9a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm5 1a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm.75 0a1.5 1.5 0 0 1-.75 1.297c-.023 2.82-2.023 3.445-3.352 3.867-1.242.39-1.648.578-1.648 1.336v.203A1.5 1.5 0 1 1 4 12.5a1.5 1.5 0 0 1 .75-1.297V4.797A1.5 1.5 0 1 1 7 3.5a1.5 1.5 0 0 1-.75 1.297V8.68c.398-.196.82-.328 1.203-.446 1.453-.46 2.281-.804 2.297-2.437A1.5 1.5 0 1 1 12 4.5z\"\n        style={{ fill, fillRule: 'nonzero' }}\n      />\n    </svg>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { filter } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { activateRule, deactivateRule, Profile } from '../../../api/quality-profiles';\nimport InstanceMessage from '../../../components/common/InstanceMessage';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { getQualityProfileUrl } from '../../../helpers/urls';\nimport BuiltInQualityProfileBadge from '../../quality-profiles/components/BuiltInQualityProfileBadge';\nimport ActivationButton from './ActivationButton';\nimport RuleInheritanceIcon from './RuleInheritanceIcon';\n\ninterface Props {\n  activations: T.RuleActivation[] | undefined;\n  canWrite: boolean | undefined;\n  onActivate: () => Promise<void>;\n  onDeactivate: () => Promise<void>;\n  referencedProfiles: T.Dict<Profile>;\n  ruleDetails: T.RuleDetails;\n}\n\nexport default class RuleDetailsProfiles extends React.PureComponent<Props> {\n  handleActivate = () => this.props.onActivate();\n\n  handleDeactivate = (key?: string) => {\n    if (key) {\n      deactivateRule({\n        key,\n        rule: this.props.ruleDetails.key\n      }).then(this.props.onDeactivate, () => {});\n    }\n  };\n\n  handleRevert = (key?: string) => {\n    if (key) {\n      activateRule({\n        key,\n        rule: this.props.ruleDetails.key,\n        reset: true\n      }).then(this.props.onActivate, () => {});\n    }\n  };\n\n  renderInheritedProfile = (activation: T.RuleActivation, profile: Profile) => {\n    if (!profile.parentName) {\n      return null;\n    }\n    const profilePath = getQualityProfileUrl(profile.parentName, profile.language);\n    return (\n      <div className=\"coding-rules-detail-quality-profile-inheritance\">\n        {(activation.inherit === 'OVERRIDES' || activation.inherit === 'INHERITED') && (\n          <>\n            <RuleInheritanceIcon className=\"text-middle\" inheritance={activation.inherit} />\n            <Link className=\"link-base-color little-spacer-left text-middle\" to={profilePath}>\n              {profile.parentName}\n            </Link>\n          </>\n        )}\n      </div>\n    );\n  };\n\n  renderSeverity = (activation: T.RuleActivation, parentActivation?: T.RuleActivation) => (\n    <td className=\"coding-rules-detail-quality-profile-severity\">\n      <Tooltip overlay={translate('coding_rules.activation_severity')}>\n        <span>\n          <SeverityHelper className=\"display-inline-flex-center\" severity={activation.severity} />\n        </span>\n      </Tooltip>\n      {parentActivation !== undefined && activation.severity !== parentActivation.severity && (\n        <div className=\"coding-rules-detail-quality-profile-inheritance\">\n          {translate('coding_rules.original')} {translate('severity', parentActivation.severity)}\n        </div>\n      )}\n    </td>\n  );\n\n  renderParameter = (\n    param: { key: string; value: string },\n    parentActivation?: T.RuleActivation\n  ) => {\n    const originalParam =\n      parentActivation && parentActivation.params.find(p => p.key === param.key);\n    const originalValue = originalParam && originalParam.value;\n\n    return (\n      <div className=\"coding-rules-detail-quality-profile-parameter\" key={param.key}>\n        <span className=\"key\">{param.key}</span>\n        <span className=\"sep\">: </span>\n        <span className=\"value\" title={param.value}>\n          {param.value}\n        </span>\n        {parentActivation && param.value !== originalValue && (\n          <div className=\"coding-rules-detail-quality-profile-inheritance\">\n            {translate('coding_rules.original')} <span className=\"value\">{originalValue}</span>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderParameters = (activation: T.RuleActivation, parentActivation?: T.RuleActivation) => (\n    <td className=\"coding-rules-detail-quality-profile-parameters\">\n      {activation.params.map(param => this.renderParameter(param, parentActivation))}\n    </td>\n  );\n\n  renderActions = (activation: T.RuleActivation, profile: Profile) => {\n    const canEdit = profile.actions && profile.actions.edit && !profile.isBuiltIn;\n    const { ruleDetails } = this.props;\n    const hasParent = activation.inherit !== 'NONE' && profile.parentKey;\n    return (\n      <td className=\"coding-rules-detail-quality-profile-actions\">\n        {canEdit && (\n          <>\n            {!ruleDetails.isTemplate && (\n              <ActivationButton\n                activation={activation}\n                buttonText={translate('change_verb')}\n                className=\"coding-rules-detail-quality-profile-change\"\n                modalHeader={translate('coding_rules.change_details')}\n                onDone={this.handleActivate}\n                profiles={[profile]}\n                rule={ruleDetails}\n              />\n            )}\n            {hasParent ? (\n              activation.inherit === 'OVERRIDES' &&\n              profile.parentName && (\n                <ConfirmButton\n                  confirmButtonText={translate('yes')}\n                  confirmData={profile.key}\n                  modalBody={translateWithParameters(\n                    'coding_rules.revert_to_parent_definition.confirm',\n                    profile.parentName\n                  )}\n                  modalHeader={translate('coding_rules.revert_to_parent_definition')}\n                  onConfirm={this.handleRevert}>\n                  {({ onClick }) => (\n                    <Button\n                      className=\"coding-rules-detail-quality-profile-revert button-red spacer-left\"\n                      onClick={onClick}>\n                      {translate('coding_rules.revert_to_parent_definition')}\n                    </Button>\n                  )}\n                </ConfirmButton>\n              )\n            ) : (\n              <ConfirmButton\n                confirmButtonText={translate('yes')}\n                confirmData={profile.key}\n                modalBody={translate('coding_rules.deactivate.confirm')}\n                modalHeader={translate('coding_rules.deactivate')}\n                onConfirm={this.handleDeactivate}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"coding-rules-detail-quality-profile-deactivate button-red spacer-left\"\n                    onClick={onClick}>\n                    {translate('coding_rules.deactivate')}\n                  </Button>\n                )}\n              </ConfirmButton>\n            )}\n          </>\n        )}\n      </td>\n    );\n  };\n\n  renderActivation = (activation: T.RuleActivation) => {\n    const { activations = [], ruleDetails } = this.props;\n    const profile = this.props.referencedProfiles[activation.qProfile];\n    if (!profile) {\n      return null;\n    }\n\n    const parentActivation = activations.find(x => x.qProfile === profile.parentKey);\n\n    return (\n      <tr data-profile={profile.key} key={profile.key}>\n        <td className=\"coding-rules-detail-quality-profile-name\">\n          <Link to={getQualityProfileUrl(profile.name, profile.language)}>{profile.name}</Link>\n          {profile.isBuiltIn && <BuiltInQualityProfileBadge className=\"spacer-left\" />}\n          {this.renderInheritedProfile(activation, profile)}\n        </td>\n\n        {this.renderSeverity(activation, parentActivation)}\n        {!ruleDetails.templateKey && this.renderParameters(activation, parentActivation)}\n        {this.renderActions(activation, profile)}\n      </tr>\n    );\n  };\n\n  render() {\n    const { activations = [], referencedProfiles, ruleDetails } = this.props;\n    const canActivate = Object.values(referencedProfiles).some(profile =>\n      Boolean(profile.actions && profile.actions.edit && profile.language === ruleDetails.lang)\n    );\n\n    return (\n      <div className=\"js-rule-profiles coding-rule-section\">\n        <div className=\"coding-rules-detail-quality-profiles-section\">\n          <div className=\"coding-rule-section-separator\" />\n\n          <h3 className=\"coding-rules-detail-title\">\n            <InstanceMessage message={translate('coding_rules.quality_profiles')} />\n          </h3>\n\n          {canActivate && (\n            <ActivationButton\n              buttonText={translate('coding_rules.activate')}\n              className=\"coding-rules-quality-profile-activate spacer-left\"\n              modalHeader={translate('coding_rules.activate_in_quality_profile')}\n              onDone={this.handleActivate}\n              profiles={filter(\n                this.props.referencedProfiles,\n                profile => !activations.find(activation => activation.qProfile === profile.key)\n              )}\n              rule={ruleDetails}\n            />\n          )}\n\n          {activations.length > 0 && (\n            <table\n              className=\"coding-rules-detail-quality-profiles width-100\"\n              id=\"coding-rules-detail-quality-profiles\">\n              <tbody>{activations.map(this.renderActivation)}</tbody>\n            </table>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { Profile } from '../../../api/quality-profiles';\nimport { deleteRule, getRuleDetails, updateRule } from '../../../api/rules';\nimport { Activation, Query } from '../query';\nimport CustomRuleButton from './CustomRuleButton';\nimport RuleDetailsCustomRules from './RuleDetailsCustomRules';\nimport RuleDetailsDescription from './RuleDetailsDescription';\nimport RuleDetailsIssues from './RuleDetailsIssues';\nimport RuleDetailsMeta from './RuleDetailsMeta';\nimport RuleDetailsParameters from './RuleDetailsParameters';\nimport RuleDetailsProfiles from './RuleDetailsProfiles';\n\ninterface Props {\n  allowCustomRules?: boolean;\n  canWrite?: boolean;\n  hideQualityProfiles?: boolean;\n  onActivate: (profile: string, rule: string, activation: Activation) => void;\n  onDeactivate: (profile: string, rule: string) => void;\n  onDelete: (rule: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  ruleKey: string;\n  selectedProfile?: Profile;\n}\n\ninterface State {\n  actives?: T.RuleActivation[];\n  loading: boolean;\n  ruleDetails?: T.RuleDetails;\n}\n\nexport default class RuleDetails extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.setState({ loading: true });\n    this.fetchRuleDetails();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleKey !== this.props.ruleKey) {\n      this.setState({ loading: true });\n      this.fetchRuleDetails();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRuleDetails = () => {\n    return getRuleDetails({\n      actives: true,\n      key: this.props.ruleKey\n    }).then(\n      ({ actives, rule }) => {\n        if (this.mounted) {\n          this.setState({ actives, loading: false, ruleDetails: rule });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleRuleChange = (ruleDetails: T.RuleDetails) => {\n    if (this.mounted) {\n      this.setState({ ruleDetails });\n    }\n  };\n\n  handleTagsChange = (tags: string[]) => {\n    // optimistic update\n    const oldTags = this.state.ruleDetails && this.state.ruleDetails.tags;\n    this.setState(state =>\n      state.ruleDetails ? { ruleDetails: { ...state.ruleDetails, tags } } : null\n    );\n    updateRule({\n      key: this.props.ruleKey,\n      tags: tags.join()\n    }).catch(() => {\n      if (this.mounted) {\n        this.setState(state =>\n          state.ruleDetails ? { ruleDetails: { ...state.ruleDetails, tags: oldTags } } : null\n        );\n      }\n    });\n  };\n\n  handleActivate = () => {\n    return this.fetchRuleDetails().then(() => {\n      const { ruleKey, selectedProfile } = this.props;\n      if (selectedProfile && this.state.actives) {\n        const active = this.state.actives.find(active => active.qProfile === selectedProfile.key);\n        if (active) {\n          this.props.onActivate(selectedProfile.key, ruleKey, active);\n        }\n      }\n    });\n  };\n\n  handleDeactivate = () => {\n    return this.fetchRuleDetails().then(() => {\n      const { ruleKey, selectedProfile } = this.props;\n      if (\n        selectedProfile &&\n        this.state.actives &&\n        !this.state.actives.find(active => active.qProfile === selectedProfile.key)\n      ) {\n        this.props.onDeactivate(selectedProfile.key, ruleKey);\n      }\n    });\n  };\n\n  handleDelete = () => {\n    return deleteRule({ key: this.props.ruleKey }).then(() =>\n      this.props.onDelete(this.props.ruleKey)\n    );\n  };\n\n  render() {\n    const { ruleDetails } = this.state;\n\n    if (!ruleDetails) {\n      return <div className=\"coding-rule-details\" />;\n    }\n\n    const { allowCustomRules, canWrite, hideQualityProfiles, referencedProfiles } = this.props;\n    const { params = [] } = ruleDetails;\n\n    const isCustom = !!ruleDetails.templateKey;\n    const isEditable = canWrite && !!this.props.allowCustomRules && isCustom;\n\n    return (\n      <div className=\"coding-rule-details\">\n        <DeferredSpinner loading={this.state.loading}>\n          <RuleDetailsMeta\n            canWrite={canWrite}\n            onFilterChange={this.props.onFilterChange}\n            onTagsChange={this.handleTagsChange}\n            referencedRepositories={this.props.referencedRepositories}\n            ruleDetails={ruleDetails}\n          />\n\n          <RuleDetailsDescription\n            canWrite={canWrite}\n            onChange={this.handleRuleChange}\n            ruleDetails={ruleDetails}\n          />\n\n          {params.length > 0 && <RuleDetailsParameters params={params} />}\n\n          {isEditable && (\n            <div className=\"coding-rules-detail-description display-flex-center\">\n              {/* `templateRule` is used to get rule meta data, `customRule` is used to get parameter values */}\n              {/* it's expected to pass the same rule to both parameters */}\n              <CustomRuleButton\n                customRule={ruleDetails}\n                onDone={this.handleRuleChange}\n                templateRule={ruleDetails}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"js-edit-custom\"\n                    id=\"coding-rules-detail-custom-rule-change\"\n                    onClick={onClick}>\n                    {translate('edit')}\n                  </Button>\n                )}\n              </CustomRuleButton>\n              <ConfirmButton\n                confirmButtonText={translate('delete')}\n                isDestructive={true}\n                modalBody={translateWithParameters(\n                  'coding_rules.delete.custom.confirm',\n                  ruleDetails.name\n                )}\n                modalHeader={translate('coding_rules.delete_rule')}\n                onConfirm={this.handleDelete}>\n                {({ onClick }) => (\n                  <>\n                    <Button\n                      className=\"button-red spacer-left js-delete\"\n                      id=\"coding-rules-detail-rule-delete\"\n                      onClick={onClick}>\n                      {translate('delete')}\n                    </Button>\n                    <HelpTooltip\n                      className=\"spacer-left\"\n                      overlay={\n                        <div className=\"big-padded-top big-padded-bottom\">\n                          {translate('coding_rules.custom_rule.removal')}\n                        </div>\n                      }\n                    />\n                  </>\n                )}\n              </ConfirmButton>\n            </div>\n          )}\n\n          {ruleDetails.isTemplate && (\n            <RuleDetailsCustomRules\n              canChange={allowCustomRules && canWrite}\n              ruleDetails={ruleDetails}\n            />\n          )}\n\n          {!ruleDetails.isTemplate && !hideQualityProfiles && (\n            <RuleDetailsProfiles\n              activations={this.state.actives}\n              canWrite={canWrite}\n              onActivate={this.handleActivate}\n              onDeactivate={this.handleDeactivate}\n              referencedProfiles={referencedProfiles}\n              ruleDetails={ruleDetails}\n            />\n          )}\n\n          {!ruleDetails.isTemplate && ruleDetails.type !== 'SECURITY_HOTSPOT' && (\n            <RuleDetailsIssues ruleDetails={ruleDetails} />\n          )}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { deactivateRule, Profile } from '../../../api/quality-profiles';\nimport TagsList from '../../../components/tags/TagsList';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport { Activation, Query } from '../query';\nimport ActivationButton from './ActivationButton';\nimport RuleInheritanceIcon from './RuleInheritanceIcon';\nimport SimilarRulesFilter from './SimilarRulesFilter';\n\ninterface Props {\n  activation?: Activation;\n  canWrite?: boolean;\n  isLoggedIn: boolean;\n  onActivate: (profile: string, rule: string, activation: Activation) => void;\n  onDeactivate: (profile: string, rule: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  onOpen: (ruleKey: string) => void;\n  rule: T.Rule;\n  selected: boolean;\n  selectedProfile?: Profile;\n}\n\nexport default class RuleListItem extends React.PureComponent<Props> {\n  handleDeactivate = () => {\n    if (this.props.selectedProfile) {\n      const data = {\n        key: this.props.selectedProfile.key,\n        rule: this.props.rule.key\n      };\n      deactivateRule(data).then(\n        () => this.props.onDeactivate(data.key, data.rule),\n        () => {}\n      );\n    }\n  };\n\n  handleActivate = (severity: string) => {\n    if (this.props.selectedProfile) {\n      this.props.onActivate(this.props.selectedProfile.key, this.props.rule.key, {\n        severity,\n        inherit: 'NONE'\n      });\n    }\n    return Promise.resolve();\n  };\n\n  handleNameClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    // cmd(ctrl) + click should open a rule permalink in a new tab\n    const isLeftClickEvent = event.button === 0;\n    const isModifiedEvent = !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n    if (isModifiedEvent || !isLeftClickEvent) {\n      return;\n    }\n\n    event.preventDefault();\n    this.props.onOpen(this.props.rule.key);\n  };\n\n  renderActivation = () => {\n    const { activation, selectedProfile } = this.props;\n    if (!activation) {\n      return null;\n    }\n\n    return (\n      <td className=\"coding-rule-table-meta-cell coding-rule-activation\">\n        <SeverityIcon severity={activation.severity} />\n        {selectedProfile && selectedProfile.parentName && (\n          <>\n            {activation.inherit === 'OVERRIDES' && (\n              <Tooltip\n                overlay={translateWithParameters(\n                  'coding_rules.overrides',\n                  selectedProfile.name,\n                  selectedProfile.parentName\n                )}>\n                <RuleInheritanceIcon\n                  className=\"little-spacer-left\"\n                  inheritance={activation.inherit}\n                />\n              </Tooltip>\n            )}\n            {activation.inherit === 'INHERITED' && (\n              <Tooltip\n                overlay={translateWithParameters(\n                  'coding_rules.inherits',\n                  selectedProfile.name,\n                  selectedProfile.parentName\n                )}>\n                <RuleInheritanceIcon\n                  className=\"little-spacer-left\"\n                  inheritance={activation.inherit}\n                />\n              </Tooltip>\n            )}\n          </>\n        )}\n      </td>\n    );\n  };\n\n  renderActions = () => {\n    const { activation, isLoggedIn, rule, selectedProfile } = this.props;\n    if (!selectedProfile || !isLoggedIn) {\n      return null;\n    }\n\n    const canCopy = selectedProfile.actions && selectedProfile.actions.copy;\n    if (selectedProfile.isBuiltIn && canCopy) {\n      return (\n        <td className=\"coding-rule-table-meta-cell coding-rule-activation-actions\">\n          <Tooltip overlay={translate('coding_rules.need_extend_or_copy')}>\n            <Button className=\"coding-rules-detail-quality-profile-deactivate button-red disabled\">\n              {translate('coding_rules', activation ? 'deactivate' : 'activate')}\n            </Button>\n          </Tooltip>\n        </td>\n      );\n    }\n\n    const canEdit = selectedProfile.actions && selectedProfile.actions.edit;\n    if (!canEdit) {\n      return null;\n    }\n\n    if (activation) {\n      return (\n        <td className=\"coding-rule-table-meta-cell coding-rule-activation-actions\">\n          {activation.inherit === 'NONE' ? (\n            <ConfirmButton\n              confirmButtonText={translate('yes')}\n              modalBody={translate('coding_rules.deactivate.confirm')}\n              modalHeader={translate('coding_rules.deactivate')}\n              onConfirm={this.handleDeactivate}>\n              {({ onClick }) => (\n                <Button\n                  className=\"coding-rules-detail-quality-profile-deactivate button-red\"\n                  onClick={onClick}>\n                  {translate('coding_rules.deactivate')}\n                </Button>\n              )}\n            </ConfirmButton>\n          ) : (\n            <Tooltip overlay={translate('coding_rules.can_not_deactivate')}>\n              <Button className=\"coding-rules-detail-quality-profile-deactivate button-red disabled\">\n                {translate('coding_rules.deactivate')}\n              </Button>\n            </Tooltip>\n          )}\n        </td>\n      );\n    }\n\n    return (\n      <td className=\"coding-rule-table-meta-cell coding-rule-activation-actions\">\n        {!rule.isTemplate && (\n          <ActivationButton\n            buttonText={translate('coding_rules.activate')}\n            className=\"coding-rules-detail-quality-profile-activate\"\n            modalHeader={translate('coding_rules.activate_in_quality_profile')}\n            onDone={this.handleActivate}\n            profiles={[selectedProfile]}\n            rule={rule}\n          />\n        )}\n      </td>\n    );\n  };\n\n  render() {\n    const { rule, selected } = this.props;\n    const allTags = [...(rule.tags || []), ...(rule.sysTags || [])];\n    return (\n      <div className={classNames('coding-rule', { selected })} data-rule={rule.key}>\n        <table className=\"coding-rule-table\">\n          <tbody>\n            <tr>\n              {this.renderActivation()}\n\n              <td>\n                <div className=\"coding-rule-title\">\n                  <Link\n                    className=\"link-no-underline\"\n                    onClick={this.handleNameClick}\n                    to={getRuleUrl(rule.key)}>\n                    {rule.name}\n                  </Link>\n                  {rule.isTemplate && (\n                    <Tooltip overlay={translate('coding_rules.rule_template.title')}>\n                      <span className=\"badge spacer-left\">\n                        {translate('coding_rules.rule_template')}\n                      </span>\n                    </Tooltip>\n                  )}\n                </div>\n              </td>\n\n              <td className=\"coding-rule-table-meta-cell\">\n                <div className=\"display-flex-center coding-rule-meta\">\n                  {rule.status !== 'READY' && (\n                    <span className=\"spacer-left badge badge-error\">\n                      {translate('rules.status', rule.status)}\n                    </span>\n                  )}\n                  <span className=\"display-inline-flex-center spacer-left note\">\n                    {rule.langName}\n                  </span>\n                  <Tooltip overlay={translate('coding_rules.type.tooltip', rule.type)}>\n                    <span className=\"display-inline-flex-center spacer-left note\">\n                      <IssueTypeIcon query={rule.type} />\n                      <span className=\"little-spacer-left text-middle\">\n                        {translate('issue.type', rule.type)}\n                      </span>\n                    </span>\n                  </Tooltip>\n                  {allTags.length > 0 && (\n                    <TagsList\n                      allowUpdate={false}\n                      className=\"display-inline-flex-center note spacer-left\"\n                      tags={allTags}\n                    />\n                  )}\n                  <SimilarRulesFilter onFilterChange={this.props.onFilterChange} rule={rule} />\n                </div>\n              </td>\n\n              {this.renderActions()}\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport { keyBy } from 'lodash';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { connect } from 'react-redux';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport BackIcon from 'sonar-ui-common/components/icons/BackIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  addSideBarClass,\n  addWhitePageClass,\n  removeSideBarClass,\n  removeWhitePageClass\n} from 'sonar-ui-common/helpers/pages';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { Profile, searchQualityProfiles } from '../../../api/quality-profiles';\nimport { getRulesApp, searchRules } from '../../../api/rules';\nimport A11ySkipTarget from '../../../app/components/a11y/A11ySkipTarget';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport FiltersHeader from '../../../components/common/FiltersHeader';\nimport ScreenPositionHelper from '../../../components/common/ScreenPositionHelper';\nimport '../../../components/search-navigator.css';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { getCurrentUser, getLanguages, Store } from '../../../store/rootReducer';\nimport { SecurityStandard } from '../../../types/security';\nimport {\n  shouldOpenSonarSourceSecurityFacet,\n  shouldOpenStandardsChildFacet,\n  shouldOpenStandardsFacet,\n  STANDARDS\n} from '../../issues/utils';\nimport {\n  Activation,\n  Actives,\n  areQueriesEqual,\n  FacetKey,\n  Facets,\n  getAppFacet,\n  getOpen,\n  getServerFacet,\n  hasRuleKey,\n  OpenFacets,\n  parseQuery,\n  Query,\n  serializeQuery,\n  shouldRequestFacet\n} from '../query';\nimport '../styles.css';\nimport BulkChange from './BulkChange';\nimport FacetsList from './FacetsList';\nimport PageActions from './PageActions';\nimport RuleDetails from './RuleDetails';\nimport RuleListItem from './RuleListItem';\n\nconst PAGE_SIZE = 100;\nconst MAX_SEARCH_LENGTH = 200;\nconst LIMIT_BEFORE_LOAD_MORE = 5;\n\ninterface Props extends WithRouterProps {\n  currentUser: T.CurrentUser;\n  languages: T.Languages;\n}\n\ninterface State {\n  actives?: Actives;\n  canWrite?: boolean;\n  facets?: Facets;\n  loading: boolean;\n  openFacets: OpenFacets;\n  openRule?: T.Rule;\n  paging?: T.Paging;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  rules: T.Rule[];\n  selected?: string;\n  usingPermalink?: boolean;\n}\n\nexport class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const query = parseQuery(props.location.query);\n    this.state = {\n      loading: true,\n      openFacets: {\n        languages: true,\n        owaspTop10: shouldOpenStandardsChildFacet({}, query, SecurityStandard.OWASP_TOP10),\n        sansTop25: shouldOpenStandardsChildFacet({}, query, SecurityStandard.SANS_TOP25),\n        sonarsourceSecurity: shouldOpenSonarSourceSecurityFacet({}, query),\n        standards: shouldOpenStandardsFacet({}, query),\n        types: true\n      },\n      query,\n      referencedProfiles: {},\n      referencedRepositories: {},\n      rules: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    addWhitePageClass();\n    addSideBarClass();\n    this.attachShortcuts();\n    this.fetchInitialData();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    this.setState(({ rules, selected }) => {\n      const openRule = this.getOpenRule(nextProps, rules);\n      return {\n        openRule,\n        usingPermalink: hasRuleKey(nextProps.location.query),\n        query: parseQuery(nextProps.location.query),\n        selected: openRule ? openRule.key : selected\n      };\n    });\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (!areQueriesEqual(prevProps.location.query, this.props.location.query)) {\n      this.fetchFirstRules();\n    }\n    if (\n      !this.state.openRule &&\n      (prevState.selected !== this.state.selected || prevState.openRule)\n    ) {\n      // if user simply selected another issue\n      // or if user went from the source code back to the list of issues\n      this.scrollToSelectedRule();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    removeWhitePageClass();\n    removeSideBarClass();\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    key.setScope('coding-rules');\n    key('up', 'coding-rules', () => {\n      this.selectPreviousRule();\n      return false;\n    });\n    key('down', 'coding-rules', () => {\n      this.selectNextRule();\n      return false;\n    });\n    key('right', 'coding-rules', () => {\n      this.openSelectedRule();\n      return false;\n    });\n    key('left', 'coding-rules', () => {\n      this.handleBack();\n      return false;\n    });\n  };\n\n  detachShortcuts = () => key.deleteScope('coding-rules');\n\n  getOpenRule = (props: Props, rules: T.Rule[]) => {\n    const open = getOpen(props.location.query);\n    return open && rules.find(rule => rule.key === open);\n  };\n\n  getFacetsToFetch = () => {\n    const { openFacets } = this.state;\n    return Object.keys(openFacets)\n      .filter((facet: FacetKey) => openFacets[facet])\n      .filter((facet: FacetKey) => shouldRequestFacet(facet))\n      .map((facet: FacetKey) => getServerFacet(facet));\n  };\n\n  getFieldsToFetch = () => {\n    const fields = [\n      'isTemplate',\n      'name',\n      'lang',\n      'langName',\n      'severity',\n      'status',\n      'sysTags',\n      'tags',\n      'templateKey'\n    ];\n    if (this.state.query.profile) {\n      fields.push('actives', 'params');\n    }\n    return fields;\n  };\n\n  getSearchParameters = () => ({\n    f: this.getFieldsToFetch().join(),\n    facets: this.getFacetsToFetch().join(),\n    ps: PAGE_SIZE,\n    s: 'name',\n    ...serializeQuery(this.state.query)\n  });\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  fetchInitialData = () => {\n    this.setState({ loading: true });\n    Promise.all([getRulesApp(), searchQualityProfiles()]).then(\n      ([{ canWrite, repositories }, { profiles }]) => {\n        this.setState({\n          canWrite,\n          referencedProfiles: keyBy(profiles, 'key'),\n          referencedRepositories: keyBy(repositories, 'key')\n        });\n        this.fetchFirstRules();\n      },\n      this.stopLoading\n    );\n  };\n\n  makeFetchRequest = (query?: T.RawQuery) =>\n    searchRules({ ...this.getSearchParameters(), ...query }).then(\n      ({ actives: rawActives, facets: rawFacets, p, ps, rules, total }) => {\n        const actives = rawActives && parseActives(rawActives);\n        const facets = rawFacets && parseFacets(rawFacets);\n        const paging = { pageIndex: p, pageSize: ps, total };\n        return { actives, facets, paging, rules };\n      }\n    );\n\n  fetchFirstRules = (query?: T.RawQuery) => {\n    this.setState({ loading: true });\n    this.makeFetchRequest(query).then(({ actives, facets, paging, rules }) => {\n      if (this.mounted) {\n        const openRule = this.getOpenRule(this.props, rules);\n        const usingPermalink = hasRuleKey(this.props.location.query);\n        const selected = rules.length > 0 ? (openRule && openRule.key) || rules[0].key : undefined;\n        this.setState({\n          actives,\n          facets,\n          loading: false,\n          openRule,\n          paging,\n          rules,\n          selected,\n          usingPermalink\n        });\n      }\n    }, this.stopLoading);\n  };\n\n  fetchMoreRules = () => {\n    const { paging } = this.state;\n    if (paging) {\n      this.setState({ loading: true });\n      const nextPage = paging.pageIndex + 1;\n      this.makeFetchRequest({ p: nextPage, facets: undefined }).then(\n        ({ actives, paging, rules }) => {\n          if (this.mounted) {\n            this.setState((state: State) => ({\n              actives: { ...state.actives, ...actives },\n              loading: false,\n              paging,\n              rules: [...state.rules, ...rules]\n            }));\n          }\n        },\n        this.stopLoading\n      );\n    }\n  };\n\n  fetchFacet = (facet: FacetKey) => {\n    this.makeFetchRequest({ ps: 1, facets: getServerFacet(facet) }).then(({ facets }) => {\n      if (this.mounted) {\n        this.setState(state => ({ facets: { ...state.facets, ...facets }, loading: false }));\n      }\n    }, this.stopLoading);\n  };\n\n  getSelectedIndex = ({ selected, rules } = this.state) => {\n    const index = rules.findIndex(rule => rule.key === selected);\n    return index !== -1 ? index : undefined;\n  };\n\n  selectNextRule = () => {\n    const { rules, loading, paging } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (selectedIndex !== undefined) {\n      if (\n        selectedIndex > rules.length - LIMIT_BEFORE_LOAD_MORE &&\n        !loading &&\n        paging &&\n        rules.length < paging.total\n      ) {\n        this.fetchMoreRules();\n      }\n      if (rules && selectedIndex < rules.length - 1) {\n        if (this.state.openRule) {\n          this.openRule(rules[selectedIndex + 1].key);\n        } else {\n          this.setState({ selected: rules[selectedIndex + 1].key });\n        }\n      }\n    }\n  };\n\n  selectPreviousRule = () => {\n    const { rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (rules && selectedIndex !== undefined && selectedIndex > 0) {\n      if (this.state.openRule) {\n        this.openRule(rules[selectedIndex - 1].key);\n      } else {\n        this.setState({ selected: rules[selectedIndex - 1].key });\n      }\n    }\n  };\n\n  getRulePath = (rule: string) => ({\n    pathname: this.props.location.pathname,\n    query: { ...serializeQuery(this.state.query), open: rule }\n  });\n\n  openRule = (rule: string) => {\n    const path = this.getRulePath(rule);\n    if (this.state.openRule) {\n      this.props.router.replace(path);\n    } else {\n      this.props.router.push(path);\n    }\n  };\n\n  openSelectedRule = () => {\n    const { selected } = this.state;\n    if (selected) {\n      this.openRule(selected);\n    }\n  };\n\n  closeRule = () => {\n    this.props.router.push({\n      pathname: this.props.location.pathname,\n      query: {\n        ...serializeQuery(this.state.query),\n        open: undefined\n      }\n    });\n    this.scrollToSelectedRule(false);\n  };\n\n  scrollToSelectedRule = (smooth = true) => {\n    const { selected } = this.state;\n    if (selected) {\n      const element = document.querySelector(`[data-rule=\"${selected}\"]`);\n      if (element) {\n        scrollToElement(element, { topOffset: 150, bottomOffset: 100, smooth });\n      }\n    }\n  };\n\n  getRuleActivation = (rule: string) => {\n    const { actives, query } = this.state;\n    if (actives && actives[rule] && query.profile) {\n      return actives[rule][query.profile];\n    } else {\n      return undefined;\n    }\n  };\n\n  getSelectedProfile = () => {\n    const { query, referencedProfiles } = this.state;\n    if (query.profile) {\n      return referencedProfiles[query.profile];\n    } else {\n      return undefined;\n    }\n  };\n\n  closeFacet = (facet: string) =>\n    this.setState(state => ({\n      openFacets: { ...state.openFacets, [facet]: false }\n    }));\n\n  handleRuleOpen = (ruleKey: string) => {\n    this.props.router.push(this.getRulePath(ruleKey));\n  };\n\n  handleBack = (event?: React.SyntheticEvent<HTMLAnchorElement>) => {\n    const { usingPermalink } = this.state;\n\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n\n    if (usingPermalink) {\n      this.handleReset();\n    } else {\n      this.closeRule();\n    }\n  };\n\n  handleFilterChange = (changes: Partial<Query>) => {\n    this.props.router.push({\n      pathname: this.props.location.pathname,\n      query: serializeQuery({ ...this.state.query, ...changes })\n    });\n\n    this.setState(({ openFacets }) => ({\n      openFacets: {\n        ...openFacets,\n        sonarsourceSecurity: shouldOpenSonarSourceSecurityFacet(openFacets, changes),\n        standards: shouldOpenStandardsFacet(openFacets, changes)\n      }\n    }));\n  };\n\n  handleFacetToggle = (property: string) => {\n    this.setState(state => {\n      const willOpenProperty = !state.openFacets[property];\n      const newState = {\n        loading: state.loading,\n        openFacets: { ...state.openFacets, [property]: willOpenProperty }\n      };\n\n      // Try to open sonarsource security \"subfacet\" by default if the standard facet is open\n      if (willOpenProperty && property === STANDARDS) {\n        newState.openFacets.sonarsourceSecurity = shouldOpenSonarSourceSecurityFacet(\n          newState.openFacets,\n          state.query\n        );\n        // Force loading of sonarsource security facet data\n        property = newState.openFacets.sonarsourceSecurity ? 'sonarsourceSecurity' : property;\n      }\n\n      if (shouldRequestFacet(property) && (!state.facets || !state.facets[property])) {\n        newState.loading = true;\n        this.fetchFacet(property);\n      }\n\n      return newState;\n    });\n  };\n\n  handleReload = () => this.fetchFirstRules();\n\n  handleReset = () => this.props.router.push({ pathname: this.props.location.pathname });\n\n  /** Tries to take rule by index, or takes the last one  */\n  pickRuleAround = (rules: T.Rule[], selectedIndex: number | undefined) => {\n    if (selectedIndex === undefined || rules.length === 0) {\n      return undefined;\n    }\n    if (selectedIndex >= 0 && selectedIndex < rules.length) {\n      return rules[selectedIndex].key;\n    }\n    return rules[rules.length - 1].key;\n  };\n\n  handleRuleDelete = (ruleKey: string) => {\n    if (this.state.query.ruleKey === ruleKey) {\n      this.handleReset();\n    } else {\n      this.setState(state => {\n        const rules = state.rules.filter(rule => rule.key !== ruleKey);\n        const selectedIndex = this.getSelectedIndex(state);\n        const selected = this.pickRuleAround(rules, selectedIndex);\n        return { rules, selected };\n      });\n      this.closeRule();\n    }\n  };\n\n  handleRuleActivate = (profile: string, rule: string, activation: Activation) =>\n    this.setState((state: State) => {\n      const { actives = {} } = state;\n      if (!actives[rule]) {\n        return { actives: { ...actives, [rule]: { [profile]: activation } } };\n      }\n\n      return { actives: { ...actives, [rule]: { ...actives[rule], [profile]: activation } } };\n    });\n\n  handleRuleDeactivate = (profile: string, rule: string) =>\n    this.setState(state => {\n      const { actives } = state;\n      if (actives && actives[rule]) {\n        const newRule = { ...actives[rule] };\n        delete newRule[profile];\n        return { actives: { ...actives, [rule]: newRule } };\n      }\n      return null;\n    });\n\n  handleSearch = (searchQuery: string) => this.handleFilterChange({ searchQuery });\n\n  isFiltered = () => Object.keys(serializeQuery(this.state.query)).length > 0;\n\n  renderBulkButton = () => {\n    const { currentUser, languages } = this.props;\n    const { canWrite, paging, query, referencedProfiles } = this.state;\n\n    if (!isLoggedIn(currentUser) || !canWrite) {\n      return null;\n    }\n\n    return (\n      paging && (\n        <BulkChange\n          languages={languages}\n          query={query}\n          referencedProfiles={referencedProfiles}\n          total={paging.total}\n        />\n      )\n    );\n  };\n\n  render() {\n    const { paging, rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n\n    return (\n      <>\n        <Suggestions suggestions=\"coding_rules\" />\n        <Helmet defer={false} title={translate('coding_rules.page')}>\n          <meta content=\"noindex\" name=\"robots\" />\n        </Helmet>\n        <div className=\"layout-page\" id=\"coding-rules-page\">\n          <ScreenPositionHelper className=\"layout-page-side-outer\">\n            {({ top }) => (\n              <div className=\"layout-page-side\" style={{ top }}>\n                <div className=\"layout-page-side-inner\">\n                  <div className=\"layout-page-filters\">\n                    <A11ySkipTarget\n                      anchor=\"rules_filters\"\n                      label={translate('coding_rules.skip_to_filters')}\n                      weight={10}\n                    />\n                    <FiltersHeader displayReset={this.isFiltered()} onReset={this.handleReset} />\n                    <SearchBox\n                      className=\"spacer-bottom\"\n                      id=\"coding-rules-search\"\n                      maxLength={MAX_SEARCH_LENGTH}\n                      minLength={2}\n                      onChange={this.handleSearch}\n                      placeholder={translate('search.search_for_rules')}\n                      value={this.state.query.searchQuery || ''}\n                    />\n                    <FacetsList\n                      facets={this.state.facets}\n                      onFacetToggle={this.handleFacetToggle}\n                      onFilterChange={this.handleFilterChange}\n                      openFacets={this.state.openFacets}\n                      query={this.state.query}\n                      referencedProfiles={this.state.referencedProfiles}\n                      referencedRepositories={this.state.referencedRepositories}\n                      selectedProfile={this.getSelectedProfile()}\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n          </ScreenPositionHelper>\n\n          <div className=\"layout-page-main\">\n            <div className=\"layout-page-header-panel layout-page-main-header\">\n              <div className=\"layout-page-header-panel-inner layout-page-main-header-inner\">\n                <div className=\"layout-page-main-inner\">\n                  <A11ySkipTarget anchor=\"rules_main\" />\n                  <div className=\"display-flex-space-between\">\n                    {this.state.openRule ? (\n                      <a\n                        className=\"js-back display-inline-flex-center link-no-underline\"\n                        href=\"#\"\n                        onClick={this.handleBack}>\n                        <BackIcon className=\"spacer-right\" />\n                        {this.state.usingPermalink\n                          ? translate('coding_rules.see_all')\n                          : translate('coding_rules.return_to_list')}\n                      </a>\n                    ) : (\n                      this.renderBulkButton()\n                    )}\n                    {!this.state.usingPermalink && (\n                      <PageActions\n                        loading={this.state.loading}\n                        onReload={this.handleReload}\n                        paging={paging}\n                        selectedIndex={selectedIndex}\n                      />\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"layout-page-main-inner\">\n              {this.state.openRule ? (\n                <RuleDetails\n                  allowCustomRules={true}\n                  canWrite={this.state.canWrite}\n                  onActivate={this.handleRuleActivate}\n                  onDeactivate={this.handleRuleDeactivate}\n                  onDelete={this.handleRuleDelete}\n                  onFilterChange={this.handleFilterChange}\n                  referencedProfiles={this.state.referencedProfiles}\n                  referencedRepositories={this.state.referencedRepositories}\n                  ruleKey={this.state.openRule.key}\n                  selectedProfile={this.getSelectedProfile()}\n                />\n              ) : (\n                <>\n                  {rules.map(rule => (\n                    <RuleListItem\n                      activation={this.getRuleActivation(rule.key)}\n                      canWrite={this.state.canWrite}\n                      isLoggedIn={isLoggedIn(this.props.currentUser)}\n                      key={rule.key}\n                      onActivate={this.handleRuleActivate}\n                      onDeactivate={this.handleRuleDeactivate}\n                      onFilterChange={this.handleFilterChange}\n                      onOpen={this.handleRuleOpen}\n                      rule={rule}\n                      selected={rule.key === this.state.selected}\n                      selectedProfile={this.getSelectedProfile()}\n                    />\n                  ))}\n                  {paging !== undefined && (\n                    <ListFooter\n                      count={rules.length}\n                      loadMore={this.fetchMoreRules}\n                      ready={!this.state.loading}\n                      total={paging.total}\n                    />\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nfunction parseActives(rawActives: T.Dict<T.RuleActivation[]>) {\n  const actives: Actives = {};\n  for (const [rule, activations] of Object.entries(rawActives)) {\n    actives[rule] = {};\n    for (const { inherit, qProfile, severity } of activations) {\n      actives[rule][qProfile] = { inherit, severity };\n    }\n  }\n  return actives;\n}\n\nfunction parseFacets(rawFacets: { property: string; values: { count: number; val: string }[] }[]) {\n  const facets: Facets = {};\n  for (const rawFacet of rawFacets) {\n    const values: T.Dict<number> = {};\n    for (const rawValue of rawFacet.values) {\n      values[rawValue.val] = rawValue.count;\n    }\n    facets[getAppFacet(rawFacet.property)] = values;\n  }\n  return facets;\n}\n\nconst mapStateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state),\n  languages: getLanguages(state)\n});\n\nexport default withRouter(connect(mapStateToProps)(App));\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport { csvEscape } from 'sonar-ui-common/helpers/csv';\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Exporter, ProfileChangelogEvent } from '../apps/quality-profiles/types';\n\nexport interface ProfileActions {\n  associateProjects?: boolean;\n  copy?: boolean;\n  delete?: boolean;\n  edit?: boolean;\n  setAsDefault?: boolean;\n}\n\nexport interface Actions {\n  create?: boolean;\n}\n\nexport interface Profile {\n  actions?: ProfileActions;\n  key: string;\n  name: string;\n  language: string;\n  languageName: string;\n  isInherited?: boolean;\n  parentKey?: string;\n  parentName?: string;\n  isDefault?: boolean;\n  activeRuleCount: number;\n  activeDeprecatedRuleCount: number;\n  rulesUpdatedAt?: string;\n  lastUsed?: string;\n  userUpdatedAt?: string;\n  isBuiltIn?: boolean;\n  projectCount?: number;\n}\n\nexport interface SearchQualityProfilesParameters {\n  defaults?: boolean;\n  language?: string;\n  project?: string;\n  qualityProfile?: string;\n}\n\nexport interface SearchQualityProfilesResponse {\n  actions?: Actions;\n  profiles: Profile[];\n}\n\nexport function searchQualityProfiles(\n  parameters?: SearchQualityProfilesParameters\n): Promise<SearchQualityProfilesResponse> {\n  return getJSON('/api/qualityprofiles/search', parameters).catch(throwGlobalError);\n}\n\nexport function getQualityProfile({\n  compareToSonarWay,\n  profile: { key }\n}: {\n  compareToSonarWay?: boolean;\n  profile: Profile;\n}): Promise<any> {\n  return getJSON('/api/qualityprofiles/show', { compareToSonarWay, key });\n}\n\nexport function createQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/create', data).catch(throwGlobalError);\n}\n\nexport function restoreQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/restore', data).catch(throwGlobalError);\n}\n\nexport interface ProfileProject {\n  key: string;\n  name: string;\n  selected: boolean;\n}\n\nexport function getProfileProjects(\n  data: RequestData\n): Promise<{ more: boolean; paging: T.Paging; results: ProfileProject[] }> {\n  return getJSON('/api/qualityprofiles/projects', data).catch(throwGlobalError);\n}\n\nexport function getProfileInheritance({\n  language,\n  name: qualityProfile\n}: Profile): Promise<{\n  ancestors: T.ProfileInheritanceDetails[];\n  children: T.ProfileInheritanceDetails[];\n  profile: T.ProfileInheritanceDetails;\n}> {\n  return getJSON('/api/qualityprofiles/inheritance', {\n    language,\n    qualityProfile\n  }).catch(throwGlobalError);\n}\n\nexport function setDefaultProfile({ language, name: qualityProfile }: Profile) {\n  return post('/api/qualityprofiles/set_default', {\n    language,\n    qualityProfile\n  });\n}\n\nexport function renameProfile(key: string, name: string) {\n  return post('/api/qualityprofiles/rename', { key, name }).catch(throwGlobalError);\n}\n\nexport function copyProfile(fromKey: string, toName: string): Promise<any> {\n  return postJSON('/api/qualityprofiles/copy', { fromKey, toName }).catch(throwGlobalError);\n}\n\nexport function deleteProfile({ language, name: qualityProfile }: Profile) {\n  return post('/api/qualityprofiles/delete', { language, qualityProfile }).catch(throwGlobalError);\n}\n\nexport function changeProfileParent(\n  { language, name: qualityProfile }: Profile,\n  parentProfile?: Profile\n) {\n  return post('/api/qualityprofiles/change_parent', {\n    language,\n    qualityProfile,\n    parentQualityProfile: parentProfile ? parentProfile.name : undefined\n  }).catch(throwGlobalError);\n}\n\nexport function getQualityProfileBackupUrl({ language, name: qualityProfile }: Profile) {\n  const queryParams = Object.entries({ language, qualityProfile })\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n  return `/api/qualityprofiles/backup?${queryParams}`;\n}\n\nexport function getQualityProfileExporterUrl(\n  { key: exporterKey }: Exporter,\n  { language, name: qualityProfile }: Profile\n) {\n  const queryParams = Object.entries({ exporterKey, language, qualityProfile })\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n  return `/api/qualityprofiles/export?${queryParams}`;\n}\n\nexport function getImporters(): Promise<\n  Array<{ key: string; languages: Array<string>; name: string }>\n> {\n  return getJSON('/api/qualityprofiles/importers').then(r => r.importers, throwGlobalError);\n}\n\nexport function getExporters(): Promise<any> {\n  return getJSON('/api/qualityprofiles/exporters').then(r => r.exporters);\n}\n\nexport function getProfileChangelog(\n  since: any,\n  to: any,\n  { language, name: qualityProfile }: Profile,\n  page?: number\n): Promise<{\n  events: ProfileChangelogEvent[];\n  p: number;\n  ps: number;\n  total: number;\n}> {\n  return getJSON('/api/qualityprofiles/changelog', {\n    since,\n    to,\n    language,\n    qualityProfile,\n    p: page\n  });\n}\n\nexport interface CompareResponse {\n  left: { name: string };\n  right: { name: string };\n  inLeft: Array<{ key: string; name: string; severity: string }>;\n  inRight: Array<{ key: string; name: string; severity: string }>;\n  modified: Array<{\n    key: string;\n    name: string;\n    left: { params: T.Dict<string>; severity: string };\n    right: { params: T.Dict<string>; severity: string };\n  }>;\n}\n\nexport function compareProfiles(leftKey: string, rightKey: string): Promise<CompareResponse> {\n  return getJSON('/api/qualityprofiles/compare', { leftKey, rightKey });\n}\n\nexport function associateProject({ language, name: qualityProfile }: Profile, project: string) {\n  return post('/api/qualityprofiles/add_project', {\n    language,\n    qualityProfile,\n    project\n  }).catch(throwGlobalError);\n}\n\nexport function dissociateProject({ language, name: qualityProfile }: Profile, project: string) {\n  return post('/api/qualityprofiles/remove_project', {\n    language,\n    qualityProfile,\n    project\n  }).catch(throwGlobalError);\n}\n\nexport interface SearchUsersGroupsParameters {\n  language: string;\n  qualityProfile: string;\n  q?: string;\n  selected?: 'all' | 'selected' | 'deselected';\n}\n\ninterface SearchUsersResponse {\n  users: T.UserSelected[];\n  paging: T.Paging;\n}\n\nexport function searchUsers(parameters: SearchUsersGroupsParameters): Promise<SearchUsersResponse> {\n  return getJSON('/api/qualityprofiles/search_users', parameters).catch(throwGlobalError);\n}\n\nexport interface SearchGroupsResponse {\n  groups: Array<{ name: string }>;\n  paging: T.Paging;\n}\n\nexport function searchGroups(\n  parameters: SearchUsersGroupsParameters\n): Promise<SearchGroupsResponse> {\n  return getJSON('/api/qualityprofiles/search_groups', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveUserParameters {\n  language: string;\n  login: string;\n  qualityProfile: string;\n}\n\nexport function addUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_user', parameters).catch(throwGlobalError);\n}\n\nexport function removeUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_user', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveGroupParameters {\n  group: string;\n  language: string;\n  qualityProfile: string;\n}\n\nexport function addGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_group', parameters).catch(throwGlobalError);\n}\n\nexport function removeGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_group', parameters).catch(throwGlobalError);\n}\n\nexport interface BulkActivateParameters {\n  activation?: boolean;\n  active_severities?: string;\n  asc?: boolean;\n  available_since?: string;\n  compareToProfile?: string;\n  inheritance?: string;\n  is_template?: string;\n  languages?: string;\n  q?: string;\n  qprofile?: string;\n  repositories?: string;\n  rule_key?: string;\n  s?: string;\n  severities?: string;\n  statuses?: string;\n  tags?: string;\n  targetKey: string;\n  targetSeverity?: string;\n  template_key?: string;\n  types?: string;\n}\n\nexport function bulkActivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/activate_rules', data);\n}\n\nexport function bulkDeactivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/deactivate_rules', data);\n}\n\nexport function activateRule(data: {\n  key: string;\n  params?: T.Dict<string>;\n  reset?: boolean;\n  rule: string;\n  severity?: string;\n}) {\n  const params =\n    data.params && map(data.params, (value, key) => `${key}=${csvEscape(value)}`).join(';');\n  return post('/api/qualityprofiles/activate_rule', { ...data, params }).catch(throwGlobalError);\n}\n\nexport function deactivateRule(data: { key: string; rule: string }) {\n  return post('/api/qualityprofiles/deactivate_rule', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  severity: string;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\n\nexport function sanitizeStringRestricted(html: string) {\n  return sanitize(html, {\n    ALLOWED_TAGS: ['b', 'br', 'code', 'i', 'li', 'p', 'strong', 'ul', 'a'],\n    ALLOWED_ATTR: ['target', 'href']\n  });\n}\n\nexport function sanitizeString(html: string) {\n  return sanitize(html, { USE_PROFILES: { html: true } });\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: React.ReactNode;\n  property: string;\n}\n\nexport default function FacetBox(props: Props) {\n  return (\n    <div\n      className={classNames('search-navigator-facet-box', props.className)}\n      data-property={props.property}>\n      {props.children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport OpenCloseIcon from 'sonar-ui-common/components/icons/OpenCloseIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  children?: React.ReactNode;\n  fetching?: boolean;\n  helper?: string;\n  name: React.ReactNode;\n  onClear?: () => void;\n  onClick?: () => void;\n  open: boolean;\n  values?: string[];\n}\n\nexport default class FacetHeader extends React.PureComponent<Props> {\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.onClick) {\n      this.props.onClick();\n    }\n  };\n\n  renderHelper() {\n    if (!this.props.helper) {\n      return null;\n    }\n    return <HelpTooltip className=\"spacer-left\" overlay={this.props.helper} />;\n  }\n\n  renderValueIndicator() {\n    const { values } = this.props;\n    if (!values || !values.length) {\n      return null;\n    }\n    const value =\n      values.length === 1 ? values[0] : translateWithParameters('x_selected', values.length);\n    return (\n      <span className=\"badge text-ellipsis\" title={value}>\n        {value}\n      </span>\n    );\n  }\n\n  render() {\n    const showClearButton =\n      this.props.values != null && this.props.values.length > 0 && this.props.onClear != null;\n\n    return (\n      <div className=\"search-navigator-facet-header-wrapper display-flex-center\">\n        {this.props.onClick ? (\n          <span className=\"search-navigator-facet-header display-flex-center\">\n            <a href=\"#\" onClick={this.handleClick}>\n              <OpenCloseIcon className=\"little-spacer-right\" open={this.props.open} />\n              {this.props.name}\n            </a>\n            {this.renderHelper()}\n          </span>\n        ) : (\n          <span className=\"search-navigator-facet-header display-flex-center\">\n            {this.props.name}\n            {this.renderHelper()}\n          </span>\n        )}\n\n        {this.props.children}\n\n        <span className=\"search-navigator-facet-header-value spacer-left spacer-right \">\n          {this.renderValueIndicator()}\n        </span>\n\n        {this.props.fetching && (\n          <span className=\"little-spacer-right\">\n            <DeferredSpinner />\n          </span>\n        )}\n\n        {showClearButton && (\n          <Button\n            className=\"search-navigator-facet-header-button button-small button-red\"\n            onClick={this.props.onClear}>\n            {translate('clear')}\n          </Button>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\n\nexport interface Props {\n  active?: boolean;\n  className?: string;\n  disabled?: boolean;\n  halfWidth?: boolean;\n  name: React.ReactNode;\n  onClick: (x: string, multiple?: boolean) => void;\n  stat?: React.ReactNode;\n  /** Textual version of `name` */\n  tooltip?: string;\n  value: string;\n}\n\nexport default class FacetItem extends React.PureComponent<Props> {\n  static defaultProps = {\n    disabled: false,\n    halfWidth: false,\n    loading: false\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClick(this.props.value, event.ctrlKey || event.metaKey);\n  };\n\n  renderValue() {\n    if (this.props.stat == null) {\n      return null;\n    }\n\n    return <span className=\"facet-stat\">{this.props.stat}</span>;\n  }\n\n  render() {\n    const { name } = this.props;\n    const className = classNames('search-navigator-facet', this.props.className, {\n      active: this.props.active,\n      'search-navigator-facet-half': this.props.halfWidth\n    });\n\n    return this.props.disabled ? (\n      <span className={className} data-facet={this.props.value} title={this.props.tooltip}>\n        <span className=\"facet-name\">{name}</span>\n        {this.renderValue()}\n      </span>\n    ) : (\n      <a\n        className={className}\n        data-facet={this.props.value}\n        href=\"#\"\n        onClick={this.handleClick}\n        title={this.props.tooltip}>\n        <span className=\"facet-name\">{name}</span>\n        {this.renderValue()}\n      </a>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\ninterface Props {\n  children?: React.ReactNode;\n  title?: string;\n}\n\nexport default function FacetItemsList({ children, title }: Props) {\n  return (\n    <div className=\"search-navigator-facet-list\">\n      {title && <div className=\"search-navigator-facet-list-title\">{title}</div>}\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface MultiSelectOptionProps {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (element: string) => void;\n  onSelectChange: (selected: boolean, element: string) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default function MultiSelectOption(props: MultiSelectOptionProps) {\n  const { active, custom, disabled, element, selected } = props;\n  const onHover = () => props.onHover(element);\n  const className = classNames({ active, disabled });\n  const label = props.renderLabel(element);\n\n  return (\n    <li onFocus={onHover} onMouseOver={onHover}>\n      <Checkbox\n        checked={Boolean(selected)}\n        className={className}\n        disabled={disabled}\n        id={element}\n        onCheck={props.onSelectChange}>\n        {custom ? (\n          <span\n            aria-label={`${translate('create_new_element')}: ${label}`}\n            className=\"little-spacer-left\">\n            <span aria-hidden={true} className=\"little-spacer-right\">\n              +\n            </span>\n            {label}\n          </span>\n        ) : (\n          <span className=\"little-spacer-left\">{label}</span>\n        )}\n      </Checkbox>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelectOption from './MultiSelectOption';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (selected: boolean, item: string) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement && selectedElements.length < 1 && unselectedElements.length < 1 && (\n            <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n          )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport DetachIcon from 'sonar-ui-common/components/icons/DetachIcon';\nimport { isWebUri } from 'valid-url';\n\nexport interface DocumentationTooltipProps {\n  children?: React.ReactNode;\n  className?: string;\n  content?: React.ReactNode;\n  links?: Array<{ href: string; label: string; inPlace?: boolean }>;\n  title?: string;\n}\n\nexport default function DocumentationTooltip(props: DocumentationTooltipProps) {\n  const { className, content, links, title } = props;\n\n  return (\n    <HelpTooltip\n      className={className}\n      overlay={\n        <div className=\"big-padded-top big-padded-bottom\">\n          {title && (\n            <div className=\"spacer-bottom\">\n              <strong>{title}</strong>\n            </div>\n          )}\n\n          {content && <p>{content}</p>}\n\n          {links && (\n            <>\n              <hr className=\"big-spacer-top big-spacer-bottom\" />\n\n              {links.map(({ href, label, inPlace }) => (\n                <div className=\"little-spacer-bottom\" key={label}>\n                  {inPlace ? (\n                    <Link to={href}>\n                      <span>{label}</span>\n                    </Link>\n                  ) : (\n                    <a\n                      className=\"display-inline-flex-center link-with-icon\"\n                      href={href}\n                      rel=\"noopener noreferrer\"\n                      target=\"_blank\">\n                      {isWebUri(href) && <DetachIcon size={14} className=\"spacer-right\" />}\n                      <span>{label}</span>\n                    </a>\n                  )}\n                </div>\n              ))}\n            </>\n          )}\n        </div>\n      }>\n      {props.children}\n    </HelpTooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span\n      aria-label={translateWithParameters('tags_list_x', tags.join(', '))}\n      className={classNames('tags-list', className)}>\n      <TagsIcon className=\"text-middle\" />\n      <span aria-hidden={true} className=\"text-ellipsis text-middle\" title={tags.join(', ')}>\n        {tags.join(', ')}\n      </span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getFormattingHelpUrl } from '../../helpers/urls';\n\ninterface Props {\n  className?: string;\n}\n\nexport default class FormattingTips extends React.PureComponent<Props> {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(\n      getFormattingHelpUrl(),\n      'Formatting',\n      'height=300,width=600,scrollbars=1,resizable=1'\n    );\n  }\n\n  render() {\n    return (\n      <div className={classNames('markdown-tips', this.props.className)}>\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('formatting.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">\n          ``\n          {translate('code')}\n          ``\n        </span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  className?: string;\n  count: number;\n  showMore: () => void;\n  showLess: (() => void) | undefined;\n  total: number;\n}\n\nexport default class ListStyleFacetFooter extends React.PureComponent<Props> {\n  handleShowMoreClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.showMore();\n  };\n\n  handleShowLessClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.showLess) {\n      this.props.showLess();\n    }\n  };\n\n  render() {\n    const { count, total } = this.props;\n    const hasMore = total > count;\n    const allShown = Boolean(total && total === count);\n\n    return (\n      <footer className=\"note spacer-top spacer-bottom text-center\">\n        {translateWithParameters('x_show', formatMeasure(count, 'INT', null))}\n\n        {hasMore && (\n          <a className=\"spacer-left text-muted\" href=\"#\" onClick={this.handleShowMoreClick}>\n            {translate('show_more')}\n          </a>\n        )}\n\n        {this.props.showLess && allShown && (\n          <a className=\"spacer-left text-muted\" href=\"#\" onClick={this.handleShowLessClick}>\n            {translate('show_less')}\n          </a>\n        )}\n      </footer>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sortBy, without } from 'lodash';\nimport * as React from 'react';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { queriesEqual } from 'sonar-ui-common/helpers/query';\nimport FacetBox from './FacetBox';\nimport FacetHeader from './FacetHeader';\nimport FacetItem from './FacetItem';\nimport FacetItemsList from './FacetItemsList';\nimport ListStyleFacetFooter from './ListStyleFacetFooter';\nimport MultipleSelectionHint from './MultipleSelectionHint';\n\ninterface SearchResponse<S> {\n  maxResults?: boolean;\n  results: S[];\n  paging?: T.Paging;\n}\n\nexport interface Props<S> {\n  className?: string;\n  disabled?: boolean;\n  disabledHelper?: string;\n  facetHeader: string;\n  fetching: boolean;\n  getFacetItemText: (item: string) => string;\n  getSearchResultKey: (result: S) => string;\n  getSearchResultText: (result: S) => string;\n  loadSearchResultCount?: (result: S[]) => Promise<T.Dict<number>>;\n  maxInitialItems: number;\n  maxItems: number;\n  minSearchLength: number;\n  onChange: (changes: T.Dict<string | string[]>) => void;\n  onClear?: () => void;\n  onItemClick?: (itemValue: string, multiple: boolean) => void;\n  onSearch: (query: string, page?: number) => Promise<SearchResponse<S>>;\n  onToggle: (property: string) => void;\n  open: boolean;\n  property: string;\n  query?: T.RawQuery;\n  renderFacetItem: (item: string) => React.ReactNode;\n  renderSearchResult: (result: S, query: string) => React.ReactNode;\n  searchPlaceholder: string;\n  getSortedItems?: () => string[];\n  stats: T.Dict<number> | undefined;\n  values: string[];\n}\n\ninterface State<S> {\n  autoFocus: boolean;\n  query: string;\n  searching: boolean;\n  searchMaxResults?: boolean;\n  searchPaging?: T.Paging;\n  searchResults?: S[];\n  searchResultsCounts: T.Dict<number>;\n  showFullList: boolean;\n}\n\nexport default class ListStyleFacet<S> extends React.Component<Props<S>, State<S>> {\n  mounted = false;\n\n  static defaultProps = {\n    maxInitialItems: 15,\n    maxItems: 100,\n    minSearchLength: 2\n  };\n\n  state: State<S> = {\n    autoFocus: false,\n    query: '',\n    searching: false,\n    searchResultsCounts: {},\n    showFullList: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate(prevProps: Props<S>) {\n    if (!prevProps.open && this.props.open) {\n      // focus search field *only* if it was manually open\n      this.setState({ autoFocus: true });\n    } else if (\n      (prevProps.open && !this.props.open) ||\n      !queriesEqual(prevProps.query || {}, this.props.query || {})\n    ) {\n      // reset state when closing the facet, or when query changes\n      this.setState({\n        query: '',\n        searchMaxResults: undefined,\n        searchResults: undefined,\n        searching: false,\n        searchResultsCounts: {},\n        showFullList: false\n      });\n    } else if (\n      prevProps.stats !== this.props.stats &&\n      Object.keys(this.props.stats || {}).length < this.props.maxInitialItems\n    ) {\n      // show limited list if `stats` changed and there are less than 15 items\n      this.setState({ showFullList: false });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleItemClick = (itemValue: string, multiple: boolean) => {\n    if (this.props.onItemClick) {\n      this.props.onItemClick(itemValue, multiple);\n    } else {\n      const { values } = this.props;\n      if (multiple) {\n        const newValue = sortBy(\n          values.includes(itemValue) ? without(values, itemValue) : [...values, itemValue]\n        );\n        this.props.onChange({ [this.props.property]: newValue });\n      } else {\n        this.props.onChange({\n          [this.props.property]: values.includes(itemValue) && values.length < 2 ? [] : [itemValue]\n        });\n      }\n    }\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.props.property);\n  };\n\n  handleClear = () => {\n    if (this.props.onClear) {\n      this.props.onClear();\n    } else {\n      this.props.onChange({ [this.props.property]: [] });\n    }\n  };\n\n  stopSearching = () => {\n    if (this.mounted) {\n      this.setState({ searching: false });\n    }\n  };\n\n  search = (query: string) => {\n    if (query.length >= this.props.minSearchLength) {\n      this.setState({ query, searching: true });\n      this.props\n        .onSearch(query)\n        .then(this.loadCountsForSearchResults)\n        .then(({ maxResults, paging, results, stats }) => {\n          if (this.mounted) {\n            this.setState(state => ({\n              searching: false,\n              searchMaxResults: maxResults,\n              searchResults: results,\n              searchPaging: paging,\n              searchResultsCounts: { ...state.searchResultsCounts, ...stats }\n            }));\n          }\n        })\n        .catch(this.stopSearching);\n    } else {\n      this.setState({ query, searching: false, searchResults: [] });\n    }\n  };\n\n  searchMore = () => {\n    const { query, searchPaging, searchResults } = this.state;\n    if (query && searchResults && searchPaging) {\n      this.setState({ searching: true });\n      this.props\n        .onSearch(query, searchPaging.pageIndex + 1)\n        .then(this.loadCountsForSearchResults)\n        .then(({ paging, results, stats }) => {\n          if (this.mounted) {\n            this.setState(state => ({\n              searching: false,\n              searchResults: [...searchResults, ...results],\n              searchPaging: paging,\n              searchResultsCounts: { ...state.searchResultsCounts, ...stats }\n            }));\n          }\n        })\n        .catch(this.stopSearching);\n    }\n  };\n\n  loadCountsForSearchResults = (response: SearchResponse<S>) => {\n    const { loadSearchResultCount = () => Promise.resolve({}) } = this.props;\n    const resultsToLoad = response.results.filter(result => {\n      const key = this.props.getSearchResultKey(result);\n      return this.getStat(key) === undefined && this.state.searchResultsCounts[key] === undefined;\n    });\n    if (resultsToLoad.length > 0) {\n      return loadSearchResultCount(resultsToLoad).then(stats => ({ ...response, stats }));\n    } else {\n      return { ...response, stats: {} };\n    }\n  };\n\n  getStat(item: string) {\n    const { stats } = this.props;\n    return stats && stats[item] !== undefined ? stats && stats[item] : undefined;\n  }\n\n  showFullList = () => {\n    this.setState({ showFullList: true });\n  };\n\n  hideFullList = () => {\n    this.setState({ showFullList: false });\n  };\n\n  renderList() {\n    const { stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const sortedItems = this.props.getSortedItems\n      ? this.props.getSortedItems()\n      : sortBy(\n          Object.keys(stats),\n          key => -stats[key],\n          key => this.props.getFacetItemText(key)\n        );\n\n    const limitedList = this.state.showFullList\n      ? sortedItems\n      : sortedItems.slice(0, this.props.maxInitialItems);\n\n    // make sure all selected items are displayed\n    const selectedBelowLimit = this.state.showFullList\n      ? []\n      : sortedItems\n          .slice(this.props.maxInitialItems)\n          .filter(item => this.props.values.includes(item));\n\n    const mightHaveMoreResults = sortedItems.length >= this.props.maxItems;\n\n    return (\n      <>\n        <FacetItemsList>\n          {limitedList.map(item => (\n            <FacetItem\n              active={this.props.values.includes(item)}\n              key={item}\n              name={this.props.renderFacetItem(item)}\n              onClick={this.handleItemClick}\n              stat={formatFacetStat(this.getStat(item))}\n              tooltip={this.props.getFacetItemText(item)}\n              value={item}\n            />\n          ))}\n        </FacetItemsList>\n        {selectedBelowLimit.length > 0 && (\n          <>\n            <div className=\"note spacer-bottom text-center\">⋯</div>\n            <FacetItemsList>\n              {selectedBelowLimit.map(item => (\n                <FacetItem\n                  active={true}\n                  key={item}\n                  name={this.props.renderFacetItem(item)}\n                  onClick={this.handleItemClick}\n                  stat={formatFacetStat(this.getStat(item))}\n                  tooltip={this.props.getFacetItemText(item)}\n                  value={item}\n                />\n              ))}\n            </FacetItemsList>\n          </>\n        )}\n        <ListStyleFacetFooter\n          count={limitedList.length + selectedBelowLimit.length}\n          showLess={this.state.showFullList ? this.hideFullList : undefined}\n          showMore={this.showFullList}\n          total={sortedItems.length}\n        />\n        {mightHaveMoreResults && this.state.showFullList && (\n          <Alert className=\"spacer-top\" variant=\"warning\">\n            {translate('facet_might_have_more_results')}\n          </Alert>\n        )}\n      </>\n    );\n  }\n\n  renderSearch() {\n    return (\n      <SearchBox\n        autoFocus={this.state.autoFocus}\n        className=\"little-spacer-top spacer-bottom\"\n        loading={this.state.searching}\n        minLength={this.props.minSearchLength}\n        onChange={this.search}\n        placeholder={this.props.searchPlaceholder}\n        value={this.state.query}\n      />\n    );\n  }\n\n  renderSearchResults() {\n    const { searching, searchMaxResults, searchResults, searchPaging } = this.state;\n\n    if (!searching && (!searchResults || !searchResults.length)) {\n      return <div className=\"note spacer-bottom\">{translate('no_results')}</div>;\n    }\n\n    if (!searchResults) {\n      // initial search\n      return null;\n    }\n\n    return (\n      <>\n        <FacetItemsList>\n          {searchResults.map(result => this.renderSearchResult(result))}\n        </FacetItemsList>\n        {searchMaxResults && (\n          <Alert className=\"spacer-top\" variant=\"warning\">\n            {translate('facet_might_have_more_results')}\n          </Alert>\n        )}\n        {searchPaging && (\n          <ListFooter\n            className=\"spacer-bottom\"\n            count={searchResults.length}\n            loadMore={this.searchMore}\n            ready={!searching}\n            total={searchPaging.total}\n          />\n        )}\n      </>\n    );\n  }\n\n  renderSearchResult(result: S) {\n    const key = this.props.getSearchResultKey(result);\n    const active = this.props.values.includes(key);\n    const stat = this.getStat(key) || this.state.searchResultsCounts[key];\n    return (\n      <FacetItem\n        active={active}\n        key={key}\n        name={this.props.renderSearchResult(result, this.state.query)}\n        onClick={this.handleItemClick}\n        stat={formatFacetStat(stat)}\n        tooltip={this.props.getSearchResultText(result)}\n        value={key}\n      />\n    );\n  }\n\n  render() {\n    const { disabled, stats = {} } = this.props;\n    const { query, searching, searchResults } = this.state;\n    const values = this.props.values.map(item => this.props.getFacetItemText(item));\n    const loadingResults =\n      query !== '' && searching && (searchResults === undefined || searchResults.length === 0);\n    const showList = !query || loadingResults;\n    return (\n      <FacetBox\n        className={classNames(this.props.className, {\n          'search-navigator-facet-box-forbidden': disabled\n        })}\n        property={this.props.property}>\n        <FacetHeader\n          fetching={this.props.fetching}\n          name={\n            <Tooltip overlay={disabled ? this.props.disabledHelper : undefined}>\n              <span>{this.props.facetHeader}</span>\n            </Tooltip>\n          }\n          onClear={this.handleClear}\n          onClick={disabled ? undefined : this.handleHeaderClick}\n          open={this.props.open && !disabled}\n          values={values}\n        />\n\n        {this.props.open && !disabled && (\n          <>\n            {this.renderSearch()}\n            {showList ? this.renderList() : this.renderSearchResults()}\n            <MultipleSelectionHint options={Object.keys(stats).length} values={values.length} />\n          </>\n        )}\n      </FacetBox>\n    );\n  }\n}\n\nfunction formatFacetStat(stat: number | undefined) {\n  return stat && formatMeasure(stat, 'SHORT_INT');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelect from '../common/MultiSelect';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as addMonths from 'date-fns/add_months';\nimport * as setMonth from 'date-fns/set_month';\nimport * as setYear from 'date-fns/set_year';\nimport * as subMonths from 'date-fns/sub_months';\nimport { range } from 'lodash';\nimport * as React from 'react';\nimport { DayModifiers, Modifier, Modifiers } from 'react-day-picker';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport { ButtonIcon, ClearButton } from 'sonar-ui-common/components/controls/buttons';\nimport OutsideClickHandler from 'sonar-ui-common/components/controls/OutsideClickHandler';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport CalendarIcon from 'sonar-ui-common/components/icons/CalendarIcon';\nimport ChevronLeftIcon from 'sonar-ui-common/components/icons/ChevronLeftIcon';\nimport ChevronRightIcon from 'sonar-ui-common/components/icons/ChevronRightIcon';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport {\n  getShortMonthName,\n  getShortWeekDayName,\n  getWeekDayName\n} from 'sonar-ui-common/helpers/l10n';\nimport './DayPicker.css';\nimport './styles.css';\n\nconst DayPicker = lazyLoadComponent(() => import('react-day-picker'), 'DayPicker');\n\ninterface Props {\n  className?: string;\n  currentMonth?: Date;\n  highlightFrom?: Date;\n  highlightTo?: Date;\n  inputClassName?: string;\n  maxDate?: Date;\n  minDate?: Date;\n  name?: string;\n  onChange: (date: Date | undefined) => void;\n  placeholder: string;\n  value?: Date;\n}\n\ninterface State {\n  currentMonth: Date;\n  open: boolean;\n  lastHovered?: Date;\n}\n\ntype Week = [string, string, string, string, string, string, string];\n\nexport default class DateInput extends React.PureComponent<Props, State> {\n  input?: HTMLInputElement | null;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { currentMonth: props.value || props.currentMonth || new Date(), open: false };\n  }\n\n  focus = () => {\n    if (this.input) {\n      this.input.focus();\n    }\n    this.openCalendar();\n  };\n\n  handleResetClick = () => {\n    this.closeCalendar();\n    this.props.onChange(undefined);\n  };\n\n  openCalendar = () => {\n    this.setState({\n      currentMonth: this.props.value || this.props.currentMonth || new Date(),\n      lastHovered: undefined,\n      open: true\n    });\n  };\n\n  closeCalendar = () => {\n    this.setState({ open: false });\n  };\n\n  handleDayClick = (day: Date, modifiers: DayModifiers) => {\n    if (!modifiers.disabled) {\n      this.closeCalendar();\n      this.props.onChange(day);\n    }\n  };\n\n  handleDayMouseEnter = (day: Date, modifiers: DayModifiers) => {\n    this.setState({ lastHovered: modifiers.disabled ? undefined : day });\n  };\n\n  handleCurrentMonthChange = ({ value }: { value: number }) => {\n    this.setState((state: State) => ({ currentMonth: setMonth(state.currentMonth, value) }));\n  };\n\n  handleCurrentYearChange = ({ value }: { value: number }) => {\n    this.setState(state => ({ currentMonth: setYear(state.currentMonth, value) }));\n  };\n\n  handlePreviousMonthClick = () => {\n    this.setState(state => ({ currentMonth: subMonths(state.currentMonth, 1) }));\n  };\n\n  handleNextMonthClick = () => {\n    this.setState(state => ({ currentMonth: addMonths(state.currentMonth, 1) }));\n  };\n\n  render() {\n    const { highlightFrom, highlightTo, minDate, value } = this.props;\n    const { lastHovered } = this.state;\n\n    const after = this.props.maxDate || new Date();\n\n    const months = range(12);\n    const years = range(new Date().getFullYear() - 10, new Date().getFullYear() + 1);\n\n    const selectedDays: Modifier[] = value ? [value] : [];\n    let modifiers: Partial<Modifiers> | undefined;\n    const lastHoveredOrValue = lastHovered || value;\n\n    if (highlightFrom && lastHoveredOrValue) {\n      modifiers = { highlighted: { from: highlightFrom, to: lastHoveredOrValue } };\n      selectedDays.push(highlightFrom);\n    }\n    if (highlightTo && lastHoveredOrValue) {\n      modifiers = { highlighted: { from: lastHoveredOrValue, to: highlightTo } };\n      selectedDays.push(highlightTo);\n    }\n\n    const weekdaysLong = range(7).map(getWeekDayName) as Week;\n    const weekdaysShort = range(7).map(getShortWeekDayName) as Week;\n\n    return (\n      <OutsideClickHandler onClickOutside={this.closeCalendar}>\n        <span className={classNames('date-input-control', this.props.className)}>\n          <InputWrapper\n            className={classNames('date-input-control-input', this.props.inputClassName, {\n              'is-filled': this.props.value !== undefined\n            })}\n            innerRef={node => (this.input = node)}\n            name={this.props.name}\n            onFocus={this.openCalendar}\n            placeholder={this.props.placeholder}\n            readOnly={true}\n            type=\"text\"\n            value={value}\n          />\n          <CalendarIcon className=\"date-input-control-icon\" fill=\"\" />\n          {this.props.value !== undefined && (\n            <ClearButton\n              className=\"button-tiny date-input-control-reset\"\n              iconProps={{ size: 12 }}\n              onClick={this.handleResetClick}\n            />\n          )}\n          {this.state.open && (\n            <div className=\"date-input-calendar\">\n              <nav className=\"date-input-calendar-nav\">\n                <ButtonIcon className=\"button-small\" onClick={this.handlePreviousMonthClick}>\n                  <ChevronLeftIcon />\n                </ButtonIcon>\n                <div className=\"date-input-calender-month\">\n                  <Select\n                    className=\"date-input-calender-month-select\"\n                    onChange={this.handleCurrentMonthChange}\n                    options={months.map(month => ({\n                      label: getShortMonthName(month),\n                      value: month\n                    }))}\n                    value={this.state.currentMonth.getMonth()}\n                  />\n                  <Select\n                    className=\"date-input-calender-month-select spacer-left\"\n                    onChange={this.handleCurrentYearChange}\n                    options={years.map(year => ({ label: String(year), value: year }))}\n                    value={this.state.currentMonth.getFullYear()}\n                  />\n                </div>\n                <ButtonIcon className=\"button-small\" onClick={this.handleNextMonthClick}>\n                  <ChevronRightIcon />\n                </ButtonIcon>\n              </nav>\n              <DayPicker\n                captionElement={<NullComponent />}\n                disabledDays={{ after, before: minDate }}\n                firstDayOfWeek={1}\n                modifiers={modifiers}\n                month={this.state.currentMonth}\n                navbarElement={<NullComponent />}\n                onDayClick={this.handleDayClick}\n                onDayMouseEnter={this.handleDayMouseEnter}\n                selectedDays={selectedDays}\n                weekdaysLong={weekdaysLong}\n                weekdaysShort={weekdaysShort}\n              />\n            </div>\n          )}\n        </span>\n      </OutsideClickHandler>\n    );\n  }\n}\n\nfunction NullComponent() {\n  return null;\n}\n\ntype InputWrapperProps = T.Omit<React.InputHTMLAttributes<HTMLInputElement>, 'value'> &\n  InjectedIntlProps & {\n    innerRef: React.Ref<HTMLInputElement>;\n    value: Date | undefined;\n  };\n\nconst InputWrapper = injectIntl(({ innerRef, intl, value, ...other }: InputWrapperProps) => {\n  const formattedValue =\n    value && intl.formatDate(value, { year: 'numeric', month: 'short', day: 'numeric' });\n  return <input {...other} ref={innerRef} value={formattedValue || ''} />;\n});\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DayPicker.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".DayPicker{display:inline-block}.DayPicker-wrapper{position:relative;-webkit-user-select:none;-ms-user-select:none;user-select:none;padding-bottom:8px;flex-direction:row}.DayPicker-Months{display:flex;flex-wrap:wrap;justify-content:center}.DayPicker-Month{display:table;border-collapse:collapse;border-spacing:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;margin:8px 8px 0}.DayPicker-Weekdays{display:table-header-group}.DayPicker-WeekdaysRow{display:table-row}.DayPicker-Weekday{display:table-cell;padding:8px;font-size:12px;text-align:center;color:#999}.DayPicker-Weekday abbr[title]{border-bottom:none;text-decoration:none}.DayPicker-Body{display:table-row-group}.DayPicker-Week{display:table-row}.DayPicker-Day{display:table-cell;line-height:15px;padding:8px;text-align:center;cursor:pointer;vertical-align:top;outline:none}.DayPicker--interactionDisabled .DayPicker-Day{cursor:default}.DayPicker-Footer{padding-top:8px}.DayPicker-Day--today{font-weight:700}.DayPicker-Day--outside{cursor:default;color:#8b9898}.DayPicker-Day--disabled{color:#cdcdcd;cursor:not-allowed}.DayPicker-Day--sunday{background-color:#f7f8f8}.DayPicker-Day--sunday:not(.DayPicker-Day--today){color:#dce0e0}.DayPicker-Day--selected:not(.DayPicker-Day--disabled):not(.DayPicker-Day--outside){background-color:#4b9fd5;color:#fff}.DayPicker:not(.DayPicker--interactionDisabled) .DayPicker-Day:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--highlighted):not(.DayPicker-Day--outside):hover{background-color:#f3f3f3}.DayPicker-Day--highlighted:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--outside){background-color:#cae3f2}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".date-input-control{position:relative;display:inline-block;cursor:pointer}.date-input-control-input{width:130px;padding-left:24px!important;cursor:pointer}.date-input-control-input.is-filled{padding-right:16px!important}.date-input-control-icon{position:absolute;top:4px;left:4px}.date-input-control-icon path{fill:#cdcdcd;transition:fill .3s ease}.date-input-control-input:focus+.date-input-control-icon path{fill:#4b9fd5}.date-input-control-reset{position:absolute;top:4px;right:4px;border:none}.date-input-calendar{position:absolute;z-index:7500;top:100%;left:0;border:1px solid #e6e6e6;background-color:#fff;box-shadow:0 6px 12px rgba(0,0,0,.175)}.date-input-calendar-nav{display:flex;justify-content:space-between;align-items:center;padding-top:8px;padding-left:8px;padding-right:8px}.date-input-calender-month-select{width:70px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport './MultipleSelectionHint.css';\n\ninterface Props {\n  options: number;\n  values: number;\n}\n\nexport default function MultipleSelectionHint({ options, values }: Props) {\n  // do not render if nothing is selected or there are less than 2 possible options\n  if (values === 0 || options < 2) {\n    return null;\n  }\n\n  return (\n    <div className=\"multiple-selection-hint\">\n      <div className=\"multiple-selection-hint-inner\">\n        {translate(\n          isOnMac()\n            ? 'shortcuts.section.global.facets.multiselection.mac'\n            : 'shortcuts.section.global.facets.multiselection'\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction isOnMac() {\n  return navigator.userAgent.indexOf('Mac OS X') !== -1;\n}\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./search-navigator.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".search-navigator.sticky .search-navigator-workspace-header{position:fixed;z-index:50;top:0;left:300px;right:0}.search-navigator.sticky .search-navigator-workspace-details,.search-navigator.sticky .search-navigator-workspace-list{padding-top:43px}.search-navigator-facet-box{background-color:#f3f3f3;font-size:13px}.search-navigator-facet-box.leak-facet-box{background-color:#fbf3d5;border:1px solid #f1e8cb}.search-navigator-facet-box.is-inner{margin-left:8px;padding-left:12px;border-left:1px solid #e6e6e6}.search-navigator-facet-box.is-inner .search-navigator-facet-header{padding-top:6px;padding-bottom:6px}.leak-facet-box:not(.hidden)+.leak-facet-box{border-top:none}.search-navigator-facet-box-forbidden{background-color:transparent;opacity:.5}.search-navigator-facet-box-forbidden .search-navigator-facet-container,.search-navigator-facet-box-forbidden .search-navigator-facet-empty,.search-navigator-facet-box-forbidden .search-navigator-facet-list{display:none}.search-navigator-facet-box-forbidden .search-navigator-facet-header{color:#666}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#4b9fd5}.search-navigator-facet-box-forbidden .search-navigator-facet-header{cursor:default}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#666}.search-navigator-facet{position:relative;display:inline-flex;justify-content:space-between;align-items:center;width:100%;height:24px;margin:0 0 1px;padding:0 6px;border:1px solid transparent;border-radius:2px;box-sizing:border-box;white-space:normal;opacity:.3;cursor:not-allowed;transition:none}a.search-navigator-facet{opacity:1;cursor:pointer}a.search-navigator-facet .facet-name{color:#333}.search-navigator-facet.active,a.search-navigator-facet:focus,a.search-navigator-facet:hover{border-color:#4b9fd5}.search-navigator-facet.facet-category{opacity:1;cursor:default}.search-navigator-facet.facet-category .facet-name{color:#666}.search-navigator-facet .facet-name{flex:1 1 auto;min-width:0;line-height:16px;padding:1px 0;color:#666;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-navigator-facet .facet-stat{display:flex;align-items:center;margin-left:8px;color:#666;font-size:12px}.search-navigator-facet .facet-toggle{display:none;float:left;height:16px;line-height:16px;margin-top:-1px;padding:0 5px;border-radius:2px;font-size:11px;text-transform:lowercase}.search-navigator-facet .facet-toggle:hover{color:#333}.search-navigator-facet .facet-toggle-active.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet .facet-toggle-active.facet-toggle-red{background-color:#d4333f;color:#fff}.leak-facet-box .search-navigator-facet .facet-name,.leak-facet-box .search-navigator-facet .facet-stat{background-color:#fbf3d5}.leak-facet-box .search-navigator-facet .facet-stat:before{background-image:linear-gradient(90deg,rgba(251,243,213,0),#fbf3d5 75%)}.search-navigator-facet.active{background-color:#cae3f2;text-decoration:none}.search-navigator-facet.active .facet-toggle{display:inline}.search-navigator-facet.compare .facet-toggle{cursor:not-allowed;opacity:.5}.search-navigator-facet.compare .facet-toggle.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet.compare .facet-toggle.facet-toggle-red{background-color:transparent;color:#666}.search-navigator-facet-half{width:45%}.search-navigator-facet-half:nth-child(odd){margin-right:10%}.search-navigator-facet-highlight-under-container{margin-bottom:1px}.search-navigator-facet-highlight-under-container .search-navigator-facet{margin-bottom:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover{border-bottom:none;padding-bottom:1px;border-radius:2px 2px 0 0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet{border-top:none;border-bottom:none;border-left-color:#4b9fd5;border-right-color:#4b9fd5;border-radius:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet:last-of-type{border-bottom:1px solid #4b9fd5;border-radius:0 0 2px 2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover:last-of-type{border-bottom:1px solid #4b9fd5;border-radius:2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet{background-color:#cae3f2;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet.active{border-top:1px solid #4b9fd5}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet{background-color:#a1cde8;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover .facet-toggle,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-header{display:block;flex-shrink:0;padding:8px 0;color:#333;font-weight:600;overflow:hidden;white-space:nowrap}.search-navigator-facet-header>a{border-bottom:none;color:#333}.search-navigator-facet-header>a:focus,.search-navigator-facet-header>a:hover{color:#4b9fd5}.search-navigator-facet-header>.note{font-weight:400}.search-navigator-facet-header>h3,.search-navigator-facet-header>h4{line-height:inherit;display:inline}.search-navigator-facet-header-value{display:block;overflow:hidden}.search-navigator-facet-header-value>.badge{display:block}.search-navigator-facet-header-button{flex-shrink:0;margin-left:auto}.search-navigator-facet-header-wrapper{display:flex;align-items:center}.search-navigator-facet-list{padding-bottom:8px;font-size:0}.search-navigator-facet-list-title{margin:0 8px 4px;font-size:12px;font-weight:700}.search-navigator-facet-list+.search-navigator-facet-list>.search-navigator-facet-list-title{border-top:1px solid #e6e6e6;padding-top:8px}.search-navigator-facet-empty{margin:0;padding:0 10px 10px;color:#333;font-size:12px;white-space:nowrap}.search-navigator-facet-footer{display:block;padding-bottom:8px;border-bottom:none}.search-navigator-facet-container{margin-top:6px;padding:0 10px 16px}.search-navigator-date-facet-selection{position:relative;padding-left:8px;font-size:12px}.search-navigator-date-facet-selection:after,.search-navigator-date-facet-selection:before{display:table;content:\\\"\\\";line-height:0}.search-navigator-date-facet-selection:after{clear:both}.search-navigator-date-facet-selection .date-input-control-input{width:115px!important}.search-navigator-date-facet-selection-dropdown-left{float:left;border-bottom:none}.search-navigator-date-facet-selection-dropdown-right{float:right;border-bottom:none}.search-navigator-date-facet-selection-input-left{position:absolute;left:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection-input-right{position:absolute;right:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection .date-input-control:not(:first-of-type) .date-input-calendar{left:auto;right:0}.search-navigator-filters{position:relative;padding:5px 10px;background-color:#f3f3f3}.search-navigator-filters:after,.search-navigator-filters:before{display:table;content:\\\"\\\";line-height:0}.search-navigator-filters:after{clear:both}.search-navigator-filters-header{margin-bottom:12px;padding-bottom:11px;border-bottom:1px solid #e6e6e6}.search-navigator-intro{width:500px;margin:0 auto;padding-top:100px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  tooltip?: boolean;\n}\n\nexport default function BuiltInQualityProfileBadge({ className, tooltip = true }: Props) {\n  const badge = (\n    <div className={classNames('badge badge-info', className)}>\n      {translate('quality_profiles.built_in')}\n    </div>\n  );\n\n  if (tooltip) {\n    return <Tooltip overlay={translate('quality_profiles.built_in.description')}>{badge}</Tooltip>;\n  }\n\n  return badge;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Standards } from '../types/security';\n\nexport function getStandards(): Promise<Standards> {\n  return import('./standards.json').then(x => x.default);\n}\n\nexport function renderCWECategory(standards: Standards, category: string): string {\n  const record = standards.cwe[category];\n  if (!record) {\n    return `CWE-${category}`;\n  } else if (category === 'unknown') {\n    return record.title;\n  } else {\n    return `CWE-${category} - ${record.title}`;\n  }\n}\n\nexport function renderOwaspTop10Category(\n  standards: Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.owaspTop10[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'OWASP', withPrefix);\n  } else {\n    return addPrefix(`${category.toUpperCase()} - ${record.title}`, 'OWASP', withPrefix);\n  }\n}\n\nexport function renderSansTop25Category(\n  standards: Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sansTop25[category];\n  return addPrefix(record ? record.title : category, 'SANS', withPrefix);\n}\n\nexport function renderSonarSourceSecurityCategory(\n  standards: Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sonarsourceSecurity[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'SONAR', withPrefix);\n  } else if (category === 'others') {\n    return record.title;\n  } else {\n    return addPrefix(record.title, 'SONAR', withPrefix);\n  }\n}\n\nfunction addPrefix(title: string, prefix: string, withPrefix: boolean) {\n  return withPrefix ? `${prefix} ${title}` : title;\n}\n"],"sourceRoot":""}