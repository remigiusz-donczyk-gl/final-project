{"version":3,"sources":["webpack:///./src/main/js/app/utils/isValidUri.ts","webpack:///./src/main/js/api/projectLinks.ts","webpack:///./src/main/js/apps/projectLinks/CreationModal.tsx","webpack:///./src/main/js/apps/projectLinks/Header.tsx","webpack:///./src/main/js/apps/projectLinks/LinkRow.tsx","webpack:///./src/main/js/apps/projectLinks/Table.tsx","webpack:///./src/main/js/apps/projectLinks/App.tsx","webpack:///./src/main/js/helpers/projectLinks.ts"],"names":["url","test","getProjectLinks","projectKey","then","r","deleteLink","linkId","id","catch","createLink","data","state","name","handleSubmit","props","onSubmit","onClose","handleNameChange","event","setState","currentTarget","value","handleUrlChange","render","header","this","size","onCloseClick","onFormSubmit","submitting","className","htmlFor","autoFocus","maxLength","onChange","required","type","loading","disabled","onClick","mounted","creationModal","handleCreateClick","handleCreationModalClose","componentDidMount","componentWillUnmount","onCreate","renderNameForProvided","link","renderName","renderDeleteButton","confirmButtonText","confirmData","isDestructive","modalBody","modalHeader","onConfirm","onDelete","isValidUri","href","rel","target","renderHeader","links","length","linkRows","map","key","fetchLinks","component","handleCreateLink","handleDeleteLink","filter","componentDidUpdate","prevProps","defer","title","PROVIDED_TYPES","isProvided","includes","orderLinks","provided","unknown","indexOf","getLinkName"],"mappings":"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","file":"js/345.1655372229846.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { isWebUri } from 'valid-url';\n\nexport default function(url: string): boolean {\n  return /^(\\/|scm:)/.test(url) || !!isWebUri(url);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport function getProjectLinks(projectKey: string): Promise<T.ProjectLink[]> {\n  return getJSON('/api/project_links/search', { projectKey }).then(r => r.links, throwGlobalError);\n}\n\nexport function deleteLink(linkId: string) {\n  return post('/api/project_links/delete', { id: linkId }).catch(throwGlobalError);\n}\n\nexport function createLink(data: {\n  name: string;\n  projectKey: string;\n  url: string;\n}): Promise<T.ProjectLink> {\n  return postJSON('/api/project_links/create', data).then(r => r.link, throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport MandatoryFieldMarker from 'sonar-ui-common/components/ui/MandatoryFieldMarker';\nimport MandatoryFieldsExplanation from 'sonar-ui-common/components/ui/MandatoryFieldsExplanation';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onClose: () => void;\n  onSubmit: (name: string, url: string) => Promise<void>;\n}\n\ninterface State {\n  name: string;\n  url: string;\n}\n\nexport default class CreationModal extends React.PureComponent<Props, State> {\n  state: State = { name: '', url: '' };\n\n  handleSubmit = () => {\n    return this.props.onSubmit(this.state.name, this.state.url).then(this.props.onClose);\n  };\n\n  handleNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ name: event.currentTarget.value });\n  };\n\n  handleUrlChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ url: event.currentTarget.value });\n  };\n\n  render() {\n    const header = translate('project_links.create_new_project_link');\n\n    return (\n      <SimpleModal\n        header={header}\n        onClose={this.props.onClose}\n        onSubmit={this.handleSubmit}\n        size=\"small\">\n        {({ onCloseClick, onFormSubmit, submitting }) => (\n          <form onSubmit={onFormSubmit}>\n            <header className=\"modal-head\">\n              <h2>{header}</h2>\n            </header>\n\n            <div className=\"modal-body\">\n              <MandatoryFieldsExplanation className=\"modal-field\" />\n\n              <div className=\"modal-field\">\n                <label htmlFor=\"create-link-name\">\n                  {translate('project_links.name')}\n                  <MandatoryFieldMarker />\n                </label>\n                <input\n                  autoFocus={true}\n                  id=\"create-link-name\"\n                  maxLength={128}\n                  name=\"name\"\n                  onChange={this.handleNameChange}\n                  required={true}\n                  type=\"text\"\n                  value={this.state.name}\n                />\n              </div>\n\n              <div className=\"modal-field\">\n                <label htmlFor=\"create-link-url\">\n                  {translate('project_links.url')}\n                  <MandatoryFieldMarker />\n                </label>\n                <input\n                  id=\"create-link-url\"\n                  maxLength={128}\n                  name=\"url\"\n                  onChange={this.handleUrlChange}\n                  required={true}\n                  type=\"text\"\n                  value={this.state.url}\n                />\n              </div>\n            </div>\n\n            <footer className=\"modal-foot\">\n              <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n              <SubmitButton disabled={submitting} id=\"create-link-confirm\">\n                {translate('create')}\n              </SubmitButton>\n              <ResetButtonLink disabled={submitting} onClick={onCloseClick}>\n                {translate('cancel')}\n              </ResetButtonLink>\n            </footer>\n          </form>\n        )}\n      </SimpleModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport CreationModal from './CreationModal';\n\ninterface Props {\n  onCreate: (name: string, url: string) => Promise<void>;\n}\n\ninterface State {\n  creationModal: boolean;\n}\n\nexport default class Header extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { creationModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleCreateClick = () => {\n    this.setState({ creationModal: true });\n  };\n\n  handleCreationModalClose = () => {\n    if (this.mounted) {\n      this.setState({ creationModal: false });\n    }\n  };\n\n  render() {\n    return (\n      <>\n        <header className=\"page-header\">\n          <h1 className=\"page-title\">{translate('project_links.page')}</h1>\n          <div className=\"page-actions\">\n            <Button id=\"create-project-link\" onClick={this.handleCreateClick}>\n              {translate('create')}\n            </Button>\n          </div>\n          <div className=\"page-description\">{translate('project_links.page.description')}</div>\n        </header>\n        {this.state.creationModal && (\n          <CreationModal onClose={this.handleCreationModalClose} onSubmit={this.props.onCreate} />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport ProjectLinkIcon from 'sonar-ui-common/components/icons/ProjectLinkIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport isValidUri from '../../app/utils/isValidUri';\nimport { getLinkName, isProvided } from '../../helpers/projectLinks';\n\ninterface Props {\n  link: T.ProjectLink;\n  onDelete: (linkId: string) => Promise<void>;\n}\n\nexport default class LinkRow extends React.PureComponent<Props> {\n  renderNameForProvided = (link: T.ProjectLink) => {\n    return (\n      <div className=\"display-inline-block text-top\">\n        <div>\n          <span className=\"js-name\">{getLinkName(link)}</span>\n        </div>\n        <div className=\"note little-spacer-top\">\n          <span className=\"js-type\">{`sonar.links.${link.type}`}</span>\n        </div>\n      </div>\n    );\n  };\n\n  renderName = (link: T.ProjectLink) => {\n    return (\n      <div>\n        <ProjectLinkIcon className=\"little-spacer-right\" type={link.type} />\n        {isProvided(link) ? (\n          this.renderNameForProvided(link)\n        ) : (\n          <div className=\"display-inline-block text-top\">\n            <span className=\"js-name\">{link.name}</span>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderDeleteButton = (link: T.ProjectLink) => {\n    if (isProvided(link)) {\n      return null;\n    }\n\n    return (\n      <ConfirmButton\n        confirmButtonText={translate('delete')}\n        confirmData={link.id}\n        isDestructive={true}\n        modalBody={translateWithParameters(\n          'project_links.are_you_sure_to_delete_x_link',\n          link.name!\n        )}\n        modalHeader={translate('project_links.delete_project_link')}\n        onConfirm={this.props.onDelete}>\n        {({ onClick }) => (\n          <Button className=\"button-red js-delete-button\" onClick={onClick}>\n            {translate('delete')}\n          </Button>\n        )}\n      </ConfirmButton>\n    );\n  };\n\n  render() {\n    const { link } = this.props;\n\n    return (\n      <tr data-name={link.name}>\n        <td className=\"nowrap\">{this.renderName(link)}</td>\n        <td className=\"nowrap js-url\">\n          {isValidUri(link.url) ? (\n            <a href={link.url} rel=\"nofollow noreferrer noopener\" target=\"_blank\">\n              {link.url}\n            </a>\n          ) : (\n            link.url\n          )}\n        </td>\n        <td className=\"thin nowrap\">{this.renderDeleteButton(link)}</td>\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { orderLinks } from '../../helpers/projectLinks';\nimport LinkRow from './LinkRow';\n\ninterface Props {\n  links: T.ProjectLink[];\n  onDelete: (linkId: string) => Promise<void>;\n}\n\nexport default class Table extends React.PureComponent<Props> {\n  renderHeader() {\n    // keep empty cell for actions\n    return (\n      <thead>\n        <tr>\n          <th className=\"nowrap\">{translate('project_links.name')}</th>\n          <th className=\"nowrap width-100\">{translate('project_links.url')}</th>\n          <th className=\"thin\">&nbsp;</th>\n        </tr>\n      </thead>\n    );\n  }\n\n  render() {\n    if (!this.props.links.length) {\n      return <div className=\"note\">{translate('no_results')}</div>;\n    }\n\n    const orderedLinks = orderLinks(this.props.links);\n\n    const linkRows = orderedLinks.map(link => (\n      <LinkRow key={link.id} link={link} onDelete={this.props.onDelete} />\n    ));\n\n    return (\n      <div className=\"boxed-group boxed-group-inner\">\n        <table className=\"data zebra\" id=\"project-links\">\n          {this.renderHeader()}\n          <tbody>{linkRows}</tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { createLink, deleteLink, getProjectLinks } from '../../api/projectLinks';\nimport Header from './Header';\nimport Table from './Table';\n\ninterface Props {\n  component: Pick<T.Component, 'key'>;\n}\n\ninterface State {\n  links?: T.ProjectLink[];\n  loading: boolean;\n}\n\nexport default class App extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchLinks();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.component.key !== this.props.component.key) {\n      this.fetchLinks();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchLinks = () => {\n    this.setState({ loading: true });\n    getProjectLinks(this.props.component.key).then(\n      links => {\n        if (this.mounted) {\n          this.setState({ links, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleCreateLink = (name: string, url: string) => {\n    return createLink({ name, projectKey: this.props.component.key, url }).then(link => {\n      if (this.mounted) {\n        this.setState(({ links = [] }) => ({\n          links: [...links, link]\n        }));\n      }\n    });\n  };\n\n  handleDeleteLink = (linkId: string) => {\n    return deleteLink(linkId).then(() => {\n      if (this.mounted) {\n        this.setState(({ links = [] }) => ({\n          links: links.filter(link => link.id !== linkId)\n        }));\n      }\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"page page-limited\">\n        <Helmet defer={false} title={translate('project_links.page')} />\n        <Header onCreate={this.handleCreateLink} />\n        <DeferredSpinner loading={this.state.loading}>\n          {this.state.links && <Table links={this.state.links} onDelete={this.handleDeleteLink} />}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { partition, sortBy } from 'lodash';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nconst PROVIDED_TYPES = ['homepage', 'ci', 'issue', 'scm', 'scm_dev'];\ntype NameAndType = Pick<T.ProjectLink, 'name' | 'type'>;\n\nexport function isProvided(link: Pick<T.ProjectLink, 'type'>) {\n  return PROVIDED_TYPES.includes(link.type);\n}\n\nexport function orderLinks<T extends NameAndType>(links: T[]) {\n  const [provided, unknown] = partition<T>(links, isProvided);\n  return [\n    ...sortBy(provided, link => PROVIDED_TYPES.indexOf(link.type)),\n    ...sortBy(unknown, link => link.name && link.name.toLowerCase())\n  ];\n}\n\nexport function getLinkName(link: NameAndType) {\n  return isProvided(link) ? translate('project_links', link.type) : link.name;\n}\n"],"sourceRoot":""}