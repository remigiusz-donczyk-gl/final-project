{"version":3,"sources":["webpack:///./src/main/js/components/issue/actions.ts","webpack:///./src/main/js/components/common/SelectListItem.tsx","webpack:///./src/main/js/components/common/SelectList.tsx","webpack:///./src/main/js/components/issue/popups/SetAssigneePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueAssign.tsx","webpack:///./src/main/js/components/issue/popups/CommentPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentAction.tsx","webpack:///./src/main/js/components/issue/popups/SetSeverityPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueSeverity.tsx","webpack:///./src/main/js/components/issue/popups/SetIssueTagsPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTags.tsx","webpack:///./src/main/js/components/issue/popups/SetTransitionPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTransition.tsx","webpack:///./src/main/js/components/issue/popups/SetTypePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueType.tsx","webpack:///./src/main/js/components/issue/components/IssueActionsBar.tsx","webpack:///./src/main/js/components/issue/popups/CommentDeletePopup.tsx","webpack:///./src/main/js/types/rules.ts","webpack:///./src/main/js/components/issue/components/IssueCommentLine.tsx","webpack:///./src/main/js/components/issue/popups/ChangelogPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelog.tsx","webpack:///./src/main/js/components/issue/components/IssueMessage.tsx","webpack:///./src/main/js/components/issue/popups/SimilarIssuesPopup.tsx","webpack:///./src/main/js/components/issue/components/SimilarIssuesFilter.tsx","webpack:///./src/main/js/components/issue/components/IssueTitleBar.tsx","webpack:///./src/main/js/components/issue/IssueView.tsx","webpack:///./src/main/js/components/issue/Issue.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelogDiff.tsx","webpack:///./src/main/js/components/common/LocationMessage.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css?94e1","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css","webpack:///./src/main/js/components/SourceViewer/components/Line.css?69c4","webpack:///./src/main/js/components/SourceViewer/components/Line.css","webpack:///./src/main/js/components/common/LocationIndex.css?e012","webpack:///./src/main/js/components/common/LocationIndex.css","webpack:///./src/main/js/components/common/LocationMessage.css?8760","webpack:///./src/main/js/components/common/LocationMessage.css","webpack:///./src/main/js/components/issue/Issue.css?a142","webpack:///./src/main/js/components/issue/Issue.css","webpack:///./src/main/js/components/SourceViewer/helpers/lines.ts","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesList.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCoverage.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplicationBlock.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesIndicator.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineOptionsPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineNumber.tsx","webpack:///./src/main/js/components/SourceViewer/components/SCMPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineSCM.tsx","webpack:///./src/main/js/components/SourceViewer/components/Line.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/loadIssues.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlayMeasure.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlay.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeader.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerBase.tsx","webpack:///./src/main/js/components/SourceViewer/components/DuplicationPopup.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/duplications.ts","webpack:///./src/main/js/components/SourceViewer/styles.css?8096","webpack:///./src/main/js/components/SourceViewer/styles.css","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./src/main/js/helpers/sanitize.ts","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/tags/TagsList.css?d861","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/common/DocumentationTooltip.tsx","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/common/FormattingTips.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./src/main/js/components/tags/TagsSelector.tsx","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./src/main/js/components/common/LocationIndex.tsx","webpack:///./src/main/js/components/shared/StatusHelper.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/indexing.ts","webpack:///./src/main/js/components/SourceViewer/helpers/highlight.ts","webpack:///./src/main/js/components/SourceViewer/helpers/issueLocations.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerContext.tsx"],"names":["onChange","resultPromise","oldIssue","newIssue","optimisticUpdate","undefined","then","response","issue","components","users","rules","param","throwGlobalError","handleSelect","event","preventDefault","props","onSelect","item","handleHover","onHover","renderLink","children","this","className","active","href","onClick","onFocus","onMouseOver","render","overlay","title","placement","attachShortcuts","previousKeyScope","previousFilter","currentKeyScope","tagName","target","srcElement","isInput","includes","keyCode","setState","selectNextElement","selectPreviousElement","state","detachShortcuts","idx","items","indexOf","length","renderChild","child","type","currentItem","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","hasChildren","count","map","key","searchUsers","query","q","ps","handleSearchResult","activeUsers","filter","currentUser","login","handleSearchChange","defaultUsersArray","name","Dropdown","noPadding","autoFocus","minLength","placeholder","value","user","Avatar","hash","avatar","size","style","marginLeft","withCurrentUser","toggleAssign","open","togglePopup","handleClose","renderAssignee","assigneeName","assignee","assigneeAvatar","assigneeActive","canAssign","isOpen","closeOnEscape","onRequestClose","onAssign","handleCommentChange","textComment","handleCommentClick","trim","onComment","handleCancelClick","toggleComment","handleKeyboard","metaKey","ctrlKey","stopPropagation","comment","markdown","autoTriggered","onKeyDown","rows","disabled","FormattingTips","addComment","text","issueKey","closeOnClickOutside","currentPopup","commentAutoTriggered","commentPlaceholder","SEVERITY","SetSeverityPopup","severity","toggleSetSeverity","setSeverity","setIssueProperty","canSetSeverity","SeverityHelper","mounted","searchResult","onSearch","Math","min","selectedTags","tags","tag","setTags","onUnselect","availableTags","BottomRight","TagsSelector","listSize","toggleSetTags","join","canSetTags","TagsList","allowUpdate","SetTransitionPopup","fromHotspot","transitions","isManualVulnerability","transition","defaultMessage","id","values","community_plug_link","rel","translateTransition","description","setTransition","toggleSetTransition","hasTransitions","status","StatusHelper","resolution","TYPES","SetTypePopup","toggleSetType","setType","canSetType","fill","baseFontColor","property","popup","apiCall","handleTransition","actions","canComment","isSecurityHotspot","effort","CommentDeletePopup","onDelete","RuleStatus","openPopup","handleEdit","onEdit","toggleEditPopup","handleDelete","toggleDeletePopup","popupName","force","prevState","closePopups","author","authorName","displayName","authorActive","authorAvatar","dangerouslySetInnerHTML","__html","sanitize","htmlText","date","createdAt","updatable","changelog","loadChangelog","creationDate","userName","isUserActive","diffs","diff","IssueChangelogDiff","toggleChangelog","handleClick","IssueMessage","engine","engineName","manualVulnerability","message","ruleKey","ruleStatus","ruleEngine","onOpenRule","Deprecated","Removed","DocumentationTooltip","content","links","label","onFilter","subProject","ruleName","qualifier","projectName","subProjectName","componentQualifier","componentLongName","handleFilter","IssueTitleBar","hasSimilarIssuesFilter","locationsCount","secondaryLocations","flows","reduce","sum","locations","locationsBadge","LocationIndex","displayLocations","displayLocationsCount","issueUrl","project","branchLike","issues","types","Consumer","externalRulesRepoNames","openRule","externalRuleEngine","rule","textRange","endLine","displayLocationsLink","to","handleCheck","onCheck","isClickable","editComment","deleteComment","hasCheckbox","issueClass","hotspot","selected","role","comments","checked","node","toUpperCase","parentElement","onPopupToggle","handleAssignement","bindShortcuts","componentWillUpdate","nextProps","unbindShortcuts","defaultProps","oldValue","newValue","LocationMessage","SourceViewerHeaderSlim","expandable","displayProjectName","linkToProject","loading","onExpand","sourceViewerFile","measures","path","projectNameLabel","Project","SubProject","copyValue","files","resolved","api","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","optimizeHighlightedSymbols","symbolsForLine","highlightedSymbols","symbols","optimizeLocationMessage","highlightedLocationMessage","optimizedSecondaryIssueLocations","some","location","index","optimizeSelectedIssue","selectedIssue","issuesForLine","find","LineIssuesList","issuePopup","Issue","displayIssueLocationsCount","displayIssueLocationsLink","onIssueChange","onIssueClick","onIssuePopupToggle","handleSymbolClick","keys","currentTarget","match","onSymbolClick","tokens","line","code","attachEvents","activeMarkerNode","scroll","componentWillReceiveProps","detachEvents","codeNode","querySelectorAll","addEventListener","renderMarker","leading","onLocationSelect","ref","issueLocations","onIssueSelect","padding","secondaryIssueLocations","showIssues","forEach","symbol","highlight","renderedTokens","leadingMarker","token","displayLocationMarkers","markers","marker","loc","paddingBottom","filteredSelectedIssues","scrollToUncoveredLine","coverageMarker","current","coverageStatus","conditions","coveredConditions","getStatusTooltip","blocksLoaded","duplicated","dropdownOpen","setDropdownOpen","RightTop","renderDuplicationPopup","tabIndex","issuesOpen","hasIssues","tooltipContent","mostImportantIssue","e","blur","firstLineNumber","SourceViewerContext","file","codeLocation","codeUrl","isAtTop","BottomLeft","TopLeft","ActionsDropdown","displayOptions","setOpen","lineNumber","hasAuthor","scmAuthor","hasDate","scmDate","scmRevision","previousLine","hasPopup","cell","s","p","changed","isSCMChanged","ariaLabel","overlayPlacement","handleIssuesIndicatorClick","openIssues","onIssuesClose","onIssueUnselect","onIssuesOpen","displayAllIssues","displayCoverage","displayDuplications","displayLineNumberOptions","displayIssues","displaySCM","duplications","duplicationsCount","highlighted","last","verticalBuffer","isNew","bottomPadding","Boolean","loadDuplications","loadPageAndNext","toLine","page","pageSize","r","loadPage","lastIssue","nextIssues","component","_fromLine","additionalFields","componentKeys","buildQuery","Promise","resolve","EMPTY_ARRAY","ZERO_LINE","firstUncoveredLineFound","getDuplicationsForLine","duplicationsByLine","getIssuesForLine","issuesByLine","getIssueLocationsForLine","issueLocationsByLine","renderLine","highlightedLocations","metricKey","sources","new_uncovered_lines","uncovered_lines","Line","highlightedLine","symbolsByLine","hasSourcesAfter","openIssuesByLine","hasFileIssues","hasSourcesBefore","loadingSourcesBefore","loadSourcesBefore","loadingSourcesAfter","loadSourcesAfter","MeasuresOverlayMeasure","measure","metric","bugs","vulnerabilities","code_smells","Measure","metricType","small","showAllMeasures","fetchData","all","fetchMeasures","fetchIssues","facets","metrics","metricKeys","withMetrics","severitiesFacet","f","tagsFacet","typesFacet","handleAllMeasuresClick","renderMeasure","renderLines","lines","ncloc","comment_lines","comment_lines_density","cognitive_complexity","complexity","function_complexity","renderBigMeasure","renderIssues","violations","sqale_index","val","renderCoverage","coverage","CoverageRating","lines_to_cover","uncovered_conditions","conditions_to_cover","renderDuplications","muted","Number","duplicated_blocks","duplicated_lines","renderTests","tests","test_success_density","test_failures","test_errors","skipped_tests","test_execution_time","renderDomain","domain","renderAllMeasures","domains","Object","domainKeys","odd","_","even","header","contentLabel","onClose","measuresOverlay","handleShowMeasuresClick","handleMeasuresOverlayClose","openInWorkspace","openComponent","renderIssueMeasures","componentMeasures","params","m","showMeasures","unitTestsOrLines","TestFile","rawSourcesLink","duplicationDensity","loadSources","reject","from","aroundLine","max","LINES","propsLoadSources","firstSourceLine","loadIssues","computeCoverageStatus","lastSourceLine","fromLine","slice","duplicatedFiles","handleIssuePopupToggle","samePopup","handleIssueSelect","handleIssueUnselect","handleOpenIssues","handleCloseIssues","handleIssueChange","newIssues","candidate","blocks","DuplicationPopup","inRemovedComponent","notAccessible","notExist","sourceRemoved","fetchComponent","isLineOutsideOfRange","fetchSources","reloadIssues","loadComponent","defaultLoadComponent","defaultLoadSources","getCoverageStatus","firstLine","lastList","onLoaded","onFailLoadSources","renderCode","componentKey","renderHeader","slimHeader","Alert","variant","Provider","sourceViewerComponent","leakPeriodDate","isDifferentComponent","a","b","handleFileClick","dataset","shouldLink","renderDuplication","groupedBlocks","fileRef","d","duplication","block","filterDuplicationBlocksByLine","foundOne","outOfBounds","shouldDisplay","_ref","isOk","getDuplicationBlocksForIndex","isDuplicationBlockInRemovedComponent","sanitizeStringRestricted","html","ALLOWED_TAGS","ALLOWED_ATTR","sanitizeString","USE_PROFILES","KNOWN_RATINGS","enhanceMeasure","leak","getLeakValue","period","getRatingTooltip","finalMetricKey","substr","decimals","level","formattedValue","omitExtraDecimalZeros","tooltip","rating","MultiSelectOption","custom","element","renderLabel","onSelectChange","handleSelectChange","onSelectItem","onUnselectItem","onSearchQuery","validateSearchInput","handleElementHover","activeIdx","getAllElements","evt","toggleSelect","stopLoading","isNewElement","elem","selectedElements","elements","updateSelectedElements","filterSelected","updateUnselectedElements","unselectedElements","setElementActive","allElements","container","totalElements","searchInput","focus","removeEventListener","allowSelection","allowNewElements","footerNode","activeElement","showNewElement","infiniteList","listClasses","div","inPlace","window","validateTag","toLowerCase","replace","DonutChart","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","data","padAngle","numberValue","gray71","green","barBackgroundColor","lineCoverageRed","width","thickness","height","other","clickAttributes","issuesByComponentAndLine","mapping","locationsByLine","duplicationIndex","splitByTokens","rootClassName","document","createElement","innerHTML","call","childNodes","nodeType","fullClassName","innerTokens","concat","nodeValue","highlightSymbol","symbolRegExp","RegExp","test","part","str","acc","highlightIssueLocations","nextTokens","markerAdded","startLine","s1","e1","s2","e2","x","p1","p2","p3","newClassName","getLinearLocations","startOffset","endOffset","getSecondaryIssueLocationsForLine","linearLocations","l"],"mappings":"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","file":"js/279.1655372229846.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport throwGlobalError from '../../app/utils/throwGlobalError';\nimport { parseIssueFromResponse } from '../../helpers/issues';\nimport { IssueResponse } from '../../types/issues';\n\nexport const updateIssue = (\n  onChange: (issue: T.Issue) => void,\n  resultPromise: Promise<IssueResponse>,\n  oldIssue?: T.Issue,\n  newIssue?: T.Issue\n) => {\n  const optimisticUpdate = oldIssue !== undefined && newIssue !== undefined;\n  if (optimisticUpdate) {\n    onChange(newIssue!);\n  }\n\n  resultPromise.then(\n    response => {\n      if (!optimisticUpdate) {\n        const issue = parseIssueFromResponse(\n          response.issue,\n          response.components,\n          response.users,\n          response.rules\n        );\n        onChange(issue);\n      }\n    },\n    param => {\n      if (optimisticUpdate) {\n        onChange(oldIssue!);\n      }\n      throwGlobalError(param);\n    }\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\n\ninterface Props {\n  active?: string;\n  className?: string;\n  item: string;\n  onHover?: (item: string) => void;\n  onSelect?: (item: string) => void;\n  title?: React.ReactNode;\n}\n\nexport default class SelectListItem extends React.PureComponent<Props> {\n  handleSelect = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    if (this.props.onSelect) {\n      this.props.onSelect(this.props.item);\n    }\n  };\n\n  handleHover = () => {\n    if (this.props.onHover) {\n      this.props.onHover(this.props.item);\n    }\n  };\n\n  renderLink() {\n    const children = this.props.children || this.props.item;\n    return (\n      <li>\n        <a\n          className={classNames(\n            { active: this.props.active === this.props.item },\n            this.props.className\n          )}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return (\n      <Tooltip overlay={this.props.title || undefined} placement=\"right\">\n        {this.renderLink()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as key from 'keymaster';\nimport { uniqueId } from 'lodash';\nimport * as React from 'react';\nimport SelectListItem from './SelectListItem';\n\ninterface Props {\n  className?: string;\n  items: string[];\n  currentItem: string;\n  onSelect: (item: string) => void;\n}\n\ninterface State {\n  active: string;\n}\n\nexport default class SelectList extends React.PureComponent<Props, State> {\n  currentKeyScope?: string;\n  previousFilter?: (event: any) => void;\n  previousKeyScope?: string;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: props.currentItem\n    };\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.currentItem !== this.props.currentItem &&\n      !this.props.items.includes(this.state.active)\n    ) {\n      this.setState({ active: this.props.currentItem });\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    this.previousKeyScope = key.getScope();\n    this.previousFilter = key.filter;\n    this.currentKeyScope = uniqueId('key-scope');\n    key.setScope(this.currentKeyScope);\n\n    // sometimes there is a *focused* search field next to the SelectList component\n    // we need to allow shortcuts in this case, but only for the used keys\n    (key as any).filter = (event: KeyboardEvent & { target: HTMLElement }) => {\n      const { tagName } = event.target || event.srcElement;\n      const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n      return [13, 38, 40].includes(event.keyCode) || !isInput;\n    };\n\n    key('down', this.currentKeyScope, () => {\n      this.setState(this.selectNextElement);\n      return false;\n    });\n\n    key('up', this.currentKeyScope, () => {\n      this.setState(this.selectPreviousElement);\n      return false;\n    });\n\n    key('return', this.currentKeyScope, () => {\n      if (this.state.active != null) {\n        this.handleSelect(this.state.active);\n      }\n      return false;\n    });\n  };\n\n  detachShortcuts = () => {\n    if (this.previousKeyScope) {\n      key.setScope(this.previousKeyScope);\n    }\n    if (this.currentKeyScope) {\n      key.deleteScope(this.currentKeyScope);\n    }\n    (key as any).filter = this.previousFilter;\n  };\n\n  handleSelect = (item: string) => {\n    this.props.onSelect(item);\n  };\n\n  handleHover = (item: string) => {\n    this.setState({ active: item });\n  };\n\n  selectNextElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx < 0) {\n      return { active: props.items[0] };\n    }\n    return { active: props.items[(idx + 1) % props.items.length] };\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx <= 0) {\n      return { active: props.items[props.items.length - 1] };\n    }\n    return { active: props.items[idx - 1] };\n  };\n\n  renderChild = (child: any) => {\n    if (child == null) {\n      return null;\n    }\n    // do not pass extra props to children like `<li className=\"divider\" />`\n    if (child.type !== SelectListItem) {\n      return child;\n    }\n    return React.cloneElement(child, {\n      active: this.state.active,\n      onHover: this.handleHover,\n      onSelect: this.handleSelect\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const hasChildren = React.Children.count(children) > 0;\n    return (\n      <ul className={classNames('menu', this.props.className)}>\n        {hasChildren && React.Children.map(children, this.renderChild)}\n        {!hasChildren &&\n          this.props.items.map(item => (\n            <SelectListItem\n              active={this.state.active}\n              item={item}\n              key={item}\n              onHover={this.handleHover}\n              onSelect={this.handleSelect}\n            />\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { searchUsers } from '../../../api/users';\nimport { isLoggedIn, isUserActive } from '../../../helpers/users';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { withCurrentUser } from '../../hoc/withCurrentUser';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  onSelect: (login: string) => void;\n}\n\ninterface State {\n  currentUser: string;\n  query: string;\n  users: T.UserActive[];\n}\n\nconst LIST_SIZE = 10;\n\nexport class SetAssigneePopup extends React.PureComponent<Props, State> {\n  defaultUsersArray: T.UserActive[];\n\n  constructor(props: Props) {\n    super(props);\n    this.defaultUsersArray = [{ login: '', name: translate('unassigned') }];\n\n    if (isLoggedIn(props.currentUser)) {\n      this.defaultUsersArray = [props.currentUser, ...this.defaultUsersArray];\n    }\n\n    this.state = {\n      query: '',\n      users: this.defaultUsersArray,\n      currentUser: this.defaultUsersArray.length > 0 ? this.defaultUsersArray[0].login : ''\n    };\n  }\n\n  searchUsers = (query: string) => {\n    searchUsers({ q: query, ps: LIST_SIZE }).then(this.handleSearchResult, () => {});\n  };\n\n  handleSearchResult = ({ users }: { users: T.UserBase[] }) => {\n    const activeUsers = users.filter(isUserActive);\n    this.setState({\n      users: activeUsers,\n      currentUser: activeUsers.length > 0 ? activeUsers[0].login : ''\n    });\n  };\n\n  handleSearchChange = (query: string) => {\n    if (query.length === 0) {\n      this.setState({\n        query,\n        users: this.defaultUsersArray,\n        currentUser: this.defaultUsersArray[0].login\n      });\n    } else {\n      this.setState({ query });\n      this.searchUsers(query);\n    }\n  };\n\n  render() {\n    return (\n      <DropdownOverlay noPadding={true}>\n        <div className=\"multi-select\">\n          <div className=\"menu-search\">\n            <SearchBox\n              autoFocus={true}\n              className=\"little-spacer-top\"\n              minLength={2}\n              onChange={this.handleSearchChange}\n              placeholder={translate('search.search_for_users')}\n              value={this.state.query}\n            />\n          </div>\n          <SelectList\n            currentItem={this.state.currentUser}\n            items={map(this.state.users, 'login')}\n            onSelect={this.props.onSelect}>\n            {this.state.users.map(user => (\n              <SelectListItem item={user.login} key={user.login}>\n                {!!user.login && (\n                  <Avatar className=\"spacer-right\" hash={user.avatar} name={user.name} size={16} />\n                )}\n                <span className=\"text-middle\" style={{ marginLeft: user.login ? 24 : undefined }}>\n                  {user.name}\n                </span>\n              </SelectListItem>\n            ))}\n          </SelectList>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n\nexport default withCurrentUser(SetAssigneePopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport SetAssigneePopup from '../popups/SetAssigneePopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  canAssign: boolean;\n  onAssign: (login: string) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueAssign extends React.PureComponent<Props> {\n  toggleAssign = (open?: boolean) => {\n    this.props.togglePopup('assign', open);\n  };\n\n  handleClose = () => {\n    this.toggleAssign(false);\n  };\n\n  renderAssignee() {\n    const { issue } = this.props;\n    const assigneeName = issue.assigneeName || issue.assignee;\n\n    if (assigneeName) {\n      return (\n        <>\n          <span className=\"text-top\">\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={issue.assigneeAvatar}\n              name={assigneeName}\n              size={16}\n            />\n          </span>\n          <span className=\"issue-meta-label\">\n            {issue.assigneeActive === false\n              ? translateWithParameters('user.x_deleted', assigneeName)\n              : assigneeName}\n          </span>\n        </>\n      );\n    }\n\n    return <span className=\"issue-meta-label\">{translate('unassigned')}</span>;\n  }\n\n  render() {\n    const { canAssign, isOpen, issue } = this.props;\n    const assigneeName = issue.assigneeName || issue.assignee;\n\n    if (canAssign) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            closeOnEscape={true}\n            onRequestClose={this.handleClose}\n            open={isOpen}\n            overlay={<SetAssigneePopup onSelect={this.props.onAssign} />}>\n            <ButtonLink\n              aria-expanded={isOpen}\n              aria-label={\n                assigneeName\n                  ? translateWithParameters(\n                      'issue.assign.assigned_to_x_click_to_change',\n                      assigneeName\n                    )\n                  : translate('issue.assign.unassigned_click_to_assign')\n              }\n              className=\"issue-action issue-action-with-options js-issue-assign\"\n              onClick={this.toggleAssign}>\n              {this.renderAssignee()}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    }\n\n    return this.renderAssignee();\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport FormattingTips from '../../common/FormattingTips';\n\ninterface Props {\n  comment?: Pick<T.IssueComment, 'markdown'>;\n  onComment: (text: string) => void;\n  toggleComment: (visible: boolean) => void;\n  placeholder: string;\n  placement?: PopupPlacement;\n  autoTriggered?: boolean;\n}\n\ninterface State {\n  textComment: string;\n}\n\nexport default class CommentPopup extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      textComment: props.comment ? props.comment.markdown : ''\n    };\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ textComment: event.target.value });\n  };\n\n  handleCommentClick = () => {\n    if (this.state.textComment.trim().length > 0) {\n      this.props.onComment(this.state.textComment);\n    }\n  };\n\n  handleCancelClick = () => {\n    this.props.toggleComment(false);\n  };\n\n  handleKeyboard = (event: React.KeyboardEvent) => {\n    if (event.keyCode === 13 && (event.metaKey || event.ctrlKey)) {\n      // Ctrl + Enter\n      this.handleCommentClick();\n    } else if ([37, 38, 39, 40].includes(event.keyCode)) {\n      // Arrow keys\n      event.stopPropagation();\n    }\n  };\n\n  render() {\n    const { comment, autoTriggered } = this.props;\n    return (\n      <DropdownOverlay placement={this.props.placement}>\n        <div className=\"issue-comment-bubble-popup\">\n          <div className=\"issue-comment-form-text\">\n            <textarea\n              autoFocus={true}\n              onChange={this.handleCommentChange}\n              onKeyDown={this.handleKeyboard}\n              placeholder={this.props.placeholder}\n              rows={2}\n              value={this.state.textComment}\n            />\n          </div>\n          <div className=\"issue-comment-form-footer\">\n            <div className=\"issue-comment-form-actions\">\n              <Button\n                className=\"js-issue-comment-submit little-spacer-right\"\n                disabled={this.state.textComment.trim().length < 1}\n                onClick={this.handleCommentClick}>\n                {comment && translate('save')}\n                {!comment && translate('issue.comment.submit')}\n              </Button>\n              <ResetButtonLink className=\"js-issue-comment-cancel\" onClick={this.handleCancelClick}>\n                {autoTriggered ? translate('skip') : translate('cancel')}\n              </ResetButtonLink>\n            </div>\n            <div className=\"issue-comment-form-tips\">\n              <FormattingTips />\n            </div>\n          </div>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { addIssueComment } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  commentAutoTriggered?: boolean;\n  commentPlaceholder: string;\n  currentPopup?: string;\n  issueKey: string;\n  onChange: (issue: T.Issue) => void;\n  toggleComment: (open?: boolean, placeholder?: string, autoTriggered?: boolean) => void;\n}\n\nexport default class IssueCommentAction extends React.PureComponent<Props> {\n  addComment = (text: string) => {\n    updateIssue(this.props.onChange, addIssueComment({ issue: this.props.issueKey, text }));\n    this.props.toggleComment(false);\n  };\n\n  handleCommentClick = () => {\n    this.props.toggleComment();\n  };\n\n  handleClose = () => {\n    this.props.toggleComment(false);\n  };\n\n  render() {\n    return (\n      <li className=\"issue-meta dropdown\">\n        <Toggler\n          closeOnClickOutside={false}\n          onRequestClose={this.handleClose}\n          open={this.props.currentPopup === 'comment'}\n          overlay={\n            <CommentPopup\n              autoTriggered={this.props.commentAutoTriggered}\n              onComment={this.addComment}\n              placeholder={this.props.commentPlaceholder}\n              toggleComment={this.props.toggleComment}\n            />\n          }>\n          <ButtonLink\n            aria-expanded={this.props.currentPopup === 'comment'}\n            aria-label={translate('issue.comment.add_comment')}\n            className=\"issue-action js-issue-comment\"\n            onClick={this.handleCommentClick}>\n            <span className=\"issue-meta-label\">{translate('issue.comment.formlink')}</span>\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ntype Props = {\n  issue: Pick<T.Issue, 'severity'>;\n  onSelect: (severity: string) => void;\n};\n\nconst SEVERITY = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\nexport default function SetSeverityPopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.severity} items={SEVERITY} onSelect={onSelect}>\n        {SEVERITY.map(severity => (\n          <SelectListItem className=\"display-flex-center\" item={severity} key={severity}>\n            <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n            {translate('severity', severity)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { setIssueSeverity } from '../../../api/issues';\nimport { IssueResponse } from '../../../types/issues';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport SetSeverityPopup from '../popups/SetSeverityPopup';\n\ninterface Props {\n  canSetSeverity: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'severity'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueSeverity extends React.PureComponent<Props> {\n  toggleSetSeverity = (open?: boolean) => {\n    this.props.togglePopup('set-severity', open);\n  };\n\n  setSeverity = (severity: string) => {\n    this.props.setIssueProperty('severity', 'set-severity', setIssueSeverity, severity);\n  };\n\n  handleClose = () => {\n    this.toggleSetSeverity(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetSeverityPopup issue={issue} onSelect={this.setSeverity} />}>\n            <ButtonLink\n              aria-label={translateWithParameters(\n                'issue.severity.severity_x_click_to_change',\n                translate('severity', issue.severity)\n              )}\n              aria-expanded={this.props.isOpen}\n              className=\"issue-action issue-action-with-options js-issue-set-severity\"\n              onClick={this.toggleSetSeverity}>\n              <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    }\n\n    return <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, without } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { searchIssueTags } from '../../../api/issues';\nimport TagsSelector from '../../tags/TagsSelector';\n\ninterface Props {\n  selectedTags: string[];\n  setTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\nconst MAX_LIST_SIZE = 100;\n\nexport default class SetIssueTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchIssueTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, MAX_LIST_SIZE)\n    }).then(\n      (tags: string[]) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <TagsSelector\n          listSize={LIST_SIZE}\n          onSearch={this.onSearch}\n          onSelect={this.onSelect}\n          onUnselect={this.onUnselect}\n          selectedTags={this.props.selectedTags}\n          tags={availableTags}\n        />\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { setIssueTags } from '../../../api/issues';\nimport TagsList from '../../tags/TagsList';\nimport { updateIssue } from '../actions';\nimport SetIssueTagsPopup from '../popups/SetIssueTagsPopup';\n\ninterface Props {\n  canSetTags: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'key' | 'tags'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTags extends React.PureComponent<Props> {\n  toggleSetTags = (open?: boolean) => {\n    this.props.togglePopup('edit-tags', open);\n  };\n\n  setTags = (tags: string[]) => {\n    const { issue } = this.props;\n    const newIssue = { ...issue, tags };\n    updateIssue(\n      this.props.onChange,\n      setIssueTags({ issue: issue.key, tags: tags.join(',') }),\n      issue as T.Issue,\n      newIssue as T.Issue\n    );\n  };\n\n  handleClose = () => {\n    this.toggleSetTags(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    const { tags = [] } = issue;\n\n    if (this.props.canSetTags) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen}\n            overlay={<SetIssueTagsPopup selectedTags={tags} setTags={this.setTags} />}>\n            <ButtonLink\n              aria-expanded={this.props.isOpen}\n              className=\"issue-action issue-action-with-options js-issue-edit-tags\"\n              onClick={this.toggleSetTags}>\n              <TagsList\n                allowUpdate={this.props.canSetTags}\n                tags={\n                  issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]\n                }\n              />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    }\n\n    return (\n      <TagsList\n        allowUpdate={this.props.canSetTags}\n        className=\"note\"\n        tags={issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\nexport interface Props {\n  fromHotspot: boolean;\n  onSelect: (transition: string) => void;\n  transitions: string[];\n  type: T.IssueType;\n}\n\nexport default function SetTransitionPopup({ fromHotspot, onSelect, transitions, type }: Props) {\n  const isManualVulnerability = fromHotspot && type === 'VULNERABILITY';\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={transitions[0]} items={transitions} onSelect={onSelect}>\n        {transitions.map(transition => {\n          const [name, description] = translateTransition(transition, isManualVulnerability);\n          return (\n            <SelectListItem item={transition} key={transition} title={description}>\n              {name}\n            </SelectListItem>\n          );\n        })}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n\nfunction translateTransition(transition: string, isManualVulnerability: boolean) {\n  return isManualVulnerability && hasMessage('vulnerability.transition', transition)\n    ? [\n        translate('vulnerability.transition', transition),\n        translate('vulnerability.transition', transition, 'description')\n      ]\n    : [\n        translate('issue.transition', transition),\n        <FormattedMessage\n          key=\"description\"\n          defaultMessage={translate('issue.transition', transition, 'description')}\n          id={`issue.transition.${transition}.description`}\n          values={{\n            community_plug_link: (\n              <a\n                href=\"https://community.sonarsource.com/\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\">\n                {translate('issue.transition.community_plug_link')}\n              </a>\n            )\n          }}\n        />\n      ];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { setIssueTransition } from '../../../api/issues';\nimport StatusHelper from '../../shared/StatusHelper';\nimport { updateIssue } from '../actions';\nimport SetTransitionPopup from '../popups/SetTransitionPopup';\n\ninterface Props {\n  hasTransitions: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'fromHotspot' | 'key' | 'resolution' | 'status' | 'transitions' | 'type'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTransition extends React.PureComponent<Props> {\n  setTransition = (transition: string) => {\n    updateIssue(\n      this.props.onChange,\n      setIssueTransition({ issue: this.props.issue.key, transition })\n    );\n    this.toggleSetTransition();\n  };\n\n  toggleSetTransition = (open?: boolean) => {\n    this.props.togglePopup('transition', open);\n  };\n\n  handleClose = () => {\n    this.toggleSetTransition(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    if (this.props.hasTransitions) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.hasTransitions}\n            overlay={\n              <SetTransitionPopup\n                fromHotspot={issue.fromHotspot}\n                onSelect={this.setTransition}\n                transitions={issue.transitions}\n                type={issue.type}\n              />\n            }>\n            <ButtonLink\n              aria-label={translateWithParameters(\n                'issue.transition.status_x_click_to_change',\n                translate('issue.status', issue.status)\n              )}\n              aria-expanded={this.props.isOpen}\n              className=\"issue-action issue-action-with-options js-issue-transition\"\n              onClick={this.toggleSetTransition}>\n              <StatusHelper\n                className=\"issue-meta-label\"\n                resolution={issue.resolution}\n                status={issue.status}\n              />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    }\n\n    return (\n      <StatusHelper\n        className=\"issue-meta-label\"\n        resolution={issue.resolution}\n        status={issue.status}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ninterface Props {\n  issue: Pick<T.Issue, 'type'>;\n  onSelect: (type: T.IssueType) => void;\n}\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\nexport default function SetTypePopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.type} items={TYPES} onSelect={onSelect}>\n        {TYPES.map(type => (\n          <SelectListItem className=\"display-flex-center\" item={type} key={type}>\n            <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n            {translate('issue.type', type)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { setIssueType } from '../../../api/issues';\nimport { colors } from '../../../app/theme';\nimport { IssueResponse } from '../../../types/issues';\nimport SetTypePopup from '../popups/SetTypePopup';\n\ninterface Props {\n  canSetType: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'type'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueType extends React.PureComponent<Props> {\n  toggleSetType = (open?: boolean) => {\n    this.props.togglePopup('set-type', open);\n  };\n\n  setType = (type: string) => {\n    this.props.setIssueProperty('type', 'set-type', setIssueType, type);\n  };\n\n  handleClose = () => {\n    this.toggleSetType(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetType) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetType}\n            overlay={<SetTypePopup issue={issue} onSelect={this.setType} />}>\n            <ButtonLink\n              aria-label={translateWithParameters(\n                'issue.type.type_x_click_to_change',\n                translate('issue.type', issue.type)\n              )}\n              aria-expanded={this.props.isOpen}\n              className=\"issue-action issue-action-with-options js-issue-set-type\"\n              onClick={this.toggleSetType}>\n              <IssueTypeIcon\n                className=\"little-spacer-right\"\n                fill={colors.baseFontColor}\n                query={issue.type}\n              />\n              {translate('issue.type', issue.type)}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    }\n\n    return (\n      <span>\n        <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n        {translate('issue.type', issue.type)}\n      </span>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse } from '../../../types/issues';\nimport { updateIssue } from '../actions';\nimport IssueAssign from './IssueAssign';\nimport IssueCommentAction from './IssueCommentAction';\nimport IssueSeverity from './IssueSeverity';\nimport IssueTags from './IssueTags';\nimport IssueTransition from './IssueTransition';\nimport IssueType from './IssueType';\n\ninterface Props {\n  issue: T.Issue;\n  currentPopup?: string;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\ninterface State {\n  commentAutoTriggered: boolean;\n  commentPlaceholder: string;\n}\n\nexport default class IssueActionsBar extends React.PureComponent<Props, State> {\n  state: State = {\n    commentAutoTriggered: false,\n    commentPlaceholder: ''\n  };\n\n  setIssueProperty = (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => {\n    const { issue } = this.props;\n    if (issue[property] !== value) {\n      const newIssue = { ...issue, [property]: value };\n      updateIssue(\n        this.props.onChange,\n        apiCall({ issue: issue.key, [property]: value }),\n        issue,\n        newIssue\n      );\n    }\n    this.props.togglePopup(popup, false);\n  };\n\n  toggleComment = (open: boolean | undefined, placeholder = '', autoTriggered = false) => {\n    this.setState({\n      commentPlaceholder: placeholder,\n      commentAutoTriggered: autoTriggered\n    });\n    this.props.togglePopup('comment', open);\n  };\n\n  handleTransition = (issue: T.Issue) => {\n    this.props.onChange(issue);\n    if (\n      issue.resolution === 'FALSE-POSITIVE' ||\n      (issue.resolution === 'WONTFIX' && issue.type !== 'SECURITY_HOTSPOT')\n    ) {\n      this.toggleComment(true, translate('issue.comment.explain_why'), true);\n    }\n  };\n\n  render() {\n    const { issue } = this.props;\n    const canAssign = issue.actions.includes('assign');\n    const canComment = issue.actions.includes('comment');\n    const canSetSeverity = issue.actions.includes('set_severity');\n    const canSetType = issue.actions.includes('set_type');\n    const canSetTags = issue.actions.includes('set_tags');\n    const hasTransitions = issue.transitions && issue.transitions.length > 0;\n    const isSecurityHotspot = issue.type === 'SECURITY_HOTSPOT';\n\n    return (\n      <div className=\"issue-actions\">\n        <div className=\"issue-meta-list\">\n          <div className=\"issue-meta\">\n            <IssueType\n              canSetType={canSetType}\n              isOpen={this.props.currentPopup === 'set-type' && canSetType}\n              issue={issue}\n              setIssueProperty={this.setIssueProperty}\n              togglePopup={this.props.togglePopup}\n            />\n          </div>\n          {!isSecurityHotspot && (\n            <div className=\"issue-meta\">\n              <IssueSeverity\n                canSetSeverity={canSetSeverity}\n                isOpen={this.props.currentPopup === 'set-severity' && canSetSeverity}\n                issue={issue}\n                setIssueProperty={this.setIssueProperty}\n                togglePopup={this.props.togglePopup}\n              />\n            </div>\n          )}\n          <div className=\"issue-meta\">\n            <IssueTransition\n              hasTransitions={hasTransitions}\n              isOpen={this.props.currentPopup === 'transition' && hasTransitions}\n              issue={issue}\n              onChange={this.handleTransition}\n              togglePopup={this.props.togglePopup}\n            />\n          </div>\n          <div className=\"issue-meta\">\n            <IssueAssign\n              canAssign={canAssign}\n              isOpen={this.props.currentPopup === 'assign' && canAssign}\n              issue={issue}\n              onAssign={this.props.onAssign}\n              togglePopup={this.props.togglePopup}\n            />\n          </div>\n          {!isSecurityHotspot && issue.effort && (\n            <div className=\"issue-meta\">\n              <span className=\"issue-meta-label\">\n                {translateWithParameters('issue.x_effort', issue.effort)}\n              </span>\n            </div>\n          )}\n          {canComment && (\n            <IssueCommentAction\n              commentAutoTriggered={this.state.commentAutoTriggered}\n              commentPlaceholder={this.state.commentPlaceholder}\n              currentPopup={this.props.currentPopup}\n              issueKey={issue.key}\n              onChange={this.props.onChange}\n              toggleComment={this.toggleComment}\n            />\n          )}\n        </div>\n        <div className=\"list-inline\">\n          <div className=\"issue-meta js-issue-tags\">\n            <IssueTags\n              canSetTags={canSetTags}\n              isOpen={this.props.currentPopup === 'edit-tags' && canSetTags}\n              issue={issue}\n              onChange={this.props.onChange}\n              togglePopup={this.props.togglePopup}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onDelete: () => void;\n}\n\nexport default function CommentDeletePopup({ onDelete }: Props) {\n  return (\n    <DropdownOverlay placement={PopupPlacement.BottomRight}>\n      <div className=\"menu is-container\">\n        <div className=\"spacer-bottom\">{translate('issue.comment.delete_confirm_message')}</div>\n        <Button className=\"button-red\" onClick={onDelete}>\n          {translate('delete')}\n        </Button>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum RuleStatus {\n  Ready = 'READY',\n  Beta = 'BETA',\n  Deprecated = 'DEPRECATED',\n  Removed = 'REMOVED'\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DateFromNow from 'sonar-ui-common/components/intl/DateFromNow';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { sanitizeString } from '../../../helpers/sanitize';\nimport Avatar from '../../ui/Avatar';\nimport CommentDeletePopup from '../popups/CommentDeletePopup';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  comment: T.IssueComment;\n  onDelete: (comment: string) => void;\n  onEdit: (comment: string, text: string) => void;\n}\n\ninterface State {\n  openPopup: string;\n}\n\nexport default class IssueCommentLine extends React.PureComponent<Props, State> {\n  state: State = {\n    openPopup: ''\n  };\n\n  handleEdit = (text: string) => {\n    this.props.onEdit(this.props.comment.key, text);\n    this.toggleEditPopup(false);\n  };\n\n  handleDelete = () => {\n    this.props.onDelete(this.props.comment.key);\n    this.toggleDeletePopup(false);\n  };\n\n  togglePopup = (popupName: string, force?: boolean) => {\n    this.setState(prevState => {\n      if (prevState.openPopup !== popupName && force !== false) {\n        return { openPopup: popupName };\n      } else if (prevState.openPopup === popupName && force !== true) {\n        return { openPopup: '' };\n      }\n      return prevState;\n    });\n  };\n\n  toggleDeletePopup = (force?: boolean) => {\n    this.togglePopup('delete', force);\n  };\n\n  toggleEditPopup = (force?: boolean) => {\n    this.togglePopup('edit', force);\n  };\n\n  closePopups = () => {\n    this.setState({ openPopup: '' });\n  };\n\n  render() {\n    const { comment } = this.props;\n    const author = comment.authorName || comment.author;\n    const displayName =\n      comment.authorActive === false && author\n        ? translateWithParameters('user.x_deleted', author)\n        : author;\n    return (\n      <div className=\"issue-comment\">\n        <div className=\"issue-comment-author\" title={displayName}>\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={comment.authorAvatar}\n            name={author}\n            size={16}\n          />\n          {displayName}\n        </div>\n        <div\n          className=\"issue-comment-text markdown\"\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: sanitizeString(comment.htmlText) }}\n        />\n        <div className=\"issue-comment-age\">\n          <span className=\"a11y-hidden\">{translate('issue.comment.posted_on')}</span>\n          <DateFromNow date={comment.createdAt} />\n        </div>\n        <div className=\"issue-comment-actions\">\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                closeOnClickOutside={false}\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'edit'}\n                overlay={\n                  <CommentPopup\n                    comment={comment}\n                    onComment={this.handleEdit}\n                    placeholder=\"\"\n                    placement={PopupPlacement.BottomRight}\n                    toggleComment={this.toggleEditPopup}\n                  />\n                }>\n                <EditButton\n                  aria-label={translate('issue.comment.edit')}\n                  className=\"js-issue-comment-edit button-small\"\n                  onClick={this.toggleEditPopup}\n                />\n              </Toggler>\n            </div>\n          )}\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'delete'}\n                overlay={<CommentDeletePopup onDelete={this.handleDelete} />}>\n                <DeleteButton\n                  aria-label={translate('issue.comment.delete')}\n                  className=\"js-issue-comment-delete button-small\"\n                  onClick={this.toggleDeletePopup}\n                />\n              </Toggler>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport DateTimeFormatter from 'sonar-ui-common/components/intl/DateTimeFormatter';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { getIssueChangelog } from '../../../api/issues';\nimport Avatar from '../../ui/Avatar';\nimport IssueChangelogDiff from '../components/IssueChangelogDiff';\n\ninterface Props {\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n}\n\ninterface State {\n  changelog: T.IssueChangelog[];\n}\n\nexport default class ChangelogPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { changelog: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadChangelog();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadChangelog() {\n    getIssueChangelog(this.props.issue.key).then(\n      ({ changelog }) => {\n        if (this.mounted) {\n          this.setState({ changelog });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const { issue } = this.props;\n    const { author } = issue;\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <div className=\"menu is-container issue-changelog\">\n          <table className=\"spaced\">\n            <tbody>\n              <tr>\n                <td className=\"thin text-left text-top nowrap\">\n                  <DateTimeFormatter date={issue.creationDate} />\n                </td>\n                <td className=\"text-left text-top\">\n                  {author ? `${translate('created_by')} ${author}` : translate('created')}\n                </td>\n              </tr>\n\n              {this.state.changelog.map((item, idx) => {\n                const userName = item.userName || item.user;\n\n                return (\n                  <tr key={idx}>\n                    <td className=\"thin text-left text-top nowrap\">\n                      <DateTimeFormatter date={item.creationDate} />\n                    </td>\n                    <td className=\"text-left text-top\">\n                      {userName && (\n                        <p>\n                          <Avatar\n                            className=\"little-spacer-right\"\n                            hash={item.avatar}\n                            name={userName}\n                            size={16}\n                          />\n                          {item.isUserActive\n                            ? userName\n                            : translateWithParameters('user.x_deleted', userName)}\n                        </p>\n                      )}\n                      {item.diffs.map(diff => (\n                        <IssueChangelogDiff diff={diff} key={diff.key} />\n                      ))}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport DateFromNow from 'sonar-ui-common/components/intl/DateFromNow';\nimport ChangelogPopup from '../popups/ChangelogPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n  creationDate: string;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueChangelog extends React.PureComponent<Props> {\n  toggleChangelog = (open?: boolean) => {\n    this.props.togglePopup('changelog', open);\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  handleClose = () => {\n    this.toggleChangelog(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<ChangelogPopup issue={this.props.issue} />}>\n          <ButtonLink\n            aria-expanded={this.props.isOpen}\n            className=\"issue-action issue-action-with-options js-issue-show-changelog\"\n            onClick={this.handleClick}>\n            <span className=\"issue-meta-label\">\n              <DateFromNow date={this.props.creationDate} />\n            </span>\n            <DropdownIcon className=\"little-spacer-left\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { RuleStatus } from '../../../types/rules';\nimport DocumentationTooltip from '../../common/DocumentationTooltip';\nimport { WorkspaceContextShape } from '../../workspace/context';\n\nexport interface IssueMessageProps {\n  engine?: string;\n  engineName?: string;\n  manualVulnerability: boolean;\n  message: string;\n  onOpenRule: WorkspaceContextShape['openRule'];\n  ruleKey: string;\n  ruleStatus?: RuleStatus;\n}\n\nexport default function IssueMessage(props: IssueMessageProps) {\n  const { engine, engineName, manualVulnerability, message, ruleKey, ruleStatus } = props;\n  const ruleEngine = engineName ? engineName : engine;\n\n  return (\n    <div className=\"issue-message break-word\">\n      <span className=\"spacer-right\">{message}</span>\n      <ButtonLink\n        aria-label={translate('issue.why_this_issue.long')}\n        className=\"issue-see-rule spacer-right text-baseline\"\n        onClick={() =>\n          props.onOpenRule({\n            key: ruleKey\n          })\n        }>\n        {translate('issue.why_this_issue')}\n      </ButtonLink>\n\n      {ruleStatus && (ruleStatus === RuleStatus.Deprecated || ruleStatus === RuleStatus.Removed) && (\n        <DocumentationTooltip\n          className=\"spacer-left\"\n          content={translate('rules.status', ruleStatus, 'help')}\n          links={[\n            {\n              href: '/documentation/user-guide/rules/',\n              label: translateWithParameters('see_x', translate('rules'))\n            }\n          ]}>\n          <span className=\"spacer-right badge badge-error\">\n            {translate('rules.status', ruleStatus)}\n          </span>\n        </DocumentationTooltip>\n      )}\n\n      {ruleEngine && (\n        <Tooltip overlay={translateWithParameters('issue.from_external_rule_engine', ruleEngine)}>\n          <div className=\"badge spacer-right text-baseline\">{ruleEngine}</div>\n        </Tooltip>\n      )}\n      {manualVulnerability && (\n        <Tooltip overlay={translate('issue.manual_vulnerability.description')}>\n          <div className=\"badge spacer-right text-baseline\">\n            {translate('issue.manual_vulnerability')}\n          </div>\n        </Tooltip>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { fileFromPath, limitComponentName } from 'sonar-ui-common/helpers/path';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport StatusHelper from '../../shared/StatusHelper';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  issue: T.Issue;\n  onFilter: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesPopup extends React.PureComponent<Props> {\n  handleSelect = (property: string) => {\n    this.props.onFilter(property, this.props.issue);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const items = [\n      'type',\n      'severity',\n      'status',\n      'resolution',\n      'assignee',\n      'rule',\n      ...(issue.tags || []).map(tag => `tag###${tag}`),\n      'project',\n      issue.subProject ? 'module' : undefined,\n      'file'\n    ].filter(item => item) as string[];\n\n    const assignee = issue.assigneeName || issue.assignee;\n\n    return (\n      <DropdownOverlay noPadding={true}>\n        <header className=\"menu-search\">\n          <h6>{translate('issue.filter_similar_issues')}</h6>\n        </header>\n\n        <SelectList\n          className=\"issues-similar-issues-menu\"\n          currentItem={items[0]}\n          items={items}\n          onSelect={this.handleSelect}>\n          <SelectListItem className=\"display-flex-center\" item=\"type\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n            {translate('issue.type', issue.type)}\n          </SelectListItem>\n\n          <SelectListItem item=\"severity\">\n            <SeverityHelper className=\"display-flex-center\" severity={issue.severity} />\n          </SelectListItem>\n\n          <SelectListItem item=\"status\">\n            <StatusHelper\n              className=\"display-flex-center\"\n              resolution={undefined}\n              status={issue.status}\n            />\n          </SelectListItem>\n\n          <SelectListItem item=\"resolution\">\n            {issue.resolution != null\n              ? translate('issue.resolution', issue.resolution)\n              : translate('unresolved')}\n          </SelectListItem>\n\n          <SelectListItem item=\"assignee\">\n            {assignee ? (\n              <span>\n                {translate('assigned_to')}\n                <Avatar\n                  className=\"little-spacer-left little-spacer-right\"\n                  hash={issue.assigneeAvatar}\n                  name={assignee}\n                  size={16}\n                />\n                {issue.assigneeActive === false\n                  ? translateWithParameters('user.x_deleted', assignee)\n                  : assignee}\n              </span>\n            ) : (\n              translate('unassigned')\n            )}\n          </SelectListItem>\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"rule\">{limitComponentName(issue.ruleName)}</SelectListItem>\n\n          {issue.tags != null &&\n            issue.tags.map(tag => (\n              <SelectListItem item={`tag###${tag}`} key={`tag###${tag}`}>\n                <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                <span className=\"text-middle\">{tag}</span>\n              </SelectListItem>\n            ))}\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"project\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n            {issue.projectName}\n          </SelectListItem>\n\n          {issue.subProject != null && (\n            <SelectListItem item=\"module\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n              {issue.subProjectName}\n            </SelectListItem>\n          )}\n\n          <SelectListItem item=\"file\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier={issue.componentQualifier} />\n            {fileFromPath(issue.componentLongName)}\n          </SelectListItem>\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport FilterIcon from 'sonar-ui-common/components/icons/FilterIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SimilarIssuesPopup from '../popups/SimilarIssuesPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  togglePopup: (popup: string, show?: boolean) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesFilter extends React.PureComponent<Props> {\n  handleFilter = (property: string, issue: T.Issue) => {\n    this.togglePopup(false);\n    if (this.props.onFilter) {\n      this.props.onFilter(property, issue);\n    }\n  };\n\n  togglePopup = (open?: boolean) => {\n    this.props.togglePopup('similarIssues', open);\n  };\n\n  handleClose = () => {\n    this.togglePopup(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<SimilarIssuesPopup issue={this.props.issue} onFilter={this.handleFilter} />}>\n          <ButtonLink\n            aria-label={translate('issue.filter_similar_issues')}\n            aria-expanded={this.props.isOpen}\n            className=\"issue-action issue-action-with-options js-issue-filter\"\n            onClick={this.togglePopup}\n            title={translate('issue.filter_similar_issues')}>\n            <FilterIcon className=\"icon-half-transparent\" />\n            <DropdownIcon className=\"icon-half-transparent\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport { RuleStatus } from '../../../types/rules';\nimport LocationIndex from '../../common/LocationIndex';\nimport { WorkspaceContext } from '../../workspace/context';\nimport IssueChangelog from './IssueChangelog';\nimport IssueMessage from './IssueMessage';\nimport SimilarIssuesFilter from './SimilarIssuesFilter';\n\nexport interface IssueTitleBarProps {\n  branchLike?: BranchLike;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default function IssueTitleBar(props: IssueTitleBarProps) {\n  const { issue } = props;\n  const hasSimilarIssuesFilter = props.onFilter != null;\n\n  const locationsCount =\n    issue.secondaryLocations.length +\n    issue.flows.reduce((sum, locations) => sum + locations.length, 0);\n\n  const locationsBadge = (\n    <Tooltip\n      overlay={translateWithParameters(\n        'issue.this_issue_involves_x_code_locations',\n        formatMeasure(locationsCount, 'INT')\n      )}>\n      <LocationIndex>{locationsCount}</LocationIndex>\n    </Tooltip>\n  );\n\n  const displayLocations = props.displayLocationsCount && locationsCount > 0;\n\n  const issueUrl = getComponentIssuesUrl(issue.project, {\n    ...getBranchLikeQuery(props.branchLike),\n    issues: issue.key,\n    open: issue.key,\n    types: issue.type === 'SECURITY_HOTSPOT' ? issue.type : undefined\n  });\n\n  return (\n    <div className=\"issue-row\">\n      <WorkspaceContext.Consumer>\n        {({ externalRulesRepoNames, openRule }) => (\n          <IssueMessage\n            engine={issue.externalRuleEngine}\n            engineName={\n              issue.externalRuleEngine &&\n              externalRulesRepoNames &&\n              externalRulesRepoNames[issue.externalRuleEngine]\n            }\n            manualVulnerability={issue.fromHotspot && issue.type === 'VULNERABILITY'}\n            message={issue.message}\n            onOpenRule={openRule}\n            ruleKey={issue.rule}\n            ruleStatus={issue.ruleStatus as RuleStatus | undefined}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n\n      <div className=\"issue-row-meta\">\n        <div className=\"issue-meta-list\">\n          <div className=\"issue-meta\">\n            <IssueChangelog\n              creationDate={issue.creationDate}\n              isOpen={props.currentPopup === 'changelog'}\n              issue={issue}\n              togglePopup={props.togglePopup}\n            />\n          </div>\n          {issue.textRange != null && (\n            <div className=\"issue-meta\">\n              <span className=\"issue-meta-label\" title={translate('line_number')}>\n                L{issue.textRange.endLine}\n              </span>\n            </div>\n          )}\n          {displayLocations && (\n            <div className=\"issue-meta\">\n              {props.displayLocationsLink ? (\n                <Link target=\"_blank\" to={issueUrl}>\n                  {locationsBadge}\n                </Link>\n              ) : (\n                locationsBadge\n              )}\n            </div>\n          )}\n          <div className=\"issue-meta\">\n            <Link\n              className=\"js-issue-permalink link-no-underline\"\n              target=\"_blank\"\n              title={translate('permalink')}\n              to={issueUrl}>\n              <LinkIcon />\n            </Link>\n          </div>\n          {hasSimilarIssuesFilter && (\n            <div className=\"issue-meta\">\n              <SimilarIssuesFilter\n                isOpen={props.currentPopup === 'similarIssues'}\n                issue={issue}\n                onFilter={props.onFilter}\n                togglePopup={props.togglePopup}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { deleteIssueComment, editIssueComment } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport IssueActionsBar from './components/IssueActionsBar';\nimport IssueCommentLine from './components/IssueCommentLine';\nimport IssueTitleBar from './components/IssueTitleBar';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  selected: boolean;\n  togglePopup: (popup: string, show: boolean | void) => void;\n}\n\nexport default class IssueView extends React.PureComponent<Props> {\n  handleCheck = () => {\n    if (this.props.onCheck) {\n      this.props.onCheck(this.props.issue.key);\n    }\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!isClickable(event.target as HTMLElement) && this.props.onClick) {\n      event.preventDefault();\n      this.props.onClick(this.props.issue.key);\n    }\n  };\n\n  editComment = (comment: string, text: string) => {\n    updateIssue(this.props.onChange, editIssueComment({ comment, text }));\n  };\n\n  deleteComment = (comment: string) => {\n    updateIssue(this.props.onChange, deleteIssueComment({ comment }));\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const hasCheckbox = this.props.onCheck != null;\n\n    const issueClass = classNames('issue', {\n      hotspot: issue.type === 'SECURITY_HOTSPOT',\n      'issue-with-checkbox': hasCheckbox,\n      selected: this.props.selected\n    });\n\n    return (\n      <div className={issueClass} data-issue={issue.key} onClick={this.handleClick} role=\"group\">\n        <IssueTitleBar\n          branchLike={this.props.branchLike}\n          currentPopup={this.props.currentPopup}\n          displayLocationsCount={this.props.displayLocationsCount}\n          displayLocationsLink={this.props.displayLocationsLink}\n          issue={issue}\n          onFilter={this.props.onFilter}\n          togglePopup={this.props.togglePopup}\n        />\n        <IssueActionsBar\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onAssign={this.props.onAssign}\n          onChange={this.props.onChange}\n          togglePopup={this.props.togglePopup}\n        />\n        {issue.comments && issue.comments.length > 0 && (\n          <div className=\"issue-comments\">\n            {issue.comments.map(comment => (\n              <IssueCommentLine\n                comment={comment}\n                key={comment.key}\n                onDelete={this.deleteComment}\n                onEdit={this.editComment}\n              />\n            ))}\n          </div>\n        )}\n        {hasCheckbox && (\n          <>\n            <Checkbox\n              checked={this.props.checked || false}\n              className=\"issue-checkbox-container\"\n              onCheck={this.handleCheck}\n            />\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nfunction isClickable(node: HTMLElement | undefined | null): boolean {\n  if (!node) {\n    return false;\n  }\n  const clickableTags = ['A', 'BUTTON', 'INPUT', 'TEXTAREA'];\n  const tagName = (node.tagName || '').toUpperCase();\n  return clickableTags.includes(tagName) || isClickable(node.parentElement);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport * as React from 'react';\nimport { setIssueAssignee } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport './Issue.css';\nimport IssueView from './IssueView';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup?: string;\n  selected: boolean;\n}\n\nexport default class Issue extends React.PureComponent<Props> {\n  static defaultProps = {\n    selected: false\n  };\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUpdate(nextProps: Props) {\n    if (!nextProps.selected && this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.selected && this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  bindShortcuts() {\n    key('f', 'issues', () => {\n      this.togglePopup('transition');\n      return false;\n    });\n    key('a', 'issues', () => {\n      this.togglePopup('assign');\n      return false;\n    });\n    key('m', 'issues', () => {\n      if (this.props.issue.actions.includes('assign')) {\n        this.handleAssignement('_me');\n      }\n      return false;\n    });\n    key('i', 'issues', () => {\n      this.togglePopup('set-severity');\n      return false;\n    });\n    key('c', 'issues', () => {\n      this.togglePopup('comment');\n      return false;\n    });\n    key('t', 'issues', () => {\n      this.togglePopup('edit-tags');\n      return false;\n    });\n    key('space', 'issues', () => {\n      if (this.props.onCheck) {\n        this.props.onCheck(this.props.issue.key);\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  unbindShortcuts() {\n    key.unbind('f', 'issues');\n    key.unbind('a', 'issues');\n    key.unbind('m', 'issues');\n    key.unbind('i', 'issues');\n    key.unbind('c', 'issues');\n    key.unbind('space', 'issues');\n    key.unbind('t', 'issues');\n  }\n\n  togglePopup = (popupName: string, open?: boolean) => {\n    this.props.onPopupToggle(this.props.issue.key, popupName, open);\n  };\n\n  handleAssignement = (login: string) => {\n    const { issue } = this.props;\n    if (issue.assignee !== login) {\n      updateIssue(this.props.onChange, setIssueAssignee({ issue: issue.key, assignee: login }));\n    }\n    this.togglePopup('assign', false);\n  };\n\n  render() {\n    return (\n      <IssueView\n        branchLike={this.props.branchLike}\n        checked={this.props.checked}\n        currentPopup={this.props.openPopup}\n        displayLocationsCount={this.props.displayLocationsCount}\n        displayLocationsLink={this.props.displayLocationsLink}\n        issue={this.props.issue}\n        onAssign={this.handleAssignement}\n        onChange={this.props.onChange}\n        onCheck={this.props.onCheck}\n        onClick={this.props.onClick}\n        onFilter={this.props.onFilter}\n        selected={this.props.selected}\n        togglePopup={this.togglePopup}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  diff: T.IssueChangelogDiff;\n}\n\nexport default function IssueChangelogDiff({ diff }: Props) {\n  if (diff.key === 'file') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.file_move',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (['from_long_branch', 'from_branch'].includes(diff.key)) {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_short_branch') {\n    // Applies to both legacy short lived branch and pull request\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_non_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'line') {\n    return <p>{translateWithParameters('issue.changelog.line_removed_X', diff.oldValue || '')}</p>;\n  }\n\n  let message;\n  if (diff.newValue != null) {\n    let { newValue } = diff;\n    if (diff.key === 'effort') {\n      newValue = formatMeasure(diff.newValue, 'WORK_DUR');\n    }\n    message = translateWithParameters(\n      'issue.changelog.changed_to',\n      translate('issue.changelog.field', diff.key),\n      newValue\n    );\n  } else {\n    message = translateWithParameters(\n      'issue.changelog.removed',\n      translate('issue.changelog.field', diff.key)\n    );\n  }\n\n  if (diff.oldValue != null) {\n    let { oldValue } = diff;\n    if (diff.key === 'effort') {\n      oldValue = formatMeasure(diff.oldValue, 'WORK_DUR');\n    }\n    message += ` (${translateWithParameters('issue.changelog.was', oldValue)})`;\n  }\n  return <p>{message}</p>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationMessage.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  selected: boolean;\n}\n\nexport default function LocationMessage(props: Props) {\n  return (\n    <div className={classNames('location-message', { selected: props.selected })}>\n      {props.children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardIconButton } from 'sonar-ui-common/components/controls/clipboard';\nimport ExpandSnippetIcon from 'sonar-ui-common/components/icons/ExpandSnippetIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { collapsedDirFromPath, fileFromPath } from 'sonar-ui-common/helpers/path';\nimport { getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { getBranchLikeQuery } from '../../helpers/branch-like';\nimport { getBranchLikeUrl, getComponentIssuesUrl } from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\nimport { ComponentQualifier } from '../../types/component';\nimport './SourceViewerHeaderSlim.css';\n\nexport interface Props {\n  branchLike: BranchLike | undefined;\n  expandable?: boolean;\n  displayProjectName?: boolean;\n  linkToProject?: boolean;\n  loading?: boolean;\n  onExpand?: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nexport default function SourceViewerHeaderSlim(props: Props) {\n  const {\n    branchLike,\n    expandable,\n    displayProjectName = true,\n    linkToProject = true,\n    loading,\n    onExpand,\n    sourceViewerFile\n  } = props;\n  const { measures, path, project, projectName, q, subProject, subProjectName } = sourceViewerFile;\n\n  const projectNameLabel = (\n    <>\n      <QualifierIcon qualifier={ComponentQualifier.Project} /> <span>{projectName}</span>\n    </>\n  );\n\n  return (\n    <div className=\"source-viewer-header-slim display-flex-row display-flex-space-between\">\n      <div className=\"display-flex-center flex-1\">\n        {displayProjectName && (\n          <div className=\"spacer-right\">\n            {linkToProject ? (\n              <a\n                className=\"link-with-icon\"\n                href={getPathUrlAsString(getBranchLikeUrl(project, branchLike))}>\n                {projectNameLabel}\n              </a>\n            ) : (\n              projectNameLabel\n            )}\n          </div>\n        )}\n\n        {subProject !== undefined && (\n          <>\n            <QualifierIcon qualifier={ComponentQualifier.SubProject} />{' '}\n            <span className=\"spacer-right\">{subProjectName}</span>\n          </>\n        )}\n\n        <div className=\"spacer-right\">\n          <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n          <span className=\"component-name-file\">{fileFromPath(path)}</span>\n        </div>\n\n        <div className=\"spacer-right\">\n          <ClipboardIconButton className=\"button-link link-no-underline\" copyValue={path} />\n        </div>\n      </div>\n\n      {measures.issues !== undefined && (\n        <div\n          className={classNames('flex-0 big-spacer-left', {\n            'little-spacer-right': !expandable || loading\n          })}>\n          <Link\n            to={getComponentIssuesUrl(project, {\n              ...getBranchLikeQuery(branchLike),\n              files: path,\n              resolved: 'false'\n            })}>\n            {translate('source_viewer.view_all_issues')}\n          </Link>\n        </div>\n      )}\n\n      {expandable && (\n        <DeferredSpinner className=\"little-spacer-right\" loading={loading}>\n          <div className=\"flex-0 big-spacer-left\">\n            <ButtonIcon className=\"js-actions\" onClick={onExpand}>\n              <ExpandSnippetIcon />\n            </ButtonIcon>\n          </div>\n        </DeferredSpinner>\n      )}\n    </div>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./SourceViewerHeaderSlim.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".source-viewer-header-slim{padding:4px 10px;border-bottom:1px solid #cdcdcd;background-color:#f3f3f3;align-items:center;min-height:25px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Line.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".source-line:hover .source-line-coverage,.source-line:hover .source-line-duplications,.source-line:hover .source-line-duplications-extra,.source-line:hover .source-line-issues,.source-line:hover .source-line-number,.source-line:hover .source-line-scm{border-color:#e9e9e9;background-color:#e9e9e9}.source-line:hover .source-line-code{background-color:#f5f5f5}.source-line [role=button]{cursor:pointer}.source-line-highlighted .source-line-coverage,.source-line-highlighted .source-line-duplications,.source-line-highlighted .source-line-duplications-extra,.source-line-highlighted .source-line-issues,.source-line-highlighted .source-line-number,.source-line-highlighted .source-line-scm,.source-line-highlighted:hover .source-line-coverage,.source-line-highlighted:hover .source-line-duplications,.source-line-highlighted:hover .source-line-duplications-extra,.source-line-highlighted:hover .source-line-issues,.source-line-highlighted:hover .source-line-number,.source-line-highlighted:hover .source-line-scm{border-color:#c4dfec!important;background-color:#c4dfec}.source-line-highlighted .source-line-code,.source-line-highlighted:hover .source-line-code{background-color:#d9edf7}.source-line-filtered .source-line-code{background-color:#fbf3d5!important}.source-line-filtered.source-line-highlighted .source-line-code,.source-line-filtered.source-line-highlighted:hover .source-line-code{background-color:#cdd9c4!important}.source-line-filtered.source-line-filtered-dark .source-line-code{background-color:#f9ebb7!important}.source-line-filtered.source-line-filtered-dark:hover .source-line-code,.source-line-filtered:hover .source-line-code{background-color:#f1e8cb!important}.source-line-last .source-line-code{padding-bottom:160px}.source-line-number,.source-line-scm,.source-viewer pre{line-height:18px;font-family:Consolas,Ubuntu Mono,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.source-line-code{position:relative;padding:0 10px}.source-line-code pre{float:left;word-wrap:break-word;white-space:pre-wrap}.source-line-code .issue-list{margin-left:-10px;margin-right:-10px}.source-line-code-inner{min-height:18px}.source-line-code-inner:after,.source-line-code-inner:before{display:table;content:\\\"\\\";line-height:0}.source-line-code-inner:after{clear:both}.source-line-code-inner pre{-moz-tab-size:4;tab-size:4}.source-line-code-issue{display:inline-block;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAGCAYAAAAPDoR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1M0M2Rjk4M0M3QUYxMUUzODkzRUREMUM5OTNDMjY4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1M0M2Rjk4NEM3QUYxMUUzODkzRUREMUM5OTNDMjY4QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUzQzZGOTgxQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUzQzZGOTgyQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bcqJtQAAAEhJREFUeNpi+G+swwDGDAwgbAWlwZiJAQFCgfgwEIfDRaC67ID4NRDnQ2kQnwFZwgFqnANMAQOUYY9sF0wBiCGH5CBkrAgQYACuWi4sSGW8yAAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-size:4px;background-position:bottom}.source-meta{position:relative;vertical-align:top;width:1px;background-clip:padding-box;-webkit-user-select:none;-ms-user-select:none;user-select:none}.source-meta:focus{outline:none}.source-line-number{min-width:18px;padding:0 10px;background-color:#f3f3f3;color:#666;text-align:right}.source-line-issues{position:relative;padding:0 2px;background-color:#f3f3f3;white-space:nowrap}.source-line-with-issues svg{padding-right:2px;vertical-align:middle}.source-line-issues-counter{position:absolute;left:17px;line-height:8px;font-size:8px;z-index:900}.source-line-coverage,.source-line-duplications,.source-line-duplications-extra{background-color:#f3f3f3}.source-line-duplications-extra{display:none}.source-line-scm{padding:0 5px;background-color:#f3f3f3}.source-line-scm .dropdown{display:block}.source-line-scm [role=button]{height:18px}.source-line-scm-inner{max-width:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-line-bar{width:5px;height:18px}.source-line-bar:focus{outline:none}.source-line-covered{background-color:#b4dd78!important}.source-line-partially-covered,.source-line-uncovered{background-color:#a4030f!important}.source-line-partially-covered{background-image:repeating-linear-gradient(45deg,hsla(0,0%,100%,.5) 4px,transparent 0,transparent 8px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 12px,transparent 0,transparent 16px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 20px)!important}.source-line-duplicated{background-color:#797979!important}.source-viewer-bubble-popup a{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:13px;text-align:left;-webkit-user-select:text;-ms-user-select:text;user-select:text;border-bottom:none;transition:none;color:unset}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#a4030f}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){margin-left:-22px}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#a4030f}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:\\\"\\\"}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#f2dede;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-see-rule{border-bottom:none;font-size:12px}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#666;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none}.issue-comment-text.markdown pre{float:none;height:auto;margin:0;padding:8px;background-color:#e6e6e6;border:none;border-radius:3px}.issue-comment-text.markdown br~pre{margin-top:8px}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:\\\"\\\";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#999}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}.issue .badge-error{background-color:#eec8c8}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { intersection } from 'lodash';\n\nexport function optimizeHighlightedSymbols(\n  symbolsForLine: string[] = [],\n  highlightedSymbols: string[] = []\n): string[] | undefined {\n  const symbols = intersection(symbolsForLine, highlightedSymbols);\n\n  return symbols.length ? symbols : undefined;\n}\n\nexport function optimizeLocationMessage(\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined,\n  optimizedSecondaryIssueLocations: T.LinearIssueLocation[]\n) {\n  return highlightedLocationMessage != null &&\n    optimizedSecondaryIssueLocations.some(\n      location => location.index === highlightedLocationMessage.index\n    )\n    ? highlightedLocationMessage\n    : undefined;\n}\n\nexport function optimizeSelectedIssue(selectedIssue: string | undefined, issuesForLine: T.Issue[]) {\n  return selectedIssue !== undefined && issuesForLine.find(issue => issue.key === selectedIssue)\n    ? selectedIssue\n    : undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport Issue from '../../issue/Issue';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  onIssueChange: (issue: T.Issue) => void;\n  onIssueClick: (issueKey: string) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  selectedIssue: string | undefined;\n}\n\nexport default function LineIssuesList(props: Props) {\n  const { issuePopup } = props;\n\n  return (\n    <div className=\"issue-list\">\n      {props.issues.map(issue => (\n        <Issue\n          branchLike={props.branchLike}\n          displayLocationsCount={props.displayIssueLocationsCount}\n          displayLocationsLink={props.displayIssueLocationsLink}\n          issue={issue}\n          key={issue.key}\n          onChange={props.onIssueChange}\n          onClick={props.onIssueClick}\n          onPopupToggle={props.onIssuePopupToggle}\n          openPopup={issuePopup && issuePopup.issue === issue.key ? issuePopup.name : undefined}\n          selected={props.selectedIssue === issue.key}\n        />\n      ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport LocationIndex from '../../common/LocationIndex';\nimport LocationMessage from '../../common/LocationMessage';\nimport {\n  highlightIssueLocations,\n  highlightSymbol,\n  splitByTokens,\n  Token\n} from '../helpers/highlight';\nimport LineIssuesList from './LineIssuesList';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  line: T.SourceLine;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: Array<string>) => void;\n  padding?: number;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  showIssues?: boolean;\n}\n\ninterface State {\n  tokens: Token[];\n}\n\nexport default class LineCode extends React.PureComponent<Props, State> {\n  activeMarkerNode?: HTMLElement | null;\n  codeNode?: HTMLElement | null;\n  symbols?: NodeListOf<HTMLElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      tokens: splitByTokens(props.line.code || '')\n    };\n  }\n\n  componentDidMount() {\n    this.attachEvents();\n    if (this.props.highlightedLocationMessage && this.activeMarkerNode && this.props.scroll) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.line.code !== this.props.line.code) {\n      this.setState({\n        tokens: splitByTokens(nextProps.line.code || '')\n      });\n    }\n  }\n\n  componentWillUpdate() {\n    this.detachEvents();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    this.attachEvents();\n    if (\n      this.props.highlightedLocationMessage &&\n      (!prevProps.highlightedLocationMessage ||\n        prevProps.highlightedLocationMessage.index !==\n          this.props.highlightedLocationMessage.index) &&\n      this.activeMarkerNode &&\n      this.props.scroll\n    ) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachEvents();\n  }\n\n  attachEvents() {\n    if (this.codeNode) {\n      this.symbols = this.codeNode.querySelectorAll('.sym');\n      if (this.symbols) {\n        for (let i = 0; i < this.symbols.length; i++) {\n          const symbol = this.symbols[i];\n          symbol.addEventListener('click', this.handleSymbolClick);\n        }\n      }\n    }\n  }\n\n  detachEvents() {\n    if (this.symbols) {\n      for (let i = 0; i < this.symbols.length; i++) {\n        const symbol = this.symbols[i];\n        symbol.addEventListener('click', this.handleSymbolClick);\n      }\n    }\n  }\n\n  handleSymbolClick = (event: MouseEvent) => {\n    event.preventDefault();\n    const keys = (event.currentTarget as HTMLElement).className.match(/sym-\\d+/g);\n    if (keys && keys.length > 0) {\n      this.props.onSymbolClick(keys);\n    }\n  };\n\n  renderMarker(index: number, message: string | undefined, selected: boolean, leading: boolean) {\n    const { onLocationSelect } = this.props;\n    const onClick = onLocationSelect ? () => onLocationSelect(index) : undefined;\n    const ref = selected ? (node: HTMLElement | null) => (this.activeMarkerNode = node) : undefined;\n    return (\n      <LocationIndex\n        key={`marker-${index}`}\n        leading={leading}\n        onClick={onClick}\n        selected={selected}>\n        <span ref={ref}>{index + 1}</span>\n        {message && <LocationMessage selected={true}>{message}</LocationMessage>}\n      </LocationIndex>\n    );\n  }\n\n  render() {\n    const {\n      highlightedLocationMessage,\n      highlightedSymbols,\n      issues,\n      issueLocations,\n      line,\n      onIssueSelect,\n      padding,\n      secondaryIssueLocations,\n      selectedIssue,\n      showIssues\n    } = this.props;\n\n    let tokens = [...this.state.tokens];\n\n    if (highlightedSymbols) {\n      highlightedSymbols.forEach(symbol => {\n        tokens = highlightSymbol(tokens, symbol);\n      });\n    }\n\n    if (issueLocations.length > 0) {\n      tokens = highlightIssueLocations(tokens, issueLocations);\n    }\n\n    if (secondaryIssueLocations) {\n      tokens = highlightIssueLocations(tokens, secondaryIssueLocations, 'issue-location');\n\n      if (highlightedLocationMessage) {\n        const location = secondaryIssueLocations.find(\n          location => location.index === highlightedLocationMessage.index\n        );\n        if (location) {\n          tokens = highlightIssueLocations(tokens, [location], 'selected');\n        }\n      }\n    }\n\n    const className = classNames('source-line-code', 'code', {\n      'has-issues': issues.length > 0\n    });\n\n    const renderedTokens: React.ReactNode[] = [];\n\n    // track if the first marker is displayed before the source code\n    // set `false` for the first token in a row\n    let leadingMarker = false;\n\n    tokens.forEach((token, index) => {\n      if (this.props.displayLocationMarkers && token.markers.length > 0) {\n        token.markers.forEach(marker => {\n          const selected =\n            highlightedLocationMessage !== undefined && highlightedLocationMessage.index === marker;\n          const loc = secondaryIssueLocations.find(loc => loc.index === marker);\n          const message = loc && loc.text;\n          renderedTokens.push(this.renderMarker(marker, message, selected, leadingMarker));\n        });\n      }\n      renderedTokens.push(\n        <span className={token.className} key={index}>\n          {token.text}\n        </span>\n      );\n\n      // keep leadingMarker truthy if previous token has only whitespaces\n      leadingMarker = (index === 0 ? true : leadingMarker) && !token.text.trim().length;\n    });\n\n    const style = padding ? { paddingBottom: `${padding}px` } : undefined;\n    const filteredSelectedIssues = issues.filter(i => i.key === selectedIssue);\n\n    return (\n      <td className={className} data-line-number={line.line} style={style}>\n        <div className=\"source-line-code-inner\">\n          <pre ref={node => (this.codeNode = node)}>{renderedTokens}</pre>\n        </div>\n        {showIssues && issues.length > 0 && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n            displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n            issuePopup={this.props.issuePopup}\n            issues={issues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n        {selectedIssue && !showIssues && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            issuePopup={this.props.issuePopup}\n            issues={filteredSelectedIssues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\nexport interface LineCoverageProps {\n  line: T.SourceLine;\n  scroll?: (element: HTMLElement) => void;\n  scrollToUncoveredLine?: boolean;\n}\n\nexport function LineCoverage({ line, scroll, scrollToUncoveredLine }: LineCoverageProps) {\n  const coverageMarker = React.useRef<HTMLTableDataCellElement>(null);\n  React.useEffect(() => {\n    if (scrollToUncoveredLine && scroll && coverageMarker.current) {\n      scroll(coverageMarker.current);\n    }\n  }, [scrollToUncoveredLine, scroll, coverageMarker]);\n\n  const className =\n    'source-meta source-line-coverage' +\n    (line.coverageStatus != null ? ` source-line-${line.coverageStatus}` : '');\n  const status = getStatusTooltip(line);\n\n  return (\n    <td className={className} data-line-number={line.line} ref={coverageMarker}>\n      <Tooltip overlay={status} placement=\"bottom\">\n        <div aria-label={status} className=\"source-line-bar\" />\n      </Tooltip>\n    </td>\n  );\n}\n\nfunction getStatusTooltip(line: T.SourceLine) {\n  if (line.coverageStatus === 'uncovered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.uncovered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.uncovered');\n    }\n  } else if (line.coverageStatus === 'covered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.covered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.covered');\n    }\n  } else if (line.coverageStatus === 'partially-covered') {\n    if (line.conditions) {\n      return translateWithParameters(\n        'source_viewer.tooltip.partially-covered.conditions',\n        line.coveredConditions || 0,\n        line.conditions\n      );\n    } else {\n      return translate('source_viewer.tooltip.partially-covered');\n    }\n  }\n  return undefined;\n}\n\nexport default React.memo(LineCoverage);\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface LineDuplicationBlockProps {\n  blocksLoaded: boolean;\n  duplicated: boolean;\n  index: number;\n  line: T.SourceLine;\n  onClick?: (line: T.SourceLine) => void;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n}\n\nexport function LineDuplicationBlock(props: LineDuplicationBlockProps) {\n  const { blocksLoaded, duplicated, index, line } = props;\n  const [dropdownOpen, setDropdownOpen] = React.useState(false);\n\n  const className = classNames('source-meta', 'source-line-duplications', {\n    'source-line-duplicated': duplicated\n  });\n\n  return duplicated ? (\n    <td className={className} data-index={index} data-line-number={line.line}>\n      <Tooltip\n        overlay={dropdownOpen ? undefined : translate('source_viewer.tooltip.duplicated_block')}\n        placement=\"right\">\n        <div>\n          <Toggler\n            onRequestClose={() => setDropdownOpen(false)}\n            open={dropdownOpen}\n            overlay={\n              <DropdownOverlay placement={PopupPlacement.RightTop}>\n                {props.renderDuplicationPopup(index, line.line)}\n              </DropdownOverlay>\n            }>\n            <div\n              aria-label={translate('source_viewer.tooltip.duplicated_block')}\n              className=\"source-line-bar\"\n              onClick={() => {\n                setDropdownOpen(true);\n                if (!blocksLoaded && line.duplicated && props.onClick) {\n                  props.onClick(line);\n                }\n              }}\n              role=\"button\"\n              tabIndex={0}\n            />\n          </Toggler>\n        </div>\n      </Tooltip>\n    </td>\n  ) : (\n    <td className={className} data-index={index} data-line-number={line.line}>\n      <div className=\"source-line-bar\" />\n    </td>\n  );\n}\n\nexport default React.memo(LineDuplicationBlock);\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { uniq } from 'lodash';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport IssueIcon from 'sonar-ui-common/components/icons/IssueIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { sortByType } from '../../../helpers/issues';\n\nexport interface LineIssuesIndicatorProps {\n  issues: T.Issue[];\n  issuesOpen?: boolean;\n  line: T.SourceLine;\n  onClick: () => void;\n}\n\nexport function LineIssuesIndicator(props: LineIssuesIndicatorProps) {\n  const { issues, issuesOpen, line } = props;\n  const hasIssues = issues.length > 0;\n  const className = classNames('source-meta', 'source-line-issues', {\n    'source-line-with-issues': hasIssues\n  });\n\n  if (!hasIssues) {\n    return <td className={className} data-line-number={line.line} />;\n  }\n\n  const mostImportantIssue = sortByType(issues)[0];\n  const issueTypes = uniq(issues.map(i => i.type));\n\n  let tooltipContent;\n  if (issueTypes.length > 1) {\n    tooltipContent = translate('source_viewer.issues_on_line.multiple_issues');\n  } else if (issues.length === 1) {\n    tooltipContent = translateWithParameters(\n      'source_viewer.issues_on_line.issue_of_type_X',\n      translate('issue.type', mostImportantIssue.type)\n    );\n  } else {\n    tooltipContent = translateWithParameters(\n      'source_viewer.issues_on_line.X_issues_of_type_Y',\n      issues.length,\n      translate('issue.type', mostImportantIssue.type, 'plural')\n    );\n  }\n\n  return (\n    <td className={className} data-line-number={line.line}>\n      <span\n        aria-label={translate('source_viewer.issues_on_line', issuesOpen ? 'hide' : 'show')}\n        onClick={(e: React.MouseEvent<HTMLElement>) => {\n          e.preventDefault();\n          e.currentTarget.blur();\n          props.onClick();\n        }}\n        role=\"button\"\n        tabIndex={0}>\n        <Tooltip overlay={tooltipContent}>\n          <IssueIcon type={mostImportantIssue.type} />\n        </Tooltip>\n        {issues.length > 1 && <span className=\"source-line-issues-counter\">{issues.length}</span>}\n      </span>\n    </td>\n  );\n}\n\nexport default React.memo(LineIssuesIndicator);\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ActionsDropdownItem } from 'sonar-ui-common/components/controls/ActionsDropdown';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { getCodeUrl } from '../../../helpers/urls';\nimport { SourceViewerContext } from '../SourceViewerContext';\n\nexport interface LineOptionsPopupProps {\n  firstLineNumber: number;\n  line: T.SourceLine;\n}\n\nexport function LineOptionsPopup({ firstLineNumber, line }: LineOptionsPopupProps) {\n  return (\n    <SourceViewerContext.Consumer>\n      {({ branchLike, file }) => {\n        const codeLocation = getCodeUrl(file.project, branchLike, file.key, line.line);\n        const codeUrl = getPathUrlAsString(codeLocation, false);\n        const isAtTop = line.line - 4 < firstLineNumber;\n        return (\n          <DropdownOverlay\n            className=\"big-spacer-left\"\n            noPadding={true}\n            placement={isAtTop ? PopupPlacement.BottomLeft : PopupPlacement.TopLeft}>\n            <ul className=\"padded source-viewer-bubble-popup nowrap\">\n              <ActionsDropdownItem copyValue={codeUrl}>\n                {translate('component_viewer.copy_permalink')}\n              </ActionsDropdownItem>\n            </ul>\n          </DropdownOverlay>\n        );\n      }}\n    </SourceViewerContext.Consumer>\n  );\n}\n\nexport default React.memo(LineOptionsPopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport LineOptionsPopup from './LineOptionsPopup';\n\nexport interface LineNumberProps {\n  displayOptions: boolean;\n  firstLineNumber: number;\n  line: T.SourceLine;\n}\n\nexport function LineNumber({ displayOptions, firstLineNumber, line }: LineNumberProps) {\n  const [isOpen, setOpen] = React.useState<boolean>(false);\n  const { line: lineNumber } = line;\n  const hasLineNumber = !!lineNumber;\n\n  return hasLineNumber ? (\n    <td className=\"source-meta source-line-number\" data-line-number={lineNumber}>\n      {displayOptions ? (\n        <Toggler\n          closeOnClickOutside={true}\n          onRequestClose={() => setOpen(false)}\n          open={isOpen}\n          overlay={<LineOptionsPopup firstLineNumber={firstLineNumber} line={line} />}>\n          <span\n            aria-expanded={isOpen}\n            aria-haspopup={true}\n            aria-label={translateWithParameters('source_viewer.line_X', lineNumber)}\n            onClick={() => setOpen(true)}\n            role=\"button\"\n            tabIndex={0}>\n            {lineNumber}\n          </span>\n        </Toggler>\n      ) : (\n        lineNumber\n      )}\n    </td>\n  ) : (\n    <td className=\"source-meta source-line-number\" />\n  );\n}\n\nexport default React.memo(LineNumber);\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DateFormatter from 'sonar-ui-common/components/intl/DateFormatter';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface SCMPopupProps {\n  line: T.SourceLine;\n}\n\nexport function SCMPopup({ line }: SCMPopupProps) {\n  const hasAuthor = line.scmAuthor !== undefined && line.scmAuthor !== '';\n  const hasDate = line.scmDate !== undefined;\n  return (\n    <div className=\"source-viewer-bubble-popup abs-width-400\">\n      {hasAuthor && (\n        <div>\n          <h4>{translate('author')}</h4>\n          {line.scmAuthor}\n        </div>\n      )}\n      {hasDate && (\n        <div className={classNames({ 'spacer-top': hasAuthor })}>\n          <h4>{translate('source_viewer.tooltip.scm.commited_on')}</h4>\n          <DateFormatter date={line.scmDate!} />\n        </div>\n      )}\n      {line.scmRevision && (\n        <div className={classNames({ 'spacer-top': hasAuthor || hasDate })}>\n          <h4>{translate('source_viewer.tooltip.scm.revision')}</h4>\n          {line.scmRevision}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default React.memo(SCMPopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport SCMPopup from './SCMPopup';\n\nexport interface LineSCMProps {\n  line: T.SourceLine;\n  previousLine: T.SourceLine | undefined;\n}\n\nexport function LineSCM({ line, previousLine }: LineSCMProps) {\n  const hasPopup = !!line.line;\n  const cell = (\n    <div className=\"source-line-scm-inner\">\n      {isSCMChanged(line, previousLine) ? line.scmAuthor || '…' : ' '}\n    </div>\n  );\n\n  if (hasPopup) {\n    let ariaLabel = translate('source_viewer.click_for_scm_info');\n    if (line.scmAuthor) {\n      ariaLabel = `${translateWithParameters(\n        'source_viewer.author_X',\n        line.scmAuthor\n      )}, ${ariaLabel}`;\n    }\n\n    return (\n      <td className=\"source-meta source-line-scm\" data-line-number={line.line}>\n        <Dropdown overlay={<SCMPopup line={line} />} overlayPlacement={PopupPlacement.RightTop}>\n          <div aria-label={ariaLabel} role=\"button\">\n            {cell}\n          </div>\n        </Dropdown>\n      </td>\n    );\n  } else {\n    return (\n      <td className=\"source-meta source-line-scm\" data-line-number={line.line}>\n        {cell}\n      </td>\n    );\n  }\n}\n\nfunction isSCMChanged(s: T.SourceLine, p: T.SourceLine | undefined) {\n  let changed = true;\n  if (p != null && s.scmRevision != null && p.scmRevision != null) {\n    changed = s.scmRevision !== p.scmRevision || s.scmDate !== p.scmDate;\n  }\n  return changed;\n}\n\nexport default React.memo(LineSCM);\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { times } from 'lodash';\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport './Line.css';\nimport LineCode from './LineCode';\nimport LineCoverage from './LineCoverage';\nimport LineDuplicationBlock from './LineDuplicationBlock';\nimport LineIssuesIndicator from './LineIssuesIndicator';\nimport LineNumber from './LineNumber';\nimport LineSCM from './LineSCM';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayAllIssues?: boolean;\n  displayCoverage: boolean;\n  displayDuplications: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayIssues: boolean;\n  displayLineNumberOptions?: boolean;\n  displayLocationMarkers?: boolean;\n  displaySCM?: boolean;\n  duplications: number[];\n  duplicationsCount: number;\n  firstLineNumber: number;\n  highlighted: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  last: boolean;\n  line: T.SourceLine;\n  loadDuplications: (line: T.SourceLine) => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issueKey: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLocationSelect: ((x: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssues: boolean;\n  previousLine: T.SourceLine | undefined;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  scrollToUncoveredLine?: boolean;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  verticalBuffer?: number;\n}\n\nconst LINE_HEIGHT = 18;\n\nexport default class Line extends React.PureComponent<Props> {\n  handleIssuesIndicatorClick = () => {\n    if (this.props.openIssues) {\n      this.props.onIssuesClose(this.props.line);\n      this.props.onIssueUnselect();\n    } else {\n      this.props.onIssuesOpen(this.props.line);\n\n      const { issues } = this.props;\n      if (issues.length > 0) {\n        this.props.onIssueSelect(issues[0].key);\n      }\n    }\n  };\n\n  render() {\n    const {\n      branchLike,\n      displayAllIssues,\n      displayCoverage,\n      displayDuplications,\n      displayIssueLocationsCount,\n      displayIssueLocationsLink,\n      displayLineNumberOptions,\n      displayLocationMarkers,\n      highlightedLocationMessage,\n      displayIssues,\n      displaySCM = true,\n      duplications,\n      duplicationsCount,\n      firstLineNumber,\n      highlighted,\n      highlightedSymbols,\n      issueLocations,\n      issuePopup,\n      issues,\n      last,\n      line,\n      openIssues,\n      previousLine,\n      scrollToUncoveredLine,\n      secondaryIssueLocations,\n      selectedIssue,\n      verticalBuffer\n    } = this.props;\n\n    const className = classNames('source-line', {\n      'source-line-highlighted': highlighted,\n      'source-line-filtered': line.isNew,\n      'source-line-filtered-dark':\n        displayCoverage &&\n        (line.coverageStatus === 'uncovered' || line.coverageStatus === 'partially-covered'),\n      'source-line-last': last === true\n    });\n\n    const bottomPadding = verticalBuffer ? verticalBuffer * LINE_HEIGHT : undefined;\n\n    // default is true\n    const displayOptions = displayLineNumberOptions !== false;\n\n    return (\n      <tr className={className} data-line-number={line.line}>\n        <LineNumber displayOptions={displayOptions} firstLineNumber={firstLineNumber} line={line} />\n\n        {displaySCM && <LineSCM line={line} previousLine={previousLine} />}\n        {displayIssues && !displayAllIssues ? (\n          <LineIssuesIndicator\n            issues={issues}\n            issuesOpen={openIssues}\n            line={line}\n            onClick={this.handleIssuesIndicatorClick}\n          />\n        ) : (\n          <td className=\"source-meta source-line-issues\" />\n        )}\n\n        {displayDuplications && (\n          <LineDuplicationBlock\n            blocksLoaded={duplicationsCount > 0}\n            duplicated={Boolean(line.duplicated)}\n            index={0}\n            key={0}\n            line={this.props.line}\n            onClick={this.props.loadDuplications}\n            renderDuplicationPopup={this.props.renderDuplicationPopup}\n          />\n        )}\n\n        {duplicationsCount > 1 &&\n          times(duplicationsCount - 1, index => (\n            <LineDuplicationBlock\n              blocksLoaded={true}\n              duplicated={duplications.includes(index + 1)}\n              index={index + 1}\n              key={index + 1}\n              line={this.props.line}\n              renderDuplicationPopup={this.props.renderDuplicationPopup}\n            />\n          ))}\n\n        {displayCoverage && (\n          <LineCoverage\n            line={line}\n            scroll={this.props.scroll}\n            scrollToUncoveredLine={scrollToUncoveredLine}\n          />\n        )}\n\n        <LineCode\n          branchLike={branchLike}\n          displayIssueLocationsCount={displayIssueLocationsCount}\n          displayIssueLocationsLink={displayIssueLocationsLink}\n          displayLocationMarkers={displayLocationMarkers}\n          highlightedLocationMessage={highlightedLocationMessage}\n          highlightedSymbols={highlightedSymbols}\n          issueLocations={issueLocations}\n          issuePopup={issuePopup}\n          issues={issues}\n          line={line}\n          onIssueChange={this.props.onIssueChange}\n          onIssuePopupToggle={this.props.onIssuePopupToggle}\n          onIssueSelect={this.props.onIssueSelect}\n          onLocationSelect={this.props.onLocationSelect}\n          onSymbolClick={this.props.onSymbolClick}\n          padding={bottomPadding}\n          scroll={this.props.scroll}\n          secondaryIssueLocations={secondaryIssueLocations}\n          selectedIssue={selectedIssue}\n          showIssues={openIssues || displayAllIssues}\n        />\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { searchIssues } from '../../../api/issues';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { parseIssueFromResponse } from '../../../helpers/issues';\nimport { BranchLike } from '../../../types/branch-like';\n\n// maximum possible value\nconst PAGE_SIZE = 500;\n\nfunction buildQuery(component: string, branchLike: BranchLike | undefined) {\n  return {\n    additionalFields: '_all',\n    resolved: 'false',\n    componentKeys: component,\n    s: 'FILE_LINE',\n    ...getBranchLikeQuery(branchLike)\n  };\n}\n\nexport function loadPage(\n  query: T.RawQuery,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<T.Issue[]> {\n  return searchIssues({\n    ...query,\n    p: page,\n    ps: pageSize\n  }).then(r =>\n    r.issues.map(issue => parseIssueFromResponse(issue, r.components, r.users, r.rules))\n  );\n}\n\nexport function loadPageAndNext(\n  query: T.RawQuery,\n  toLine: number,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<T.Issue[]> {\n  return loadPage(query, page).then(issues => {\n    if (issues.length === 0) {\n      return [];\n    }\n\n    const lastIssue = issues[issues.length - 1];\n\n    if (\n      (lastIssue.textRange != null && lastIssue.textRange.endLine > toLine) ||\n      issues.length < pageSize\n    ) {\n      return issues;\n    }\n\n    return loadPageAndNext(query, toLine, page + 1, pageSize).then(nextIssues => {\n      return [...issues, ...nextIssues];\n    });\n  });\n}\n\nexport default function loadIssues(\n  component: string,\n  _fromLine: number,\n  toLine: number,\n  branchLike: BranchLike | undefined\n): Promise<T.Issue[]> {\n  const query = buildQuery(component, branchLike);\n  return new Promise(resolve => {\n    loadPageAndNext(query, toLine, 1).then(issues => {\n      resolve(issues);\n    });\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { BranchLike } from '../../types/branch-like';\nimport { MetricKey } from '../../types/metrics';\nimport Line from './components/Line';\nimport { getSecondaryIssueLocationsForLine } from './helpers/issueLocations';\nimport {\n  optimizeHighlightedSymbols,\n  optimizeLocationMessage,\n  optimizeSelectedIssue\n} from './helpers/lines';\n\nconst EMPTY_ARRAY: any[] = [];\n\nconst ZERO_LINE = {\n  code: '',\n  duplicated: false,\n  isNew: false,\n  line: 0\n};\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentKey: string;\n  displayAllIssues?: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  duplications: T.Duplication[] | undefined;\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  hasSourcesBefore: boolean;\n  highlightedLine: number | undefined;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintain the location indexes\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[] | undefined;\n  issuesByLine: { [line: number]: T.Issue[] };\n  loadDuplications: (line: T.SourceLine) => void;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  loadSourcesAfter: () => void;\n  loadSourcesBefore: () => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssuesByLine: { [line: number]: boolean };\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  metricKey?: string;\n  selectedIssue: string | undefined;\n  sources: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nexport default class SourceViewerCode extends React.PureComponent<Props> {\n  firstUncoveredLineFound = false;\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.metricKey !== prevProps.metricKey) {\n      this.firstUncoveredLineFound = false;\n    }\n  }\n\n  getDuplicationsForLine = (line: T.SourceLine): number[] => {\n    return this.props.duplicationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssuesForLine = (line: T.SourceLine): T.Issue[] => {\n    return this.props.issuesByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssueLocationsForLine = (line: T.SourceLine): T.LinearIssueLocation[] => {\n    return this.props.issueLocationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  renderLine = ({\n    line,\n    index,\n    displayCoverage,\n    displayDuplications,\n    displayIssues\n  }: {\n    line: T.SourceLine;\n    index: number;\n    displayCoverage: boolean;\n    displayDuplications: boolean;\n    displayIssues: boolean;\n  }) => {\n    const {\n      highlightedLocationMessage,\n      highlightedLocations,\n      metricKey,\n      selectedIssue,\n      sources\n    } = this.props;\n\n    const secondaryIssueLocations = getSecondaryIssueLocationsForLine(line, highlightedLocations);\n\n    const duplicationsCount = this.props.duplications ? this.props.duplications.length : 0;\n\n    const issuesForLine = this.getIssuesForLine(line);\n    const firstLineNumber = sources && sources.length ? sources[0].line : 0;\n\n    let scrollToUncoveredLine = false;\n    if (\n      !this.firstUncoveredLineFound &&\n      displayCoverage &&\n      line.coverageStatus &&\n      ['uncovered', 'partially-covered'].includes(line.coverageStatus)\n    ) {\n      scrollToUncoveredLine =\n        (metricKey === MetricKey.new_uncovered_lines && line.isNew) ||\n        metricKey === MetricKey.uncovered_lines;\n      this.firstUncoveredLineFound = scrollToUncoveredLine;\n    }\n\n    return (\n      <Line\n        branchLike={this.props.branchLike}\n        displayAllIssues={this.props.displayAllIssues}\n        displayCoverage={displayCoverage}\n        displayDuplications={displayDuplications}\n        displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n        displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n        displayIssues={displayIssues}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.getDuplicationsForLine(line)}\n        duplicationsCount={duplicationsCount}\n        firstLineNumber={firstLineNumber}\n        highlighted={line.line === this.props.highlightedLine}\n        highlightedLocationMessage={optimizeLocationMessage(\n          highlightedLocationMessage,\n          secondaryIssueLocations\n        )}\n        highlightedSymbols={optimizeHighlightedSymbols(\n          this.props.symbolsByLine[line.line],\n          this.props.highlightedSymbols\n        )}\n        issueLocations={this.getIssueLocationsForLine(line)}\n        issuePopup={this.props.issuePopup}\n        issues={issuesForLine}\n        key={line.line}\n        last={index === this.props.sources.length - 1 && !this.props.hasSourcesAfter}\n        line={line}\n        loadDuplications={this.props.loadDuplications}\n        onIssueChange={this.props.onIssueChange}\n        onIssuePopupToggle={this.props.onIssuePopupToggle}\n        onIssueSelect={this.props.onIssueSelect}\n        onIssueUnselect={this.props.onIssueUnselect}\n        onIssuesClose={this.props.onIssuesClose}\n        onIssuesOpen={this.props.onIssuesOpen}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.props.onSymbolClick}\n        openIssues={this.props.openIssuesByLine[line.line] || false}\n        previousLine={index > 0 ? sources[index - 1] : undefined}\n        renderDuplicationPopup={this.props.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        scrollToUncoveredLine={scrollToUncoveredLine}\n        secondaryIssueLocations={secondaryIssueLocations}\n        selectedIssue={optimizeSelectedIssue(selectedIssue, issuesForLine)}\n      />\n    );\n  };\n\n  render() {\n    const { issues = [], sources } = this.props;\n\n    const displayCoverage = sources.some(s => s.coverageStatus != null);\n    const displayDuplications = sources.some(s => !!s.duplicated);\n    const displayIssues = issues.length > 0;\n\n    const hasFileIssues = displayIssues && issues.some(issue => !issue.textRange);\n\n    return (\n      <div className=\"source-viewer-code\">\n        {this.props.hasSourcesBefore && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesBefore ? (\n              <div className=\"js-component-viewer-loading-before\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-before\"\n                onClick={this.props.loadSourcesBefore}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n\n        <table className=\"source-table\">\n          <tbody>\n            {hasFileIssues &&\n              this.renderLine({\n                line: ZERO_LINE,\n                index: -1,\n                displayCoverage,\n                displayDuplications,\n                displayIssues\n              })}\n            {sources.map((line, index) =>\n              this.renderLine({ line, index, displayCoverage, displayDuplications, displayIssues })\n            )}\n          </tbody>\n        </table>\n\n        {this.props.hasSourcesAfter && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesAfter ? (\n              <div className=\"js-component-viewer-loading-after\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-after\"\n                onClick={this.props.loadSourcesAfter}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { getLocalizedMetricName } from 'sonar-ui-common/helpers/l10n';\nimport { isMetricKey, MetricKey } from '../../../types/metrics';\nimport Measure from '../../measure/Measure';\n\nexport interface MeasureWithMetric {\n  metric: T.Metric;\n  value?: string;\n}\n\ninterface Props {\n  measure: MeasureWithMetric;\n}\n\nexport default function MeasuresOverlayMeasure({ measure }: Props) {\n  return (\n    <div\n      className=\"measure measure-one-line\"\n      data-metric={measure.metric.key}\n      key={measure.metric.key}>\n      <span className=\"measure-name\">\n        {isMetricKey(measure.metric.key) &&\n          [MetricKey.bugs, MetricKey.vulnerabilities, MetricKey.code_smells].includes(\n            measure.metric.key\n          ) && <IssueTypeIcon className=\"little-spacer-right\" query={measure.metric.key} />}\n        {getLocalizedMetricName(measure.metric)}\n      </span>\n      <span className=\"measure-value\">\n        <Measure\n          metricKey={measure.metric.key}\n          metricType={measure.metric.type}\n          small={true}\n          value={measure.value}\n        />\n      </span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { groupBy, keyBy, sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport DuplicationsRating from 'sonar-ui-common/components/ui/DuplicationsRating';\nimport { getLocalizedMetricName, translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getFacets } from '../../../api/issues';\nimport { getMeasures } from '../../../api/measures';\nimport { getAllMetrics } from '../../../api/metrics';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { ISSUE_TYPES, SEVERITIES } from '../../../helpers/constants';\nimport { enhanceMeasuresWithMetrics, getDisplayMetrics } from '../../../helpers/measures';\nimport { getBranchLikeUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport Measure from '../../measure/Measure';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport CoverageRating from '../../ui/CoverageRating';\nimport MeasuresOverlayMeasure from './MeasuresOverlayMeasure';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  onClose: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface Measures {\n  [metricKey: string]: T.MeasureEnhanced;\n}\n\ninterface State {\n  loading: boolean;\n  measures: Measures;\n  severitiesFacet?: T.FacetValue[];\n  showAllMeasures: boolean;\n  tagsFacet?: T.FacetValue[];\n  typesFacet?: T.FacetValue<T.IssueType>[];\n}\n\nexport default class MeasuresOverlay extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true, measures: {}, showAllMeasures: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchData();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchData = () => {\n    Promise.all([this.fetchMeasures(), this.fetchIssues()]).then(\n      ([measures, facets]) => {\n        if (this.mounted) {\n          this.setState({ loading: false, measures, ...facets });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  fetchMeasures = () => {\n    return getAllMetrics().then(metrics => {\n      const metricKeys = getDisplayMetrics(metrics).map(metric => metric.key);\n\n      // eslint-disable-next-line promise/no-nesting\n      return getMeasures({\n        component: this.props.sourceViewerFile.key,\n        metricKeys: metricKeys.join(),\n        ...getBranchLikeQuery(this.props.branchLike)\n      }).then(measures => {\n        const withMetrics = enhanceMeasuresWithMetrics(measures, metrics).filter(\n          measure => measure.metric\n        );\n        return keyBy(withMetrics, measure => measure.metric.key);\n      });\n    });\n  };\n\n  fetchIssues = () => {\n    return getFacets(\n      {\n        componentKeys: this.props.sourceViewerFile.key,\n        resolved: 'false',\n        ...getBranchLikeQuery(this.props.branchLike)\n      },\n      ['types', 'severities', 'tags']\n    ).then(({ facets }) => {\n      const severitiesFacet = facets.find(f => f.property === 'severities');\n      const tagsFacet = facets.find(f => f.property === 'tags');\n      const typesFacet = facets.find(f => f.property === 'types');\n      return {\n        severitiesFacet: severitiesFacet && severitiesFacet.values,\n        tagsFacet: tagsFacet && tagsFacet.values,\n        typesFacet: typesFacet && (typesFacet.values as T.FacetValue<T.IssueType>[])\n      };\n    });\n  };\n\n  handleAllMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ showAllMeasures: true });\n  };\n\n  renderMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? <MeasuresOverlayMeasure key={measure.metric.key} measure={measure} /> : null;\n  };\n\n  renderLines = () => {\n    const { measures } = this.state;\n\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            {this.renderMeasure(measures.lines)}\n            {this.renderMeasure(measures.ncloc)}\n            {this.renderMeasure(measures.comment_lines)}\n            {this.renderMeasure(measures.comment_lines_density)}\n          </div>\n\n          <div className=\"measures\">\n            {this.renderMeasure(measures.cognitive_complexity)}\n            {this.renderMeasure(measures.complexity)}\n            {this.renderMeasure(measures.function_complexity)}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderBigMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? (\n      <div className=\"measure measure-big\" data-metric={measure.metric.key}>\n        <span className=\"measure-value\">\n          <Measure\n            metricKey={measure.metric.key}\n            metricType={measure.metric.type}\n            value={measure.value}\n          />\n        </span>\n        <span className=\"measure-name\">{getLocalizedMetricName(measure.metric, true)}</span>\n      </div>\n    ) : null;\n  };\n\n  renderIssues = () => {\n    const { measures, severitiesFacet, tagsFacet, typesFacet } = this.state;\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            {this.renderBigMeasure(measures.violations)}\n            {this.renderBigMeasure(measures.sqale_index)}\n          </div>\n          {measures.violations && !!measures.violations.value && (\n            <>\n              {typesFacet && (\n                <div className=\"measures\">\n                  {sortBy(typesFacet, f => ISSUE_TYPES.indexOf(f.val)).map(f => (\n                    <div className=\"measure measure-one-line\" key={f.val}>\n                      <span className=\"measure-name\">\n                        <IssueTypeIcon className=\"little-spacer-right\" query={f.val} />\n                        {translate('issue.type', f.val)}\n                      </span>\n                      <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n              {severitiesFacet && (\n                <div className=\"measures\">\n                  {sortBy(severitiesFacet, f => SEVERITIES.indexOf(f.val)).map(f => (\n                    <div className=\"measure measure-one-line\" key={f.val}>\n                      <span className=\"measure-name\">\n                        <SeverityHelper severity={f.val} />\n                      </span>\n                      <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n              {tagsFacet && (\n                <div className=\"measures\">\n                  {tagsFacet.map(f => (\n                    <div className=\"measure measure-one-line\" key={f.val}>\n                      <span className=\"measure-name\">\n                        <TagsIcon className=\"little-spacer-right\" />\n                        {f.val}\n                      </span>\n                      <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  renderCoverage = () => {\n    const { coverage } = this.state.measures;\n    if (!coverage) {\n      return null;\n    }\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <CoverageRating size=\"big\" value={coverage.value} />\n            </div>\n            <div className=\"measure measure-big\" data-metric={coverage.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={coverage.metric.key}\n                  metricType={coverage.metric.type}\n                  value={coverage.value}\n                />\n              </span>\n              <span className=\"measure-name\">{getLocalizedMetricName(coverage.metric)}</span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            {this.renderMeasure(this.state.measures.uncovered_lines)}\n            {this.renderMeasure(this.state.measures.lines_to_cover)}\n            {this.renderMeasure(this.state.measures.uncovered_conditions)}\n            {this.renderMeasure(this.state.measures.conditions_to_cover)}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDuplications = () => {\n    const { duplicated_lines_density: duplications } = this.state.measures;\n    if (!duplications) {\n      return null;\n    }\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <DuplicationsRating\n                muted={duplications.value === undefined}\n                size=\"big\"\n                value={Number(duplications.value || 0)}\n              />\n            </div>\n            <div className=\"measure measure-big\" data-metric={duplications.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={duplications.metric.key}\n                  metricType={duplications.metric.type}\n                  value={duplications.value}\n                />\n              </span>\n              <span className=\"measure-name\">\n                {getLocalizedMetricName(duplications.metric, true)}\n              </span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            {this.renderMeasure(this.state.measures.duplicated_blocks)}\n            {this.renderMeasure(this.state.measures.duplicated_lines)}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderTests = () => {\n    const { measures } = this.state;\n    return (\n      <div className=\"measures-viewer\">\n        <div className=\"measures-viewer-section measures-viewer-section-limited\">\n          <div className=\"measures-viewer-card\">\n            <div className=\"measures\">\n              {this.renderMeasure(measures.tests)}\n              {this.renderMeasure(measures.test_success_density)}\n              {this.renderMeasure(measures.test_failures)}\n              {this.renderMeasure(measures.test_errors)}\n              {this.renderMeasure(measures.skipped_tests)}\n              {this.renderMeasure(measures.test_execution_time)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDomain = (domain: string, measures: T.MeasureEnhanced[]) => {\n    return (\n      <div className=\"measures-viewer-card\" key={domain}>\n        <div className=\"measures\">\n          <div className=\"measure measure-big\">\n            <span className=\"measure-name\">{translate('metric_domain', domain)}</span>\n          </div>\n          {sortBy(\n            measures.filter(measure => measure.value !== undefined),\n            measure => getLocalizedMetricName(measure.metric)\n          ).map(measure => this.renderMeasure(measure))}\n        </div>\n      </div>\n    );\n  };\n\n  renderAllMeasures = () => {\n    const domains = groupBy(Object.values(this.state.measures), measure => measure.metric.domain);\n    const domainKeys = Object.keys(domains);\n    const odd = domainKeys.filter((_, index) => index % 2 === 1);\n    const even = domainKeys.filter((_, index) => index % 2 === 0);\n    return (\n      <div className=\"measures-viewer measures-viewer-secondary\">\n        <div className=\"measures-viewer-section\">\n          {odd.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n        <div className=\"measures-viewer-section\">\n          {even.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const { branchLike, sourceViewerFile } = this.props;\n    const { loading } = this.state;\n\n    const header = translate('component_viewer.file_measures');\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose} size=\"large\">\n        <div className=\"modal-head\">\n          <h2>{header}</h2>\n        </div>\n        <div className=\"modal-body modal-container\">\n          <div className=\"measures-viewer-header big-spacer-bottom\">\n            <div>\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n              <Link to={getBranchLikeUrl(sourceViewerFile.project, branchLike)}>\n                {sourceViewerFile.projectName}\n              </Link>\n\n              {sourceViewerFile.subProject && (\n                <>\n                  <QualifierIcon className=\"big-spacer-left little-spacer-right\" qualifier=\"BRC\" />\n                  {sourceViewerFile.subProjectName}\n                </>\n              )}\n            </div>\n\n            <div className=\"display-flex-center little-spacer-top\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier={sourceViewerFile.q} />\n              {sourceViewerFile.path}\n            </div>\n          </div>\n\n          {loading ? (\n            <i className=\"spinner\" />\n          ) : (\n            <>\n              {sourceViewerFile.q === 'UTS' ? (\n                this.renderTests()\n              ) : (\n                <div className=\"measures-viewer\">\n                  {this.renderLines()}\n                  {this.renderIssues()}\n                  {this.renderCoverage()}\n                  {this.renderDuplications()}\n                </div>\n              )}\n            </>\n          )}\n\n          <div className=\"spacer-top\">\n            {this.state.showAllMeasures ? (\n              this.renderAllMeasures()\n            ) : (\n              <a className=\"js-show-all-measures\" href=\"#\" onClick={this.handleAllMeasuresClick}>\n                {translate('component_viewer.show_all_measures')}\n              </a>\n            )}\n          </div>\n        </div>\n\n        <footer className=\"modal-foot\">\n          <ResetButtonLink onClick={this.props.onClose}>{translate('close')}</ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardIconButton } from 'sonar-ui-common/components/controls/clipboard';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport ListIcon from 'sonar-ui-common/components/icons/ListIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { collapsedDirFromPath, fileFromPath } from 'sonar-ui-common/helpers/path';\nimport { omitNil } from 'sonar-ui-common/helpers/request';\nimport { getBaseUrl, getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { getBranchLikeQuery } from '../../helpers/branch-like';\nimport { ISSUE_TYPES } from '../../helpers/constants';\nimport { ISSUETYPE_METRIC_KEYS_MAP } from '../../helpers/issues';\nimport { getBranchLikeUrl, getCodeUrl, getComponentIssuesUrl } from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\nimport { ComponentQualifier } from '../../types/component';\nimport { WorkspaceContextShape } from '../workspace/context';\nimport MeasuresOverlay from './components/MeasuresOverlay';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentMeasures?: T.Measure[];\n  openComponent: WorkspaceContextShape['openComponent'];\n  showMeasures?: boolean;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface State {\n  measuresOverlay: boolean;\n}\n\nexport default class SourceViewerHeader extends React.PureComponent<Props, State> {\n  state: State = { measuresOverlay: false };\n\n  handleShowMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.setState({ measuresOverlay: true });\n  };\n\n  handleMeasuresOverlayClose = () => {\n    this.setState({ measuresOverlay: false });\n  };\n\n  openInWorkspace = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    const { key } = this.props.sourceViewerFile;\n    this.props.openComponent({ branchLike: this.props.branchLike, key });\n  };\n\n  renderIssueMeasures = () => {\n    const { branchLike, componentMeasures, sourceViewerFile } = this.props;\n    return (\n      componentMeasures &&\n      componentMeasures.length > 0 && (\n        <>\n          <div className=\"source-viewer-header-measure-separator\" />\n\n          {ISSUE_TYPES.map((type: T.IssueType) => {\n            const params = {\n              ...getBranchLikeQuery(branchLike),\n              files: sourceViewerFile.path,\n              resolved: 'false',\n              types: type\n            };\n\n            const measure = componentMeasures.find(\n              m => m.metric === ISSUETYPE_METRIC_KEYS_MAP[type].metric\n            );\n            return (\n              <div className=\"source-viewer-header-measure\" key={type}>\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('issue.type', type)}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  <Link to={getComponentIssuesUrl(sourceViewerFile.project, params)}>\n                    {formatMeasure((measure && measure.value) || 0, 'INT')}\n                  </Link>\n                </span>\n              </div>\n            );\n          })}\n        </>\n      )\n    );\n  };\n\n  render() {\n    const { showMeasures } = this.props;\n    const {\n      key,\n      measures,\n      path,\n      project,\n      projectName,\n      q,\n      subProject,\n      subProjectName\n    } = this.props.sourceViewerFile;\n    const unitTestsOrLines = q === ComponentQualifier.TestFile ? 'tests' : 'lines';\n    const workspace = false;\n    const rawSourcesLink =\n      getBaseUrl() +\n      '/api/sources/raw?' +\n      stringify(omitNil({ key, ...getBranchLikeQuery(this.props.branchLike) }));\n\n    // TODO favorite\n    return (\n      <div className=\"source-viewer-header display-flex-center\">\n        <div className=\"flex-1 little-spacer-top\">\n          <div className=\"component-name\">\n            <div className=\"component-name-parent\">\n              <a\n                className=\"link-with-icon\"\n                href={getPathUrlAsString(getBranchLikeUrl(project, this.props.branchLike))}>\n                <QualifierIcon qualifier=\"TRK\" /> <span>{projectName}</span>\n              </a>\n            </div>\n\n            {subProject !== undefined && (\n              <div className=\"component-name-parent\">\n                <QualifierIcon qualifier=\"BRC\" /> <span>{subProjectName}</span>\n              </div>\n            )}\n\n            <div className=\"component-name-path\">\n              <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n              <span className=\"component-name-file\">{fileFromPath(path)}</span>\n              <span className=\"nudged-up spacer-left\">\n                <ClipboardIconButton\n                  aria-label={translate('component_viewer.copy_path_to_clipboard')}\n                  className=\"button-link link-no-underline\"\n                  copyValue={path}\n                />\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {this.state.measuresOverlay && (\n          <MeasuresOverlay\n            branchLike={this.props.branchLike}\n            onClose={this.handleMeasuresOverlayClose}\n            sourceViewerFile={this.props.sourceViewerFile}\n          />\n        )}\n\n        {showMeasures && (\n          <div className=\"display-flex-center\">\n            {measures[unitTestsOrLines] && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate(`metric.${unitTestsOrLines}.name`)}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures[unitTestsOrLines], 'SHORT_INT')}\n                </span>\n              </div>\n            )}\n\n            {measures.coverage !== undefined && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('metric.coverage.name')}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures.coverage, 'PERCENT')}\n                </span>\n              </div>\n            )}\n\n            {measures.duplicationDensity !== undefined && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('duplications')}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures.duplicationDensity, 'PERCENT')}\n                </span>\n              </div>\n            )}\n\n            {this.renderIssueMeasures()}\n          </div>\n        )}\n\n        <Dropdown\n          className=\"source-viewer-header-actions flex-0\"\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a className=\"js-measures\" href=\"#\" onClick={this.handleShowMeasuresClick}>\n                  {translate('component_viewer.show_details')}\n                </a>\n              </li>\n              <li>\n                <Link\n                  className=\"js-new-window\"\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                  to={getCodeUrl(this.props.sourceViewerFile.project, this.props.branchLike, key)}>\n                  {translate('component_viewer.new_window')}\n                </Link>\n              </li>\n              {!workspace && (\n                <li>\n                  <a className=\"js-workspace\" href=\"#\" onClick={this.openInWorkspace}>\n                    {translate('component_viewer.open_in_workspace')}\n                  </a>\n                </li>\n              )}\n              <li>\n                <a\n                  className=\"js-raw-source\"\n                  href={rawSourcesLink}\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\">\n                  {translate('component_viewer.show_raw_source')}\n                </a>\n              </li>\n            </ul>\n          }\n          overlayPlacement={PopupPlacement.BottomRight}>\n          <ButtonIcon className=\"js-actions\">\n            <ListIcon />\n          </ButtonIcon>\n        </Dropdown>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { intersection, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  getComponentData,\n  getComponentForSourceViewer,\n  getDuplications,\n  getSources\n} from '../../api/components';\nimport { getBranchLikeQuery, isSameBranchLike } from '../../helpers/branch-like';\nimport { BranchLike } from '../../types/branch-like';\nimport { WorkspaceContext } from '../workspace/context';\nimport DuplicationPopup from './components/DuplicationPopup';\nimport {\n  filterDuplicationBlocksByLine,\n  getDuplicationBlocksForIndex,\n  isDuplicationBlockInRemovedComponent\n} from './helpers/duplications';\nimport getCoverageStatus from './helpers/getCoverageStatus';\nimport {\n  duplicationsByLine,\n  issuesByLine,\n  locationsByLine,\n  symbolsByLine\n} from './helpers/indexing';\nimport defaultLoadIssues from './helpers/loadIssues';\nimport SourceViewerCode from './SourceViewerCode';\nimport { SourceViewerContext } from './SourceViewerContext';\nimport SourceViewerHeader from './SourceViewerHeader';\nimport SourceViewerHeaderSlim from './SourceViewerHeaderSlim';\nimport './styles.css';\n\n// TODO react-virtualized\n\nexport interface Props {\n  aroundLine?: number;\n  branchLike: BranchLike | undefined;\n  component: string;\n  componentMeasures?: T.Measure[];\n  displayAllIssues?: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLine?: number;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintaint the location indexes\n  highlightedLocations?: (T.FlowLocation | undefined)[];\n  highlightedLocationMessage?: { index: number; text: string | undefined };\n  loadComponent?: (\n    component: string,\n    branchLike: BranchLike | undefined\n  ) => Promise<T.SourceViewerFile>;\n  loadIssues?: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: BranchLike | undefined\n  ) => Promise<T.Issue[]>;\n  loadSources?: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: BranchLike | undefined\n  ) => Promise<T.SourceLine[]>;\n  onLoaded?: (component: T.SourceViewerFile, sources: T.SourceLine[], issues: T.Issue[]) => void;\n  onLocationSelect?: (index: number) => void;\n  onIssueChange?: (issue: T.Issue) => void;\n  onIssueSelect?: (issueKey: string) => void;\n  onIssueUnselect?: () => void;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue?: string;\n  showMeasures?: boolean;\n  metricKey?: string;\n  slimHeader?: boolean;\n}\n\ninterface State {\n  component?: T.SourceViewerFile;\n  duplicatedFiles?: T.Dict<T.DuplicatedFile>;\n  duplications?: T.Duplication[];\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup?: { issue: string; name: string };\n  issues?: T.Issue[];\n  issuesByLine: { [line: number]: T.Issue[] };\n  loading: boolean;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  notAccessible: boolean;\n  notExist: boolean;\n  openIssuesByLine: { [line: number]: boolean };\n  selectedIssue?: string;\n  sourceRemoved: boolean;\n  sources?: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nconst LINES = 500;\n\nexport default class SourceViewerBase extends React.PureComponent<Props, State> {\n  node?: HTMLElement | null;\n  mounted = false;\n\n  static defaultProps = {\n    displayAllIssues: false,\n    displayIssueLocationsCount: true,\n    displayIssueLocationsLink: true,\n    displayLocationMarkers: true\n  };\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      duplicationsByLine: {},\n      hasSourcesAfter: false,\n      highlightedSymbols: [],\n      issuesByLine: {},\n      issueLocationsByLine: {},\n      loading: true,\n      loadingSourcesAfter: false,\n      loadingSourcesBefore: false,\n      notAccessible: false,\n      notExist: false,\n      openIssuesByLine: {},\n      selectedIssue: props.selectedIssue,\n      sourceRemoved: false,\n      symbolsByLine: {}\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchComponent();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    // if a component or a branch has changed,\n    // set `loading: true` immediately to avoid unwanted scrolling in `LineCode`\n    if (\n      nextProps.component !== this.props.component ||\n      !isSameBranchLike(nextProps.branchLike, this.props.branchLike)\n    ) {\n      this.setState({ loading: true });\n    }\n    if (\n      nextProps.onIssueSelect !== undefined &&\n      nextProps.selectedIssue !== this.props.selectedIssue\n    ) {\n      this.setState({ selectedIssue: nextProps.selectedIssue });\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.component !== this.props.component ||\n      !isSameBranchLike(prevProps.branchLike, this.props.branchLike)\n    ) {\n      this.fetchComponent();\n    } else if (\n      this.props.aroundLine !== undefined &&\n      prevProps.aroundLine !== this.props.aroundLine &&\n      this.isLineOutsideOfRange(this.props.aroundLine)\n    ) {\n      this.fetchSources();\n    } else {\n      const { selectedIssue } = this.props;\n      const { issues } = this.state;\n      if (\n        selectedIssue !== undefined &&\n        issues !== undefined &&\n        issues.find(issue => issue.key === selectedIssue) === undefined\n      ) {\n        this.reloadIssues();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  get loadComponent() {\n    return this.props.loadComponent || defaultLoadComponent;\n  }\n\n  get loadIssues() {\n    return this.props.loadIssues || defaultLoadIssues;\n  }\n\n  get propsLoadSources() {\n    return this.props.loadSources || defaultLoadSources;\n  }\n\n  computeCoverageStatus(lines: T.SourceLine[]) {\n    return lines.map(line => ({ ...line, coverageStatus: getCoverageStatus(line) }));\n  }\n\n  isLineOutsideOfRange(lineNumber: number) {\n    const { sources } = this.state;\n    if (sources && sources.length > 0) {\n      const firstLine = sources[0];\n      const lastList = sources[sources.length - 1];\n      return lineNumber < firstLine.line || lineNumber > lastList.line;\n    }\n\n    return true;\n  }\n\n  fetchComponent() {\n    this.setState({ loading: true });\n\n    const to = (this.props.aroundLine || 0) + LINES;\n    const loadIssues = (component: T.SourceViewerFile, sources: T.SourceLine[]) => {\n      this.loadIssues(this.props.component, 1, to, this.props.branchLike).then(\n        issues => {\n          if (this.mounted) {\n            const finalSources = sources.slice(0, LINES);\n\n            this.setState(\n              {\n                component,\n                duplicatedFiles: undefined,\n                duplications: undefined,\n                duplicationsByLine: {},\n                hasSourcesAfter: sources.length > LINES,\n                highlightedSymbols: [],\n                issueLocationsByLine: locationsByLine(issues),\n                issues,\n                issuesByLine: issuesByLine(issues),\n                loading: false,\n                notAccessible: false,\n                notExist: false,\n                openIssuesByLine: {},\n                issuePopup: undefined,\n                sourceRemoved: false,\n                sources: this.computeCoverageStatus(finalSources),\n                symbolsByLine: symbolsByLine(sources.slice(0, LINES))\n              },\n              () => {\n                if (this.props.onLoaded) {\n                  this.props.onLoaded(component, finalSources, issues);\n                }\n              }\n            );\n          }\n        },\n        () => {\n          // TODO\n        }\n      );\n    };\n\n    const onFailLoadComponent = (response: Response) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ loading: false, notExist: true });\n        }\n      }\n    };\n\n    const onFailLoadSources = (response: Response, component: T.SourceViewerFile) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ component, loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ component, loading: false, sourceRemoved: true });\n        }\n      }\n    };\n\n    const onResolve = (component: T.SourceViewerFile) => {\n      const sourcesRequest =\n        component.q === 'FIL' || component.q === 'UTS' ? this.loadSources() : Promise.resolve([]);\n      sourcesRequest.then(\n        sources => loadIssues(component, sources),\n        response => onFailLoadSources(response, component)\n      );\n    };\n\n    this.loadComponent(this.props.component, this.props.branchLike).then(\n      onResolve,\n      onFailLoadComponent\n    );\n  }\n\n  fetchSources() {\n    this.loadSources().then(\n      sources => {\n        if (this.mounted) {\n          const finalSources = sources.slice(0, LINES);\n          this.setState(\n            {\n              sources: sources.slice(0, LINES),\n              hasSourcesAfter: sources.length > LINES\n            },\n            () => {\n              if (this.props.onLoaded && this.state.component && this.state.issues) {\n                this.props.onLoaded(this.state.component, finalSources, this.state.issues);\n              }\n            }\n          );\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  }\n\n  reloadIssues() {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.loadIssues(\n      this.props.component,\n      firstSourceLine && firstSourceLine.line,\n      lastSourceLine && lastSourceLine.line,\n      this.props.branchLike\n    ).then(\n      issues => {\n        if (this.mounted) {\n          this.setState({\n            issues,\n            issuesByLine: issuesByLine(issues),\n            issueLocationsByLine: locationsByLine(issues)\n          });\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  }\n\n  loadSources = (): Promise<T.SourceLine[]> => {\n    return new Promise((resolve, reject) => {\n      const onFailLoadSources = (response: Response) => {\n        // TODO handle other statuses\n        if (this.mounted) {\n          if ([403, 404].includes(response.status)) {\n            reject(response);\n          } else {\n            resolve([]);\n          }\n        }\n      };\n\n      const from = this.props.aroundLine ? Math.max(1, this.props.aroundLine - LINES / 2 + 1) : 1;\n\n      let to = this.props.aroundLine ? this.props.aroundLine + LINES / 2 + 1 : LINES + 1;\n      // make sure we try to download `LINES` lines\n      if (from === 1 && to < LINES) {\n        to = LINES;\n      }\n      // request one additional line to define `hasSourcesAfter`\n      to++;\n\n      this.propsLoadSources(this.props.component, from, to, this.props.branchLike).then(sources => {\n        resolve(sources);\n      }, onFailLoadSources);\n    });\n  };\n\n  loadSourcesBefore = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    this.setState({ loadingSourcesBefore: true });\n    const from = Math.max(1, firstSourceLine.line - LINES);\n    Promise.all([\n      this.propsLoadSources(\n        this.props.component,\n        from,\n        firstSourceLine.line - 1,\n        this.props.branchLike\n      ),\n      this.loadIssues(this.props.component, from, firstSourceLine.line - 1, this.props.branchLike)\n    ]).then(\n      ([sources, issues]) => {\n        if (this.mounted) {\n          this.setState(prevState => {\n            const nextIssues = uniqBy([...issues, ...(prevState.issues || [])], issue => issue.key);\n            return {\n              issues: nextIssues,\n              issuesByLine: issuesByLine(nextIssues),\n              issueLocationsByLine: locationsByLine(nextIssues),\n              loadingSourcesBefore: false,\n              sources: [...this.computeCoverageStatus(sources), ...(prevState.sources || [])],\n              symbolsByLine: { ...prevState.symbolsByLine, ...symbolsByLine(sources) }\n            };\n          });\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  loadSourcesAfter = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.setState({ loadingSourcesAfter: true });\n    const fromLine = lastSourceLine.line + 1;\n    // request one additional line to define `hasSourcesAfter`\n    const toLine = lastSourceLine.line + LINES + 1;\n    Promise.all([\n      this.propsLoadSources(this.props.component, fromLine, toLine, this.props.branchLike),\n      this.loadIssues(this.props.component, fromLine, toLine, this.props.branchLike)\n    ]).then(\n      ([sources, issues]) => {\n        if (this.mounted) {\n          this.setState(prevState => {\n            const nextIssues = uniqBy([...(prevState.issues || []), ...issues], issue => issue.key);\n            return {\n              issues: nextIssues,\n              issuesByLine: issuesByLine(nextIssues),\n              issueLocationsByLine: locationsByLine(nextIssues),\n              hasSourcesAfter: sources.length > LINES,\n              loadingSourcesAfter: false,\n              sources: [\n                ...(prevState.sources || []),\n                ...this.computeCoverageStatus(sources.slice(0, LINES))\n              ],\n              symbolsByLine: {\n                ...prevState.symbolsByLine,\n                ...symbolsByLine(sources.slice(0, LINES))\n              }\n            };\n          });\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  loadDuplications = () => {\n    getDuplications({\n      key: this.props.component,\n      ...getBranchLikeQuery(this.props.branchLike)\n    }).then(\n      r => {\n        if (this.mounted) {\n          this.setState({\n            duplications: r.duplications,\n            duplicationsByLine: duplicationsByLine(r.duplications),\n            duplicatedFiles: r.files\n          });\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  handleIssuePopupToggle = (issue: string, popupName: string, open?: boolean) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.issuePopup && state.issuePopup.name === popupName && state.issuePopup.issue === issue;\n      if (open !== false && !samePopup) {\n        return { issuePopup: { issue, name: popupName } };\n      } else if (open !== true && samePopup) {\n        return { issuePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  handleSymbolClick = (symbols: string[]) => {\n    this.setState(state => {\n      const shouldDisable = intersection(state.highlightedSymbols, symbols).length > 0;\n      const highlightedSymbols = shouldDisable ? [] : symbols;\n      return { highlightedSymbols };\n    });\n  };\n\n  handleIssueSelect = (issue: string) => {\n    if (this.props.onIssueSelect) {\n      this.props.onIssueSelect(issue);\n    } else {\n      this.setState({ selectedIssue: issue });\n    }\n  };\n\n  handleIssueUnselect = () => {\n    if (this.props.onIssueUnselect) {\n      this.props.onIssueUnselect();\n    } else {\n      this.setState({ selectedIssue: undefined });\n    }\n  };\n\n  handleOpenIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: true }\n    }));\n  };\n\n  handleCloseIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: false }\n    }));\n  };\n\n  handleIssueChange = (issue: T.Issue) => {\n    this.setState(({ issues = [] }) => {\n      const newIssues = issues.map(candidate => (candidate.key === issue.key ? issue : candidate));\n      return { issues: newIssues, issuesByLine: issuesByLine(newIssues) };\n    });\n    if (this.props.onIssueChange) {\n      this.props.onIssueChange(issue);\n    }\n  };\n\n  renderDuplicationPopup = (index: number, line: number) => {\n    const { component, duplicatedFiles, duplications } = this.state;\n\n    if (!component || !duplicatedFiles) {\n      return null;\n    }\n\n    const blocks = getDuplicationBlocksForIndex(duplications, index);\n\n    return (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <DuplicationPopup\n            blocks={filterDuplicationBlocksByLine(blocks, line)}\n            branchLike={this.props.branchLike}\n            duplicatedFiles={duplicatedFiles}\n            inRemovedComponent={isDuplicationBlockInRemovedComponent(blocks)}\n            openComponent={openComponent}\n            sourceViewerFile={component}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  };\n\n  renderCode(sources: T.SourceLine[]) {\n    const hasSourcesBefore = sources.length > 0 && sources[0].line > 1;\n    return (\n      <SourceViewerCode\n        branchLike={this.props.branchLike}\n        componentKey={this.props.component}\n        displayAllIssues={this.props.displayAllIssues}\n        displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n        displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.state.duplications}\n        duplicationsByLine={this.state.duplicationsByLine}\n        hasSourcesAfter={this.state.hasSourcesAfter}\n        hasSourcesBefore={hasSourcesBefore}\n        highlightedLine={this.props.highlightedLine}\n        highlightedLocationMessage={this.props.highlightedLocationMessage}\n        highlightedLocations={this.props.highlightedLocations}\n        highlightedSymbols={this.state.highlightedSymbols}\n        issueLocationsByLine={this.state.issueLocationsByLine}\n        issuePopup={this.state.issuePopup}\n        issues={this.state.issues}\n        issuesByLine={this.state.issuesByLine}\n        loadDuplications={this.loadDuplications}\n        loadSourcesAfter={this.loadSourcesAfter}\n        loadSourcesBefore={this.loadSourcesBefore}\n        loadingSourcesAfter={this.state.loadingSourcesAfter}\n        loadingSourcesBefore={this.state.loadingSourcesBefore}\n        onIssueChange={this.handleIssueChange}\n        onIssuePopupToggle={this.handleIssuePopupToggle}\n        onIssueSelect={this.handleIssueSelect}\n        onIssueUnselect={this.handleIssueUnselect}\n        onIssuesClose={this.handleCloseIssues}\n        onIssuesOpen={this.handleOpenIssues}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.handleSymbolClick}\n        openIssuesByLine={this.state.openIssuesByLine}\n        renderDuplicationPopup={this.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        metricKey={this.props.metricKey}\n        selectedIssue={this.state.selectedIssue}\n        sources={sources}\n        symbolsByLine={this.state.symbolsByLine}\n      />\n    );\n  }\n\n  renderHeader(branchLike: BranchLike | undefined, sourceViewerFile: T.SourceViewerFile) {\n    return this.props.slimHeader ? (\n      <SourceViewerHeaderSlim branchLike={branchLike} sourceViewerFile={sourceViewerFile} />\n    ) : (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <SourceViewerHeader\n            branchLike={this.props.branchLike}\n            componentMeasures={this.props.componentMeasures}\n            openComponent={openComponent}\n            showMeasures={this.props.showMeasures}\n            sourceViewerFile={sourceViewerFile}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  }\n\n  render() {\n    const { component, loading, sources, notAccessible, sourceRemoved } = this.state;\n\n    if (loading) {\n      return null;\n    }\n\n    if (this.state.notExist) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('component_viewer.no_component')}\n        </Alert>\n      );\n    }\n\n    if (notAccessible) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('code_viewer.no_source_code_displayed_due_to_security')}\n        </Alert>\n      );\n    }\n\n    if (!component) {\n      return null;\n    }\n\n    return (\n      <SourceViewerContext.Provider value={{ branchLike: this.props.branchLike, file: component }}>\n        <div className=\"source-viewer\" ref={node => (this.node = node)}>\n          {this.renderHeader(this.props.branchLike, component)}\n          {sourceRemoved && (\n            <Alert className=\"spacer-top\" variant=\"warning\">\n              {translate('code_viewer.no_source_code_displayed_due_to_source_removed')}\n            </Alert>\n          )}\n          {!sourceRemoved && sources !== undefined && this.renderCode(sources)}\n        </div>\n      </SourceViewerContext.Provider>\n    );\n  }\n}\n\nfunction defaultLoadComponent(\n  component: string,\n  branchLike: BranchLike | undefined\n): Promise<T.SourceViewerFile> {\n  return Promise.all([\n    getComponentForSourceViewer({ component, ...getBranchLikeQuery(branchLike) }),\n    getComponentData({ component, ...getBranchLikeQuery(branchLike) })\n  ]).then(([sourceViewerComponent, { component }]) => ({\n    ...sourceViewerComponent,\n    leakPeriodDate: component.leakPeriodDate\n  }));\n}\n\nfunction defaultLoadSources(\n  key: string,\n  from: number | undefined,\n  to: number | undefined,\n  branchLike: BranchLike | undefined\n) {\n  return getSources({ key, from, to, ...getBranchLikeQuery(branchLike) });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { groupBy, sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { collapsedDirFromPath, fileFromPath } from 'sonar-ui-common/helpers/path';\nimport { isPullRequest } from '../../../helpers/branch-like';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport { WorkspaceContextShape } from '../../workspace/context';\n\ninterface Props {\n  blocks: T.DuplicationBlock[];\n  branchLike: BranchLike | undefined;\n  duplicatedFiles?: T.Dict<T.DuplicatedFile>;\n  inRemovedComponent: boolean;\n  openComponent: WorkspaceContextShape['openComponent'];\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nexport default class DuplicationPopup extends React.PureComponent<Props> {\n  shouldLink() {\n    const { branchLike } = this.props;\n    return !isPullRequest(branchLike);\n  }\n\n  isDifferentComponent = (\n    a: { project: string; subProject?: string },\n    b: { project: string; subProject?: string }\n  ) => {\n    return Boolean(a && b && (a.project !== b.project || a.subProject !== b.subProject));\n  };\n\n  handleFileClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { key, line } = event.currentTarget.dataset;\n    if (this.shouldLink() && key) {\n      this.props.openComponent({\n        branchLike: this.props.branchLike,\n        key,\n        line: line ? Number(line) : undefined\n      });\n    }\n  };\n\n  renderDuplication(file: T.DuplicatedFile, children: React.ReactNode, line?: number) {\n    return this.shouldLink() ? (\n      <a\n        data-key={file.key}\n        data-line={line}\n        href=\"#\"\n        onClick={this.handleFileClick}\n        title={file.name}>\n        {children}\n      </a>\n    ) : (\n      children\n    );\n  }\n\n  render() {\n    const { duplicatedFiles = {}, sourceViewerFile } = this.props;\n\n    const groupedBlocks = groupBy(this.props.blocks, '_ref');\n    let duplications = Object.keys(groupedBlocks).map(fileRef => {\n      return {\n        blocks: groupedBlocks[fileRef],\n        file: duplicatedFiles[fileRef]\n      };\n    });\n\n    // first duplications in the same file\n    // then duplications in the same sub-project\n    // then duplications in the same project\n    // then duplications in other projects\n    duplications = sortBy(\n      duplications,\n      d => d.file.projectName !== sourceViewerFile.projectName,\n      d => d.file.subProjectName !== sourceViewerFile.subProjectName,\n      d => d.file.key !== sourceViewerFile.key\n    );\n\n    return (\n      <div className=\"source-viewer-bubble-popup abs-width-400\">\n        {this.props.inRemovedComponent && (\n          <Alert variant=\"warning\">\n            {translate('duplications.dups_found_on_deleted_resource')}\n          </Alert>\n        )}\n        {duplications.length > 0 && (\n          <>\n            <h6 className=\"spacer-bottom\">\n              {translate('component_viewer.transition.duplication')}\n            </h6>\n            {duplications.map(duplication => (\n              <div className=\"spacer-top text-ellipsis\" key={duplication.file.key}>\n                <div className=\"component-name\">\n                  {this.isDifferentComponent(duplication.file, this.props.sourceViewerFile) && (\n                    <>\n                      <div className=\"component-name-parent\">\n                        <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n                        <Link to={getProjectUrl(duplication.file.project)}>\n                          {duplication.file.projectName}\n                        </Link>\n                      </div>\n                      {duplication.file.subProject && duplication.file.subProjectName && (\n                        <div className=\"component-name-parent\">\n                          <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n                          {duplication.file.subProjectName}\n                        </div>\n                      )}\n                    </>\n                  )}\n\n                  {duplication.file.key !== this.props.sourceViewerFile.key && (\n                    <div className=\"component-name-path\">\n                      {this.renderDuplication(\n                        duplication.file,\n                        <>\n                          <span>{collapsedDirFromPath(duplication.file.name)}</span>\n                          <span className=\"component-name-file\">\n                            {fileFromPath(duplication.file.name)}\n                          </span>\n                        </>\n                      )}\n                    </div>\n                  )}\n\n                  <div className=\"component-name-path\">\n                    {'Lines: '}\n                    {duplication.blocks.map((block, index) => (\n                      <React.Fragment key={index}>\n                        {this.renderDuplication(\n                          duplication.file,\n                          <>\n                            {block.from}\n                            {' – '}\n                            {block.from + block.size - 1}\n                          </>,\n                          block.from\n                        )}\n                        {index < duplication.blocks.length - 1 && ', '}\n                      </React.Fragment>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// TODO Test this function, but I don't get the logic behind it\nexport function filterDuplicationBlocksByLine(blocks: T.DuplicationBlock[], line: number) {\n  /* eslint-disable no-underscore-dangle */\n  let foundOne = false;\n  return blocks.filter(b => {\n    const outOfBounds = b.from > line || b.from + b.size < line;\n    const currentFile = b._ref === '1';\n    const shouldDisplayForCurrentFile = outOfBounds || foundOne;\n    const shouldDisplay = !currentFile || shouldDisplayForCurrentFile;\n    const isOk = b._ref !== undefined && shouldDisplay;\n    if (b._ref === '1' && !outOfBounds) {\n      foundOne = true;\n    }\n    return isOk;\n  });\n  /* eslint-enable no-underscore-dangle */\n}\n\nexport function getDuplicationBlocksForIndex(\n  duplications: T.Duplication[] | undefined,\n  index: number\n) {\n  return (duplications && duplications[index] && duplications[index].blocks) || [];\n}\n\nexport function isDuplicationBlockInRemovedComponent(blocks: T.DuplicationBlock[]) {\n  return blocks.some(b => b._ref === undefined); // eslint-disable-line no-underscore-dangle\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".source-viewer{width:100%;min-height:200px;border:1px solid #cdcdcd;box-sizing:border-box;background-color:#fff;overflow:hidden}.source-table{width:100%;border:none;border-collapse:collapse}.source-viewer-header{position:relative;padding:2px 10px 4px;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3}.source-viewer-header-measure{vertical-align:middle;font-size:13px}.source-viewer-header-measure .rating{font-size:18px}.source-viewer-header-measure-separator{margin:0 24px;height:30px;border-right:1px solid #cdcdcd}.source-viewer-header-measure+.source-viewer-header-measure{margin-left:24px}.source-viewer-header-measure-label{display:block;line-height:12px;color:#666;font-size:12px}.source-viewer-header-measure-value{display:block;margin-top:2px;line-height:18px;color:#333;font-size:16px}.source-viewer-header-actions{display:block;margin-left:24px;padding:8px 4px}.source-viewer-header-actions svg{margin-top:2px}.source-viewer-header-more-actions{position:absolute;z-index:7500;right:0;top:100%;padding:10px;border:1px solid #e6e6e6;border-right:none;background-color:#fff;line-height:1.8}.source-viewer-code{overflow-x:auto}.source-viewer-more-code{padding:40px 0;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3;text-align:center}.source-viewer-more-code .spinner{top:-1px}.source-table+.source-viewer-more-code{border-bottom:none;border-top:1px solid #e6e6e6}.issue-location.highlighted{border-color:#e1e1f2;background-color:#e1e1f2}.issue-location.selected{border-color:#f4b1b0;background-color:#f4b1b0}.measures-viewer{display:flex;margin:0 -8px}.measures-viewer+.measures-viewer{margin-top:8px}.measures-viewer-header{font-size:12px}.measures-viewer-secondary .measures-viewer-card{background-color:#f3f3f3}.measures-viewer-section{flex:1}.measures-viewer-section-limited{max-width:25%}.measures-viewer-card{margin:16px 8px;padding:8px;border:1px solid #e6e6e6;background-color:#fff}.measures+.measures{margin-top:16px;padding-top:16px;border-top:1px solid #e6e6e6}.measures-chart{display:inline-block;vertical-align:middle;width:80px;margin-right:24px;text-align:center}.measure{line-height:1.34}.measure-one-line{display:flex;justify-content:space-between}.measure-one-line .measure-name{display:inline}.measure-name{display:block;font-size:13px}.measure-value{color:#236a97;font-size:16px;font-weight:400}.measure-big{display:inline-block;vertical-align:middle}.measure-big .measure-name{margin-top:4px;margin-bottom:8px;font-size:16px}.measure-big .measure-value,.measure-big .rating{font-size:24px}.measure-big+.measure-big{margin-left:24px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  severity: string;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\n\nexport function sanitizeStringRestricted(html: string) {\n  return sanitize(html, {\n    ALLOWED_TAGS: ['b', 'br', 'code', 'i', 'li', 'p', 'strong', 'ul', 'a'],\n    ALLOWED_ATTR: ['target', 'href']\n  });\n}\n\nexport function sanitizeString(html: string) {\n  return sanitize(html, { USE_PROFILES: { html: true } });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating',\n  'security_review_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.MeasureIntern | undefined): string | undefined {\n  return measure?.period?.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span className={className}>–</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, {\n      decimals,\n      omitExtraDecimalZeros: metricType === 'PERCENT'\n    });\n    return <span className={className}>{formattedValue != null ? formattedValue : '–'}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface MultiSelectOptionProps {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (element: string) => void;\n  onSelectChange: (selected: boolean, element: string) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default function MultiSelectOption(props: MultiSelectOptionProps) {\n  const { active, custom, disabled, element, selected } = props;\n  const onHover = () => props.onHover(element);\n  const className = classNames({ active, disabled });\n  const label = props.renderLabel(element);\n\n  return (\n    <li onFocus={onHover} onMouseOver={onHover}>\n      <Checkbox\n        checked={Boolean(selected)}\n        className={className}\n        disabled={disabled}\n        id={element}\n        onCheck={props.onSelectChange}>\n        {custom ? (\n          <span\n            aria-label={`${translate('create_new_element')}: ${label}`}\n            className=\"little-spacer-left\">\n            <span aria-hidden={true} className=\"little-spacer-right\">\n              +\n            </span>\n            {label}\n          </span>\n        ) : (\n          <span className=\"little-spacer-left\">{label}</span>\n        )}\n      </Checkbox>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelectOption from './MultiSelectOption';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (selected: boolean, item: string) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement && selectedElements.length < 1 && unselectedElements.length < 1 && (\n            <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n          )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport DetachIcon from 'sonar-ui-common/components/icons/DetachIcon';\nimport { isWebUri } from 'valid-url';\n\nexport interface DocumentationTooltipProps {\n  children?: React.ReactNode;\n  className?: string;\n  content?: React.ReactNode;\n  links?: Array<{ href: string; label: string; inPlace?: boolean }>;\n  title?: string;\n}\n\nexport default function DocumentationTooltip(props: DocumentationTooltipProps) {\n  const { className, content, links, title } = props;\n\n  return (\n    <HelpTooltip\n      className={className}\n      overlay={\n        <div className=\"big-padded-top big-padded-bottom\">\n          {title && (\n            <div className=\"spacer-bottom\">\n              <strong>{title}</strong>\n            </div>\n          )}\n\n          {content && <p>{content}</p>}\n\n          {links && (\n            <>\n              <hr className=\"big-spacer-top big-spacer-bottom\" />\n\n              {links.map(({ href, label, inPlace }) => (\n                <div className=\"little-spacer-bottom\" key={label}>\n                  {inPlace ? (\n                    <Link to={href}>\n                      <span>{label}</span>\n                    </Link>\n                  ) : (\n                    <a\n                      className=\"display-inline-flex-center link-with-icon\"\n                      href={href}\n                      rel=\"noopener noreferrer\"\n                      target=\"_blank\">\n                      {isWebUri(href) && <DetachIcon size={14} className=\"spacer-right\" />}\n                      <span>{label}</span>\n                    </a>\n                  )}\n                </div>\n              ))}\n            </>\n          )}\n        </div>\n      }>\n      {props.children}\n    </HelpTooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span\n      aria-label={translateWithParameters('tags_list_x', tags.join(', '))}\n      className={classNames('tags-list', className)}>\n      <TagsIcon className=\"text-middle\" />\n      <span aria-hidden={true} className=\"text-ellipsis text-middle\" title={tags.join(', ')}>\n        {tags.join(', ')}\n      </span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getFormattingHelpUrl } from '../../helpers/urls';\n\ninterface Props {\n  className?: string;\n}\n\nexport default class FormattingTips extends React.PureComponent<Props> {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(\n      getFormattingHelpUrl(),\n      'Formatting',\n      'height=300,width=600,scrollbars=1,resizable=1'\n    );\n  }\n\n  render() {\n    return (\n      <div className={classNames('markdown-tips', this.props.className)}>\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('formatting.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">\n          ``\n          {translate('code')}\n          ``\n        </span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelect from '../common/MultiSelect';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { colors } from '../../app/theme';\n\nconst DonutChart = lazyLoadComponent(\n  () => import('sonar-ui-common/components/charts/DonutChart'),\n  'DonutChart'\n);\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\nexport interface CoverageRatingProps {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({\n  muted = false,\n  size = 'normal',\n  value\n}: CoverageRatingProps) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n  let padAngle = 0;\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? colors.gray71 : colors.green },\n      { value: 100 - numberValue, fill: muted ? colors.barBackgroundColor : colors.lineCoverageRed }\n    ];\n    if (numberValue !== 0 && numberValue < 100) {\n      padAngle = 0.1; // Same for all sizes, because it scales automatically\n    }\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return (\n    <DonutChart\n      data={data}\n      height={width}\n      padAngle={padAngle}\n      thickness={thickness}\n      width={width}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationIndex.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  leading?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n  [x: string]: any;\n}\n\nexport default function LocationIndex(props: Props) {\n  const { children, leading, onClick, selected, ...other } = props;\n  const clickAttributes = onClick ? { onClick, role: 'button', tabIndex: 0 } : {};\n  // put {...others} because Tooltip sets some event handlers\n  return (\n    <div\n      className={classNames('location-index', {\n        'is-leading': leading,\n        selected\n      })}\n      {...clickAttributes}\n      {...other}>\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport StatusIcon from 'sonar-ui-common/components/icons/StatusIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  resolution: string | undefined;\n  status: string;\n}\n\nexport default function StatusHelper(props: Props) {\n  const resolution = props.resolution && ` (${translate('issue.resolution', props.resolution)})`;\n  return (\n    <span className={props.className}>\n      <StatusIcon className=\"little-spacer-right\" status={props.status} />\n      {translate('issue.status', props.status)}\n      {resolution}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { flatten } from 'lodash';\nimport { splitByTokens } from './highlight';\nimport { getLinearLocations } from './issueLocations';\n\nexport function issuesByLine(issues: T.Issue[]) {\n  const index: { [line: number]: T.Issue[] } = {};\n  issues.forEach(issue => {\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    if (!(line in index)) {\n      index[line] = [];\n    }\n    index[line].push(issue);\n  });\n  return index;\n}\n\nexport function issuesByComponentAndLine(\n  issues: T.Issue[] = []\n): { [component: string]: { [line: number]: T.Issue[] } } {\n  return issues.reduce((mapping: { [component: string]: { [line: number]: T.Issue[] } }, issue) => {\n    mapping[issue.component] = mapping[issue.component] || {};\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    mapping[issue.component][line] = mapping[issue.component][line] || [];\n    mapping[issue.component][line].push(issue);\n    return mapping;\n  }, {});\n}\n\nexport function locationsByLine(issues: Pick<T.Issue, 'textRange'>[]) {\n  const index: { [line: number]: T.LinearIssueLocation[] } = {};\n  issues.forEach(issue => {\n    getLinearLocations(issue.textRange).forEach(location => {\n      if (!(location.line in index)) {\n        index[location.line] = [];\n      }\n      index[location.line].push(location);\n    });\n  });\n  return index;\n}\n\nexport function duplicationsByLine(duplications: T.Duplication[] | undefined) {\n  if (duplications == null) {\n    return {};\n  }\n\n  const duplicationsByLine: { [line: number]: number[] } = {};\n\n  duplications.forEach(({ blocks }, duplicationIndex) => {\n    blocks.forEach(block => {\n      // eslint-disable-next-line no-underscore-dangle\n      if (block._ref === '1') {\n        for (let line = block.from; line < block.from + block.size; line++) {\n          if (!(line in duplicationsByLine)) {\n            duplicationsByLine[line] = [];\n          }\n          duplicationsByLine[line].push(duplicationIndex);\n        }\n      }\n    });\n  });\n\n  return duplicationsByLine;\n}\n\nexport function symbolsByLine(sources: T.SourceLine[]) {\n  const index: { [line: number]: string[] } = {};\n  sources.forEach(line => {\n    const tokens = splitByTokens(line.code || '');\n    const symbols = flatten(\n      tokens.map(token => {\n        const keys = token.className.match(/sym-\\d+/g);\n        return keys != null ? keys : [];\n      })\n    );\n    index[line.line] = symbols.filter(key => key);\n  });\n  return index;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\n\nexport interface Token {\n  className: string;\n  markers: number[];\n  text: string;\n}\n\nconst ISSUE_LOCATION_CLASS = 'source-line-code-issue';\n\nexport function splitByTokens(code: string, rootClassName = ''): Token[] {\n  const container = document.createElement('div');\n  let tokens: Token[] = [];\n  container.innerHTML = code;\n  [].forEach.call(container.childNodes, (node: Element) => {\n    if (node.nodeType === 1) {\n      // ELEMENT NODE\n      const fullClassName = rootClassName ? rootClassName + ' ' + node.className : node.className;\n      const innerTokens = splitByTokens(node.innerHTML, fullClassName);\n      tokens = tokens.concat(innerTokens);\n    }\n    if (node.nodeType === 3 && node.nodeValue) {\n      // TEXT NODE\n      tokens.push({ className: rootClassName, markers: [], text: node.nodeValue });\n    }\n  });\n  return tokens;\n}\n\nexport function highlightSymbol(tokens: Token[], symbol: string): Token[] {\n  const symbolRegExp = new RegExp(`\\\\b${symbol}\\\\b`);\n  return tokens.map(token =>\n    symbolRegExp.test(token.className)\n      ? { ...token, className: `${token.className} highlighted` }\n      : token\n  );\n}\n\n/**\n * Intersect two ranges\n * @param s1 Start position of the first range\n * @param e1 End position of the first range\n * @param s2 Start position of the second range\n * @param e2 End position of the second range\n */\nfunction intersect(s1: number, e1: number, s2: number, e2: number) {\n  return { from: Math.max(s1, s2), to: Math.min(e1, e2) };\n}\n\n/**\n * Get the substring of a string\n * @param str A string\n * @param from \"From\" offset\n * @param to \"To\" offset\n * @param acc Global offset to eliminate\n */\nfunction part(str: string, from: number, to: number, acc: number): string {\n  // we do not want negative number as the first argument of `substr`\n  return from >= acc ? str.substr(from - acc, to - from) : str.substr(0, to - from);\n}\n\n/**\n * Highlight issue locations in the list of tokens\n */\nexport function highlightIssueLocations(\n  tokens: Token[],\n  issueLocations: T.LinearIssueLocation[],\n  rootClassName: string = ISSUE_LOCATION_CLASS\n): Token[] {\n  issueLocations.forEach(location => {\n    const nextTokens: Token[] = [];\n    let acc = 0;\n    let markerAdded = location.line !== location.startLine;\n    tokens.forEach(token => {\n      const x = intersect(acc, acc + token.text.length, location.from, location.to);\n      const p1 = part(token.text, acc, x.from, acc);\n      const p2 = part(token.text, x.from, x.to, acc);\n      const p3 = part(token.text, x.to, acc + token.text.length, acc);\n      if (p1.length) {\n        nextTokens.push({ ...token, text: p1 });\n      }\n      if (p2.length) {\n        const newClassName =\n          token.className.indexOf(rootClassName) === -1\n            ? `${token.className} ${rootClassName}`\n            : token.className;\n        nextTokens.push({\n          className: newClassName,\n          markers:\n            !markerAdded && location.index != null\n              ? uniq([...token.markers, location.index])\n              : token.markers,\n          text: p2\n        });\n        markerAdded = true;\n      }\n      if (p3.length) {\n        nextTokens.push({ ...token, text: p3 });\n      }\n      acc += token.text.length;\n    });\n    tokens = nextTokens.slice();\n  });\n  return tokens;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getLinearLocations(textRange: T.TextRange | undefined): T.LinearIssueLocation[] {\n  if (!textRange) {\n    return [];\n  }\n  const locations = [];\n\n  // go through all lines of the `textRange`\n  for (let line = textRange.startLine; line <= textRange.endLine; line++) {\n    // TODO fix 999999\n    const from = line === textRange.startLine ? textRange.startOffset : 0;\n    const to = line === textRange.endLine ? textRange.endOffset : 999999;\n    locations.push({ line, from, to });\n  }\n  return locations;\n}\n\nexport function getSecondaryIssueLocationsForLine(\n  line: T.SourceLine,\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined\n): T.LinearIssueLocation[] {\n  if (!highlightedLocations) {\n    return [];\n  }\n  return highlightedLocations.reduce((locations, location) => {\n    const linearLocations: T.LinearIssueLocation[] = location\n      ? getLinearLocations(location.textRange)\n          .filter(l => l.line === line.line)\n          .map(l => ({\n            ...l,\n            startLine: location.textRange.startLine,\n            index: location.index,\n            text: location.msg\n          }))\n      : [];\n    return [...locations, ...linearLocations];\n  }, []);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2022 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../types/branch-like';\n\ninterface SourceViewerContextShape {\n  branchLike?: BranchLike;\n  file: T.SourceViewerFile;\n}\n\nexport const SourceViewerContext = React.createContext<SourceViewerContextShape>({\n  branchLike: {} as BranchLike,\n  file: {} as T.SourceViewerFile\n});\n"],"sourceRoot":""}